<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ç¨‹åºå‘˜å°ç™½æ¡çš„ 2023 å¹´åº¦æ€»ç»“</title>
      <link href="/2024/01/01/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"/>
      <url>/2024/01/01/2023%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç¨‹åºå‘˜å°ç™½æ¡çš„-2023-å¹´åº¦æ€»ç»“"><a href="#ç¨‹åºå‘˜å°ç™½æ¡çš„-2023-å¹´åº¦æ€»ç»“" class="headerlink" title="ç¨‹åºå‘˜å°ç™½æ¡çš„ 2023 å¹´åº¦æ€»ç»“"></a>ç¨‹åºå‘˜å°ç™½æ¡çš„ 2023 å¹´åº¦æ€»ç»“</h1><p>è¿™é‡Œæ˜¯ç¨‹åºå‘˜å°ç™½æ¡çš„ 2023 å¹´åº¦æ€»ç»“ï¼š</p><h2 id="1ï¼‰å­¦æ ¡ç»å†ï¼š"><a href="#1ï¼‰å­¦æ ¡ç»å†ï¼š" class="headerlink" title="1ï¼‰å­¦æ ¡ç»å†ï¼š"></a>1ï¼‰å­¦æ ¡ç»å†ï¼š</h2><p>å¤§äºŒä¸‹æŠŠè½¯è€ƒè€ƒäº†ï¼Œæœ€åä¸€æ¬¡çº¸è´¨è€ƒçš„è½¯è€ƒï¼Œç„¶åä¸Šåˆé¢˜ 50 ï¼Œä¸‹åˆé¢˜ 58 è¿‡äº†ï¼Œæ¯•ç«Ÿæˆ‘æŠŠé¢˜åº“éƒ½åˆ·å®Œäº†ï¼Œåœ¨æˆ‘çœ‹æ¥é€‰æ‹©é¢˜è¦æ¯”å¤§é¢˜éš¾ï¼Œå¤§é¢˜ç›®åƒå­¦ä¹  Javaã€æœ‰ç®—æ³•åŸºç¡€çš„åŒå­¦éå¸¸æœ‰åˆ©ï¼Œåªè¦è·Ÿç€çœ‹å‡ å¥—è§†é¢‘ï¼ŒåŸºæœ¬å°±æ²¡é—®é¢˜äº†ï¼Œä¸»è¦æ˜¯é€‰æ‹©é¢˜ï¼Œ408 éƒ½æ¶‰åŠï¼Œè¿˜æœ‰æ³•å¾‹ï¼Œä¸“ä¸šè‹±è¯­ç­‰æ–¹é¢çš„çŸ¥è¯†ï¼Œæ¶‰åŠçš„å¹¿åº¦æ¯”è¾ƒå¹¿ï¼Œæœ‰æ—¶å€™ä¸å¤ªå¥½å¤ä¹ ï¼Œæˆ‘æ˜¯åªåˆ·äº†é¢˜åº“ï¼Œ2000 é¢˜å·®ä¸å¤šï¼Œé‚£æ—¶å€™è¿˜æ²¡å­¦ Python3ï¼Œä½†è€ƒè¯•æœ‰ä¸‰é¢˜ Python3 çš„é¢˜ç›®ï¼Œå› æ­¤å¯¹å­¦è¿‡ Java å’Œ Python çš„åŒå­¦æ¯”è¾ƒå‹å¥½ï¼Œè½¯è€ƒè¿™ä¸œè¥¿ï¼Œä½ è¯´å®ƒæ²¡ç”¨ä¹Ÿæ²¡ç”¨ï¼Œä½†æ€»æ¯”ä½ å¹ç‰›ï¼Œç„¶åç®€å†ä¸Šä»€ä¹ˆè·å¥–ç»å†éƒ½æ²¡æœ‰è¦å¥½ï¼Œåƒå¾ˆå¤šäººä¸å±‘è€ƒå››å…­çº§ï¼Œè½¯è€ƒï¼Œå‚åŠ è“æ¡¥æ¯ä¹‹ç±»çš„ç«èµ›ï¼Œè¯´ä»€ä¹ˆå«é‡‘é‡å¤ªä½ï¼Œæœ€åç®€å†ä¸Šå†™ä»€ä¹ˆé©¾é©¶è¯ï¼Ÿï¼Ÿï¼Ÿæˆ‘åªèƒ½æ‰£ 666ï¼Œè¿˜æ˜¯ä¸è¦çœ¼é«˜æ‰‹ä½ä¸ºå¥½ï¼Œå¤§ä¸‰ä¸ŠæŠ¥äº†ä¸€æ³¢è®¡ç®—æœºä¸‰çº§çš„æ•°æ®åº“æŠ€æœ¯ï¼Œé¡ºä¾¿çœ‹äº†ä¸‹å¤§æ•°æ®ï¼Œè®¡ç®—æœºä¸‰çº§å¯¹äºè®¡ç®—æœºä¸“ä¸šçš„æ¥è¯´&#x3D;å°å­¦é¢˜ç›®ï¼Œä¸å»ºè®®è€ƒè¿™ä¸ªï¼Œæˆ‘æ˜¯ä¸ºäº†å­¦æ ¡çš„ç´ æ‹“åˆ†ï¼Œä¸æ‹¿ç™½ä¸æ‹¿ï¼Œå¯¹æ··å¥–å­¦é‡‘æœ‰åŠ æˆã€‚</p><h2 id="2ï¼‰åˆ›ä½œç»å†ï¼š"><a href="#2ï¼‰åˆ›ä½œç»å†ï¼š" class="headerlink" title="2ï¼‰åˆ›ä½œç»å†ï¼š"></a>2ï¼‰åˆ›ä½œç»å†ï¼š</h2><p>ä»å¼€æºæˆ‘çš„é¡¹ç›®åˆ° Giteeï¼Œç»´æŠ¤äº†ä¸€å¹´ï¼Œæäº¤æœ‰åå‡ æ¬¡ç‰ˆæœ¬æ›´æ–°ï¼Œå‰åç«¯æ€»è®¡ï¼š541 ä¸ª â­ï¼Œ8300 è®¿é—®ï¼Œ1200 æ¬¡ä¸‹è½½ã€‚</p><p>å¼€æºé¡¹ç›®çº¿ä¸Šåœ°å€ï¼š<a href="https://www.xiaobaitiao.top/#/login">æˆ‘çš„ç¼–ç¨‹æ—¥å¿— (xiaobaitiao.top)</a></p><p>å¼€æºé¡¹ç›® Gitee å‰ç«¯åœ°å€ï¼š<a href="https://gitee.com/falle22222n-leaves/vue_-book-manage-system">GPTæ™ºèƒ½å›¾ä¹¦ç®¡ç†ç³»ç»Ÿå‰å°Vue2-SpringBoot2</a></p><p>å¼€æºé¡¹ç›® Gitee åç«¯åœ°å€ï¼š<a href="https://gitee.com/falle22222n-leaves/vue_-book-manage-system_backend">GPTæ™ºèƒ½å›¾ä¹¦ç®¡ç†ç³»ç»Ÿåå°Vue2-SpringBoot2</a></p><p><img src="https://pic.yupi.icu/5563/202312311836817.png"></p><h2 id="3ï¼‰ç®—æ³•ç»å†ï¼š"><a href="#3ï¼‰ç®—æ³•ç»å†ï¼š" class="headerlink" title="3ï¼‰ç®—æ³•ç»å†ï¼š"></a>3ï¼‰ç®—æ³•ç»å†ï¼š</h2><p>ä¸»è¦åˆ·é¢˜ä» 10 æœˆå¼€å§‹ï¼Œ10 æœˆä»½æˆ‘çš„é¢˜é‡è¿˜åªæœ‰ 260 +ï¼Œ12 æœˆ 31 æ—¥å·²ç»æœ‰ 696 é¢˜äº†ï¼Œé¢˜é‡å¤§æ¦‚æ˜¯æ¯å¤© 4-5 é¢˜çš„æ ·å­ï¼Œä¹‹æ‰€ä»¥ä¼šæœ‰è¿™ä¹ˆå¤šçš„æäº¤æ¬¡æ•°ï¼Œæ˜¯å› ä¸ºæˆ‘åœ¨ç–¯ç‹‚å¤ä¹  HOT 100ï¼Œé¢è¯• 150ï¼ŒLCR è¿™äº›é¢˜ï¼Œæˆ‘åŸºæœ¬æ˜¯ä¸€å¤©åˆ· 50 é¢˜ï¼Œä¸¤å¤©èƒ½åˆ·å®Œ HOT 100ï¼Œç°åœ¨åŸºæœ¬ä¸€é“é¢˜ï¼Œæˆ‘å·²ç»åšè¿‡ä¸¤ä½æ•°çš„æ¬¡æ•°äº†ï¼ŒåŸºæœ¬èƒ½å®Œå…¨æ‰‹æ’•ï¼Œä¸ç”¨ä»»ä½•çš„è¯­æ³•çš„æé†’ï¼Œç®—æ³•å¤šåšæŒå°±è¡Œäº†ï¼Œåˆ†ç±»å»å­¦ä¹ ï¼Œå¯¹äºæƒ³è¦è¿›ä¸­å¤§å‚çš„åŒå­¦ï¼Œç®—æ³•æ˜¯å¿…ä¸å¯å°‘çš„ä¸€æ¡è·¯ï¼Œå‡ åé“çš„ç®—æ³•å®Œå…¨æ˜¯ä¸å¤Ÿçš„ï¼Œä¸€èˆ¬å»ºè®®åœ¨ç¨³å®šè‡³å°‘åœ¨ 300 é¢˜å·¦å³ã€‚</p><p><img src="https://pic.yupi.icu/5563/202312311844119.png"></p><h2 id="4ï¼‰ğŸ˜å®ä¹ ç»å†ï¼š"><a href="#4ï¼‰ğŸ˜å®ä¹ ç»å†ï¼š" class="headerlink" title="4ï¼‰ğŸ˜å®ä¹ ç»å†ï¼š"></a>4ï¼‰ğŸ˜å®ä¹ ç»å†ï¼š</h2><p>10 æœˆ 25 æ—¥å‘é±¼å‚æŠ•é€’ç®€å†</p><img src="https://pic.yupi.icu/5563/202312311852924.png" style="width:300px;height:300px" /><p>10 æœˆ 28 æ—¥å’Œé±¼çš®é¢è¯•ï¼Œé¢è¯•è¿‡ç¨‹ä¹Ÿæ˜¯æ¯”è¾ƒé¡ºåˆ©ï¼Œæˆ‘çœ‹å¤§ä¸‰ä¸Šçš„ååŠç¨‹è¯¾ç¨‹ä¸å¤šï¼Œå› æ­¤å°±é€‰æ‹©åŠ å…¥äº†é±¼å‚ï¼Œä¸»è¦è´Ÿè´£æŠ€æœ¯è¿è¥ï¼ŒçŸ¥è¯†ç¢ç‰‡å’Œå­¦ä¹ ç¬”è®°ä¸»è¦ç”±æˆ‘è´Ÿè´£ã€‚</p><p>æˆªæ­¢ 12 æœˆ 31 æ—¥ï¼Œå·²ç»å†™äº† 2 ä¸ªå¤šæœˆçš„å·¥ä½œæŠ¥å‘Šäº†ã€‚</p><p><img src="https://pic.yupi.icu/5563/202312311856838.png"></p><h2 id="5ï¼‰-ğŸš€-2024-å¹´å±•æœ›å’Œè§„åˆ’"><a href="#5ï¼‰-ğŸš€-2024-å¹´å±•æœ›å’Œè§„åˆ’" class="headerlink" title="5ï¼‰ ğŸš€ 2024 å¹´å±•æœ›å’Œè§„åˆ’"></a>5ï¼‰ ğŸš€ 2024 å¹´å±•æœ›å’Œè§„åˆ’</h2><p>5.1ï¼‰è“æ¡¥æ¯èƒ½å¤Ÿæ··ä¸ªçœå¥–ï¼ˆå­¦é™¢éƒ½å…è´¹å¸®æˆ‘äº¤é’±äº†ï¼Œç™½å«–è¿™å¾—å»ï¼‰</p><p>5.2ï¼‰æœŸæœ›èƒ½å¤Ÿæœ‰é¢è¯•ä¸­å¤§å‚çš„æœºä¼šï¼Œå½“ç„¶èƒ½è¿‡æœ€å¥½.jpg ï¼šï¼‰</p><p>5.3ï¼‰ç»§ç»­ç»´æŠ¤å’Œæ‰“é€ æˆ‘å¼€æºçš„å‰åç«¯é¡¹ç›®åˆ° 1000 ä¸ª Star</p><p>5.4ï¼‰ç®—æ³•å‘¨èµ›èƒ½å¤Ÿè¾¾åˆ°è‡³å°‘ 1700 åˆ†ä»¥ä¸Šï¼Œå»è®°å½•ä¸€äº›ç®—æ³•çš„å°ç»éªŒï¼ŒåŠ›æ‰£ 800 é¢˜ã€‚</p><p>5.5ï¼‰ç‹¬ç«‹åšä¸€ä¸ªå¾®æœåŠ¡çš„é¡¹ç›®</p><p>5.6ï¼‰ç”¨ Ant Design Pro of Vue æˆ– Acro Design Vue æ‰“é€ ä¸€ä¸ªå‰ç«¯ Vue3 çš„å¿«é€Ÿå¼€å‘æ¨¡æ¿ã€‚</p><p>5.7ï¼‰é‡æ–°å»ºä¸€ä¸ªåšå®¢ï¼Œä¸Šä¸ªåšå®¢ç”±äº hexo ç‰ˆæœ¬ å’Œ Butterfly ä¸»é¢˜çš„å…³ç³»å·²ç»æ— äº†ï¼Œå‡†å¤‡é‡æ–°ä¸Šä¼ æ–‡ç« ã€‚</p><p>5.8ï¼‰CSDN å’Œ æ˜é‡‘ä¸å®šæœŸè¿›è¡Œå‘æ–‡æ›´æ–°ã€‚</p><p>5.9ï¼‰ç»™ API å¹³å°ç”¨ Vue Press æ­å»ºä¸€ä¸ªè¯´æ˜ä¹¦ç½‘ç«™ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> -å¹´åº¦æ€»ç»“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -å¹´åº¦æ€»ç»“ -ä¸ªäººå­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè¯»å–MySQLçš„DateTimeç±»å‹</title>
      <link href="/2024/01/01/Java%E8%AF%BB%E5%8F%96mysql%E7%9A%84datetime%E7%B1%BB%E5%9E%8B/"/>
      <url>/2024/01/01/Java%E8%AF%BB%E5%8F%96mysql%E7%9A%84datetime%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="Javaè¯»å–mysqlçš„datetimeç±»å‹"><a href="#Javaè¯»å–mysqlçš„datetimeç±»å‹" class="headerlink" title="Javaè¯»å–mysqlçš„datetimeç±»å‹"></a>Javaè¯»å–mysqlçš„datetimeç±»å‹</h3><p>æˆ‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨LocalDateTimeç±»ä½œä¸ºä¸MySQLä¸­DateTimeäº¤äº’çš„ç±»å‹ï¼Œå‘ç°åœ¨æ§åˆ¶å°æ˜¾ç¤ºæ—¶é—´å†…å®¹æ—¶ï¼Œä¸æ˜¯æˆ‘æƒ³è¦çš„yyyy-MM-dd HH:mm:ss,è€Œæ˜¯2022-12-07T14:39:01ï¼Œä¼šå¸¦ä¸€ä¸ªTï¼Œä¸ç¬¦åˆéœ€æ±‚ã€‚</p><p>è§£å†³æ–¹æ³•ï¼šå°†Javaçš„LocalDateTimeç±»è½¬åŒ–ä¸ºStringç±»</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230104220633874.png" alt="image-20230104220633874"></p><p>FiledFillæ˜¯æˆ‘è®¾ç½®çš„ä¸€ä¸ªè‡ªå®šä¹‰å…ƒæ•°æ®å¯¹è±¡å¤„ç†å™¨ç”¨æ¥è‡ªåŠ¨å¡«å……å’Œæ›´æ–°æ—¶é—´çš„ã€‚</p><p>ä¸‹é¢æ˜¯MyMetaObjectHandlerç±»(è‡ªåŠ¨å¡«å……å’Œæ›´æ–°å·¥å…· MyBatisPlus)</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰å…ƒæ•°æ®å¯¹è±¡å¤„ç†å™¨</span></span><br><span class="line"><span class="comment"> * å…¬å…±å¡«å……åŠŸèƒ½</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ’å…¥æ“ä½œè‡ªåŠ¨å¡«å……</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> metaObject</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line"></span><br><span class="line">        metaObject.setValue(<span class="string">&quot;createTime&quot;</span>, LocalDateTime.now().format(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)));</span><br><span class="line">        metaObject.setValue(<span class="string">&quot;updateTime&quot;</span>,LocalDateTime.now().format(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ›´æ–°æ“ä½œè‡ªåŠ¨å¡«å……</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> metaObject</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        metaObject.setValue(<span class="string">&quot;updateTime&quot;</span>,LocalDateTime.now().format(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ ·å†™å…¥æ•°æ®çš„ä¾¿æ˜¯yyyy-MM-dd HH:mm:ss æ ¼å¼ï¼Œç„¶åç”±äºmysqlçš„Stringç±»å‹å’Œdatetimeç±»ï¼Œå½“ä½ å†™å…¥ä¸Šè¿°æ ¼å¼ï¼Œä¼šè‡ªåŠ¨è½¬åŒ–ï¼Œstringç±»å‹èƒ½å¤Ÿè½¬æ¢ä¸ºdatetimeç±»ã€‚</p><p>è¯»å–æ•°æ®æ—¶ï¼Œdatetimeç±»ç”±è½¬åŒ–ä¸ºjavaçš„stringç±»ã€‚æˆ‘æœ¬æ¥ä»¥ä¸ºæ˜¯éœ€è¦åŠ ä¸Šä¸‹é¢ä¸€å¥è¯ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">select <span class="title function_">DATE_FORMAT</span><span class="params">(`create_time`, <span class="string">&quot;%Y-%m-%d %H:%i:%s&quot;</span>)</span>as create_time from test_table;</span><br></pre></td></tr></table></figure><p>ç„¶åå‘ç°æ²¡åŠ ä¹Ÿè¯»å–æˆåŠŸäº†ã€‚</p><p>Mapperæ–‡ä»¶ä¸­ï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.shop.dessert.pojo.Desserts&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;price&quot;</span> <span class="attr">column</span>=<span class="string">&quot;price&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;DOUBLE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;stock&quot;</span> <span class="attr">column</span>=<span class="string">&quot;stock&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;createTime&quot;</span> <span class="attr">column</span>=<span class="string">&quot;create_time&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;TIMESTAMP&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;updateTime&quot;</span> <span class="attr">column</span>=<span class="string">&quot;update_time&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;TIMESTAMP&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;BaseResultMap&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span>/&gt;</span></span><br><span class="line">        from t_desserts</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé—®é¢˜åªéœ€è¦åœ¨æ§åˆ¶å°è¾“å‡ºç‰¹å®šçš„æ ¼å¼çš„æ—¶å€™è€ƒè™‘ï¼Œå°±æ˜¯åœ¨æ§åˆ¶å°æ˜¾ç¤ºä»mysqlçš„datetimeç±»åˆ°Javaå®ä½“ç±»æ—¶ã€‚</p><p>å¦‚æœä¼ è¾“ç»™å‰ç«¯æ•°æ®ï¼Œç›´æ¥ä½¿ç”¨lombokå’ŒJsonå·¥å…·å°±å¯ä»¥ã€‚</p><p>æ–¹æ³•å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonFormat;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.ToString;</span><br><span class="line"><span class="keyword">import</span> lombok.experimental.Accessors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="meta">@Accessors(chain = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:SS&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date bir;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>@JsonFormatæ³¨è§£æ·»åŠ æ ¼å¼ï¼Œå¦å¤–è¿˜å¯ä»¥æŒ‡å®šæ—¶åŒºtimezone &#x3D; â€œGMT+8â€(æ ¼æ—å¨æ²»æ—¶+8å°æ—¶ä¸ºåŒ—äº¬æ—¶é—´)</p><p>ä¾èµ–å¦‚ä¸‹:</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.13.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åç«¯ä¼ è¾“å‰ç«¯çš„æ—¶å€™ï¼ŒJavaé‡‡ç”¨LocalDateTimeç±»å³å¯ï¼ŒStringç±»åªåœ¨æ§åˆ¶å°çš„æ—¶å€™æ˜¾ç¤ºã€‚</p><p>LocalDateTime-&gt;DateTime(å‰åç«¯åˆ†ç¦»é¡¹ç›®,JsonFormat)</p><p>String-&gt;DateTime-&gt;(æ§åˆ¶å°é¡¹ç›® æ˜¾ç¤ºyyyy-MM-dd HH:mm:ss)</p><p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå¯ä»¥ç‚¹èµæ”¯æŒä¸€ä¸‹åšä¸»ï¼Œæ„Ÿè°¢ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -åç«¯ -Java -MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatiså­¦ä¹ æ€»ç»“(1)</title>
      <link href="/2024/01/01/MyBatis%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"/>
      <url>/2024/01/01/MyBatis%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1-1MyBatisçš„å¢åˆ æ”¹æŸ¥"><a href="#1-1MyBatisçš„å¢åˆ æ”¹æŸ¥" class="headerlink" title="1.1MyBatisçš„å¢åˆ æ”¹æŸ¥"></a>1.1MyBatisçš„å¢åˆ æ”¹æŸ¥</h2><h3 id="1-æ·»åŠ "><a href="#1-æ·»åŠ " class="headerlink" title="1.æ·»åŠ "></a>1.æ·»åŠ </h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--int insertUser();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span>&gt;</span></span><br><span class="line">insert into t_user values(null,&#x27;admin&#x27;,&#x27;123456&#x27;,23,&#x27;ç”·&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-åˆ é™¤"><a href="#2-åˆ é™¤" class="headerlink" title="2.åˆ é™¤"></a>2.åˆ é™¤</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--int deleteUser();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span>&gt;</span></span><br><span class="line">delete from t_user where id = 7</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-ä¿®æ”¹"><a href="#3-ä¿®æ”¹" class="headerlink" title="3.ä¿®æ”¹"></a>3.ä¿®æ”¹</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--int updateUser();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span>&gt;</span></span><br><span class="line">update t_user set username=&#x27;ybc&#x27;,password=&#x27;123&#x27; where id = 6</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»"><a href="#4-æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»" class="headerlink" title="4.æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»"></a>4.æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--User getUserById();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.User&quot;</span>&gt;</span></span><br><span class="line">select * from t_user where id = 2</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-æŸ¥è¯¢é›†åˆ"><a href="#5-æŸ¥è¯¢é›†åˆ" class="headerlink" title="5.æŸ¥è¯¢é›†åˆ"></a>5.æŸ¥è¯¢é›†åˆ</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;User&gt; getUserList();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.atguigu.mybatis.bean.User&quot;</span>&gt;</span></span><br><span class="line">select * from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">æ³¨æ„ï¼š</span><br><span class="line">1ã€æŸ¥è¯¢çš„æ ‡ç­¾selectå¿…é¡»è®¾ç½®å±æ€§resultTypeæˆ–resultMapï¼Œç”¨äºè®¾ç½®å®ä½“ç±»å’Œæ•°æ®åº“è¡¨çš„æ˜ å°„</span><br><span class="line">å…³ç³»</span><br><span class="line">resultTypeï¼šè‡ªåŠ¨æ˜ å°„ï¼Œç”¨äºå±æ€§åå’Œè¡¨ä¸­å­—æ®µåä¸€è‡´çš„æƒ…å†µ</span><br><span class="line">resultMapï¼šè‡ªå®šä¹‰æ˜ å°„ï¼Œç”¨äºä¸€å¯¹å¤šæˆ–å¤šå¯¹ä¸€æˆ–å­—æ®µåå’Œå±æ€§åä¸ä¸€è‡´çš„æƒ…å†µ</span><br><span class="line">2ã€å½“æŸ¥è¯¢çš„æ•°æ®ä¸ºå¤šæ¡æ—¶ï¼Œä¸èƒ½ä½¿ç”¨å®ä½“ç±»ä½œä¸ºè¿”å›å€¼ï¼Œåªèƒ½ä½¿ç”¨é›†åˆï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸</span><br><span class="line">TooManyResultsExceptionï¼›ä½†æ˜¯è‹¥æŸ¥è¯¢çš„æ•°æ®åªæœ‰ä¸€æ¡ï¼Œå¯ä»¥ä½¿ç”¨å®ä½“ç±»æˆ–é›†åˆä½œä¸ºè¿”å›å€¼</span><br></pre></td></tr></table></figure><h2 id="1-2MyBatisè·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼-é‡ç‚¹"><a href="#1-2MyBatisè·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼-é‡ç‚¹" class="headerlink" title="1.2MyBatisè·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼(é‡ç‚¹)"></a>1.2MyBatisè·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼(é‡ç‚¹)</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">MyBatisè·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼ï¼š$&#123;&#125;å’Œ#&#123;&#125;</span><br><span class="line">$&#123;&#125;çš„æœ¬è´¨å°±æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œ#&#123;&#125;çš„æœ¬è´¨å°±æ˜¯å ä½ç¬¦èµ‹å€¼</span><br><span class="line">$&#123;&#125;ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼æ‹¼æ¥sqlï¼Œè‹¥ä¸ºå­—ç¬¦ä¸²ç±»å‹æˆ–æ—¥æœŸç±»å‹çš„å­—æ®µè¿›è¡Œèµ‹å€¼æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨åŠ å•å¼•</span><br><span class="line">å·ï¼›ä½†æ˜¯#&#123;&#125;ä½¿ç”¨å ä½ç¬¦èµ‹å€¼çš„æ–¹å¼æ‹¼æ¥sqlï¼Œæ­¤æ—¶ä¸ºå­—ç¬¦ä¸²ç±»å‹æˆ–æ—¥æœŸç±»å‹çš„å­—æ®µè¿›è¡Œèµ‹å€¼æ—¶ï¼Œå¯ä»¥è‡ª</span><br><span class="line">åŠ¨æ·»åŠ å•å¼•å·</span><br></pre></td></tr></table></figure><h3 id="1-å•ä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°"><a href="#1-å•ä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°" class="headerlink" title="1.å•ä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°"></a>1.å•ä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">è‹¥mapperæ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ä¸ºå•ä¸ªçš„å­—é¢é‡ç±»å‹</span><br><span class="line">æ­¤æ—¶å¯ä»¥ä½¿ç”¨$&#123;&#125;å’Œ#&#123;&#125;ä»¥ä»»æ„çš„åç§°è·å–å‚æ•°çš„å€¼ï¼Œæ³¨æ„$&#123;&#125;éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--    User getUserByUsername(String username);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByUsername&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from t_user where username = #&#123;username&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-å¤šä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°"><a href="#2-å¤šä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°" class="headerlink" title="2.å¤šä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°"></a>2.å¤šä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">è‹¥mapperæ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ä¸ºå¤šä¸ªæ—¶</span><br><span class="line">æ­¤æ—¶MyBatisä¼šè‡ªåŠ¨å°†è¿™äº›å‚æ•°æ”¾åœ¨ä¸€ä¸ªmapé›†åˆä¸­ï¼Œä»¥arg0,arg1...ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›ä»¥</span><br><span class="line">param1,param2...ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›å› æ­¤åªéœ€è¦é€šè¿‡$&#123;&#125;å’Œ#&#123;&#125;è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·å–ç›¸å¯¹åº”çš„å€¼ï¼Œæ³¨æ„$&#123;&#125;éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--    User checkLogin(String username , String password);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;checkLogin&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from t_user where username = #&#123;arg0&#125; and password = #&#123;arg1&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    User checkLoginByMap(Map&lt;String,Object&gt; map);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;checkLoginByMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from t_user where username = #&#123;username&#125; and password = #&#123;password&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-mapé›†åˆç±»å‹çš„å‚æ•°"><a href="#3-mapé›†åˆç±»å‹çš„å‚æ•°" class="headerlink" title="3.mapé›†åˆç±»å‹çš„å‚æ•°"></a>3.mapé›†åˆç±»å‹çš„å‚æ•°</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">è‹¥mapperæ¥å£ä¸­çš„æ–¹æ³•éœ€è¦çš„å‚æ•°ä¸ºå¤šä¸ªæ—¶ï¼Œæ­¤æ—¶å¯ä»¥æ‰‹åŠ¨åˆ›å»ºmapé›†åˆï¼Œå°†è¿™äº›æ•°æ®æ”¾åœ¨mapä¸­</span><br><span class="line">åªéœ€è¦é€šè¿‡$&#123;&#125;å’Œ#&#123;&#125;è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·å–ç›¸å¯¹åº”çš„å€¼ï¼Œæ³¨æ„$&#123;&#125;éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</span><br></pre></td></tr></table></figure><h3 id="4-å®ä½“ç±»ç±»å‹çš„å‚æ•°"><a href="#4-å®ä½“ç±»ç±»å‹çš„å‚æ•°" class="headerlink" title="4.å®ä½“ç±»ç±»å‹çš„å‚æ•°"></a>4.å®ä½“ç±»ç±»å‹çš„å‚æ•°</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">è‹¥mapperæ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ä¸ºå®ä½“ç±»å¯¹è±¡æ—¶</span><br><span class="line">æ­¤æ—¶å¯ä»¥ä½¿ç”¨$&#123;&#125;å’Œ#&#123;&#125;ï¼Œé€šè¿‡è®¿é—®å®ä½“ç±»å¯¹è±¡ä¸­çš„å±æ€§åè·å–å±æ€§å€¼ï¼Œæ³¨æ„$&#123;&#125;éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</span><br></pre></td></tr></table></figure><h3 id="5-ä½¿ç”¨-Paramæ ‡è¯†å‚æ•°"><a href="#5-ä½¿ç”¨-Paramæ ‡è¯†å‚æ•°" class="headerlink" title="5.ä½¿ç”¨@Paramæ ‡è¯†å‚æ•°"></a>5.ä½¿ç”¨@Paramæ ‡è¯†å‚æ•°</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">å¯ä»¥é€šè¿‡@Paramæ³¨è§£æ ‡è¯†mapperæ¥å£ä¸­çš„æ–¹æ³•å‚æ•°</span><br><span class="line">æ­¤æ—¶ï¼Œä¼šå°†è¿™äº›å‚æ•°æ”¾åœ¨mapé›†åˆä¸­ï¼Œä»¥@Paramæ³¨è§£çš„valueå±æ€§å€¼ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›ä»¥</span><br><span class="line">param1,param2...ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›åªéœ€è¦é€šè¿‡$&#123;&#125;å’Œ#&#123;&#125;è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·å–ç›¸å¯¹åº”çš„å€¼ï¼Œæ³¨æ„$&#123;&#125;éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·</span><br></pre></td></tr></table></figure><h3 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6.æ€»ç»“"></a>6.æ€»ç»“</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">åªéœ€è¦è®°ä½ç¬¬å››ç§å’Œç¬¬äº”ç§ï¼Œæœ‰å®ä½“ç±»å¯ä»¥æ¥æ”¶æ•°æ®ï¼Œå°±ç”¨å®ä½“ç±»æ¥æ”¶ï¼Œ#&#123;å±æ€§å€¼&#125;,$&#123;&#125;æ¥å—å­—ç¬¦ä¸²å’Œæ—¥æœŸç±»æ—¶ï¼Œæ‰‹åŠ¨åŠ å•å¼•å·ã€‚ç¬¬äº”ç§ï¼Œå½“æ²¡æœ‰å®ä½“ç±»å¯ä»¥æ¥æ”¶æ•°æ®ï¼Œç”¨@Param,ä»¥@Paramæ³¨è§£çš„valueå±æ€§å€¼ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›ä»¥param1,param2...ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼,é€šè¿‡$&#123;&#125;å’Œ#&#123;&#125;è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·å–ç›¸å¯¹åº”çš„å€¼ï¼Œ$&#123;&#125;éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">å®ä½“ç±»æ¥æ”¶ï¼Œç”¨#&#123;&#125;</span><br><span class="line"><span class="comment">&lt;!--    User getUserByUsername(String username);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByUsername&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from t_user where username = #&#123;username&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="1-3MyBatisçš„å„ç§æŸ¥è¯¢åŠŸèƒ½"><a href="#1-3MyBatisçš„å„ç§æŸ¥è¯¢åŠŸèƒ½" class="headerlink" title="1.3MyBatisçš„å„ç§æŸ¥è¯¢åŠŸèƒ½"></a>1.3MyBatisçš„å„ç§æŸ¥è¯¢åŠŸèƒ½</h2><h3 id="1-æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡"><a href="#1-æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡" class="headerlink" title="1.æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡"></a>1.æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">User <span class="title function_">getUserById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--User getUserById(@Param(&quot;id&quot;) int id);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">select * from t_user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-æŸ¥è¯¢ä¸€ä¸ªListé›†åˆ"><a href="#2-æŸ¥è¯¢ä¸€ä¸ªListé›†åˆ" class="headerlink" title="2.æŸ¥è¯¢ä¸€ä¸ªListé›†åˆ"></a>2.æŸ¥è¯¢ä¸€ä¸ªListé›†åˆ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;User&gt; getUserList();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">select * from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-æŸ¥è¯¢å•ä¸ªæ•°æ®"><a href="#3-æŸ¥è¯¢å•ä¸ªæ•°æ®" class="headerlink" title="3.æŸ¥è¯¢å•ä¸ªæ•°æ®"></a>3.æŸ¥è¯¢å•ä¸ªæ•°æ®</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŸ¥è¯¢ç”¨æˆ·çš„æ€»è®°å½•æ•°</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">* åœ¨MyBatisä¸­ï¼Œå¯¹äºJavaä¸­å¸¸ç”¨çš„ç±»å‹éƒ½è®¾ç½®äº†ç±»å‹åˆ«å</span></span><br><span class="line"><span class="comment">* ä¾‹å¦‚ï¼šjava.lang.Integer--&gt;int|integer</span></span><br><span class="line"><span class="comment">* ä¾‹å¦‚ï¼šint--&gt;_int|_integer</span></span><br><span class="line"><span class="comment">* ä¾‹å¦‚ï¼šMap--&gt;map,List--&gt;list</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--int getCount();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getCount&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;_integer&quot;</span>&gt;</span></span><br><span class="line">select count(id) from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºmapé›†åˆ"><a href="#4-æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºmapé›†åˆ" class="headerlink" title="4.æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºmapé›†åˆ"></a>4.æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºmapé›†åˆ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Map&lt;String, Object&gt; <span class="title function_">getUserToMap</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Map&lt;String, Object&gt; getUserToMap(@Param(&quot;id&quot;) int id);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserToMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">select * from t_user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ç»“æœï¼š&#123;password=123456, sex=ç”·, id=1, age=23, username=admin&#125;--&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºmapé›†åˆ"><a href="#5-æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºmapé›†åˆ" class="headerlink" title="5.æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºmapé›†åˆ"></a>5.æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºmapé›†åˆ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">* å°†è¡¨ä¸­çš„æ•°æ®ä»¥mapé›†åˆçš„æ–¹å¼æŸ¥è¯¢ï¼Œä¸€æ¡æ•°æ®å¯¹åº”ä¸€ä¸ªmapï¼›è‹¥æœ‰å¤šæ¡æ•°æ®ï¼Œå°±ä¼šäº§ç”Ÿå¤šä¸ªmapé›†åˆï¼Œæ­¤</span></span><br><span class="line"><span class="comment">æ—¶å¯ä»¥å°†è¿™äº›mapæ”¾åœ¨ä¸€ä¸ªlisté›†åˆä¸­è·å–</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">getAllUserToMap</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllUserToMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">select * from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">* å°†è¡¨ä¸­çš„æ•°æ®ä»¥mapé›†åˆçš„æ–¹å¼æŸ¥è¯¢ï¼Œä¸€æ¡æ•°æ®å¯¹åº”ä¸€ä¸ªmapï¼›è‹¥æœ‰å¤šæ¡æ•°æ®ï¼Œå°±ä¼šäº§ç”Ÿå¤šä¸ªmapé›†åˆï¼Œå¹¶</span></span><br><span class="line"><span class="comment">ä¸”æœ€ç»ˆè¦ä»¥ä¸€ä¸ªmapçš„æ–¹å¼è¿”å›æ•°æ®ï¼Œæ­¤æ—¶éœ€è¦é€šè¿‡<span class="doctag">@MapKey</span>æ³¨è§£è®¾ç½®mapé›†åˆçš„é”®ï¼Œå€¼æ˜¯æ¯æ¡æ•°æ®æ‰€å¯¹åº”çš„</span></span><br><span class="line"><span class="comment">mapé›†åˆ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@MapKey(&quot;id&quot;)</span></span><br><span class="line">Map&lt;String, Object&gt; <span class="title function_">getAllUserToMap</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllUserToMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">select * from t_user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">ç»“æœï¼š</span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">1=&#123;password=123456, sex=ç”·, id=1, age=23, username=admin&#125;,</span></span><br><span class="line"><span class="comment">2=&#123;password=123456, sex=ç”·, id=2, age=23, username=å¼ ä¸‰&#125;,</span></span><br><span class="line"><span class="comment">3=&#123;password=123456, sex=ç”·, id=3, age=23, username=å¼ ä¸‰&#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure><h2 id="1-4ç‰¹æ®ŠSQLçš„æ‰§è¡Œ"><a href="#1-4ç‰¹æ®ŠSQLçš„æ‰§è¡Œ" class="headerlink" title="1.4ç‰¹æ®ŠSQLçš„æ‰§è¡Œ"></a>1.4ç‰¹æ®ŠSQLçš„æ‰§è¡Œ</h2><h3 id="1-æ¨¡ç³ŠæŸ¥è¯¢"><a href="#1-æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="1.æ¨¡ç³ŠæŸ¥è¯¢"></a>1.æ¨¡ç³ŠæŸ¥è¯¢</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æµ‹è¯•æ¨¡ç³ŠæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> mohu</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">testMohu</span><span class="params">(<span class="meta">@Param(&quot;mohu&quot;)</span> String mohu)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;User&gt; testMohu(@Param(&quot;mohu&quot;) String mohu); æ¨èç¬¬ä¸‰ç§å†™æ³•--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;testMohu&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--select * from t_user where username like &#x27;%$&#123;mohu&#125;%&#x27;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--select * from t_user where username like concat(&#x27;%&#x27;,#&#123;mohu&#125;,&#x27;%&#x27;)--&gt;</span></span><br><span class="line">select * from t_user where username like &quot;%&quot;#&#123;mohu&#125;&quot;%&quot;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-æ‰¹é‡åˆ é™¤"><a href="#2-æ‰¹é‡åˆ é™¤" class="headerlink" title="2.æ‰¹é‡åˆ é™¤"></a>2.æ‰¹é‡åˆ é™¤</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ‰¹é‡åˆ é™¤</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> ids</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteMore</span><span class="params">(<span class="meta">@Param(&quot;ids&quot;)</span> String ids)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--int deleteMore(@Param(&quot;ids&quot;) String ids); æ‰¹é‡åˆ é™¤åªèƒ½ç”¨$&#123;&#125;--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteMore&quot;</span>&gt;</span></span><br><span class="line">delete from t_user where id in ($&#123;ids&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-åŠ¨æ€è®¾ç½®è¡¨å"><a href="#3-åŠ¨æ€è®¾ç½®è¡¨å" class="headerlink" title="3.åŠ¨æ€è®¾ç½®è¡¨å"></a>3.åŠ¨æ€è®¾ç½®è¡¨å</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åŠ¨æ€è®¾ç½®è¡¨åï¼ŒæŸ¥è¯¢æ‰€æœ‰çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> tableName</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getAllUser</span><span class="params">(<span class="meta">@Param(&quot;tableName&quot;)</span> String tableName)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;User&gt; getAllUser(@Param(&quot;tableName&quot;) String tableName);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">select * from $&#123;tableName&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-æ·»åŠ åŠŸèƒ½è·å–è‡ªå¢çš„ä¸»é”®"><a href="#4-æ·»åŠ åŠŸèƒ½è·å–è‡ªå¢çš„ä¸»é”®" class="headerlink" title="4.æ·»åŠ åŠŸèƒ½è·å–è‡ªå¢çš„ä¸»é”®"></a>4.æ·»åŠ åŠŸèƒ½è·å–è‡ªå¢çš„ä¸»é”®</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ·»åŠ ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">* useGeneratedKeysï¼šè®¾ç½®ä½¿ç”¨è‡ªå¢çš„ä¸»é”®</span></span><br><span class="line"><span class="comment">* keyPropertyï¼šå› ä¸ºå¢åˆ æ”¹æœ‰ç»Ÿä¸€çš„è¿”å›å€¼æ˜¯å—å½±å“çš„è¡Œæ•°ï¼Œå› æ­¤åªèƒ½å°†è·å–çš„è‡ªå¢çš„ä¸»é”®æ”¾åœ¨ä¼ è¾“çš„å‚</span></span><br><span class="line"><span class="comment">æ•°userå¯¹è±¡çš„æŸä¸ªå±æ€§ä¸­</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">insertUser</span><span class="params">(User user)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--int insertUser(User user);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">insert into t_user values(null,#&#123;username&#125;,#&#123;password&#125;,#&#123;age&#125;,#&#123;sex&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="1-5è‡ªå®šä¹‰æ˜ å°„resultMap"><a href="#1-5è‡ªå®šä¹‰æ˜ å°„resultMap" class="headerlink" title="1.5è‡ªå®šä¹‰æ˜ å°„resultMap"></a>1.5è‡ªå®šä¹‰æ˜ å°„resultMap</h2><h3 id="1-resultMapå¤„ç†å­—æ®µå’Œå±æ€§çš„æ˜ å°„å…³ç³»"><a href="#1-resultMapå¤„ç†å­—æ®µå’Œå±æ€§çš„æ˜ å°„å…³ç³»" class="headerlink" title="1.resultMapå¤„ç†å­—æ®µå’Œå±æ€§çš„æ˜ å°„å…³ç³»"></a>1.resultMapå¤„ç†å­—æ®µå’Œå±æ€§çš„æ˜ å°„å…³ç³»</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">è‹¥å­—æ®µåå’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¸ä¸€è‡´ï¼Œåˆ™å¯ä»¥é€šè¿‡resultMapè®¾ç½®è‡ªå®šä¹‰æ˜ å°„</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">resultMapï¼šè®¾ç½®è‡ªå®šä¹‰æ˜ å°„</span></span><br><span class="line"><span class="comment">å±æ€§ï¼š</span></span><br><span class="line"><span class="comment">idï¼šè¡¨ç¤ºè‡ªå®šä¹‰æ˜ å°„çš„å”¯ä¸€æ ‡è¯†</span></span><br><span class="line"><span class="comment">typeï¼šæŸ¥è¯¢çš„æ•°æ®è¦æ˜ å°„çš„å®ä½“ç±»çš„ç±»å‹</span></span><br><span class="line"><span class="comment">å­æ ‡ç­¾ï¼š</span></span><br><span class="line"><span class="comment">idï¼šè®¾ç½®ä¸»é”®çš„æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">resultï¼šè®¾ç½®æ™®é€šå­—æ®µçš„æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">associationï¼šè®¾ç½®å¤šå¯¹ä¸€çš„æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">collectionï¼šè®¾ç½®ä¸€å¯¹å¤šçš„æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">å±æ€§ï¼š</span></span><br><span class="line"><span class="comment">propertyï¼šè®¾ç½®æ˜ å°„å…³ç³»ä¸­å®ä½“ç±»ä¸­çš„å±æ€§å</span></span><br><span class="line"><span class="comment">columnï¼šè®¾ç½®æ˜ å°„å…³ç³»ä¸­è¡¨ä¸­çš„å­—æ®µå</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;userName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--List&lt;User&gt; testMohu(@Param(&quot;mohu&quot;) String mohu);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;testMohu&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userMap&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--select * from t_user where username like &#x27;%$&#123;mohu&#125;%&#x27;--&gt;</span></span><br><span class="line">select id,user_name,password,age,sex from t_user where user_name like</span><br><span class="line">concat(&#x27;%&#x27;,#&#123;mohu&#125;,&#x27;%&#x27;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">è‹¥å­—æ®µåå’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¸ä¸€è‡´ï¼Œä½†æ˜¯å­—æ®µåç¬¦åˆæ•°æ®åº“çš„è§„åˆ™ï¼ˆä½¿ç”¨<span class="emphasis">_ï¼‰ï¼Œå®ä½“ç±»ä¸­çš„å±æ€§</span></span><br><span class="line"><span class="emphasis">åç¬¦åˆJavaçš„è§„åˆ™ï¼ˆä½¿ç”¨é©¼å³°ï¼‰</span></span><br><span class="line"><span class="emphasis">æ­¤æ—¶ä¹Ÿå¯é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼å¤„ç†å­—æ®µåå’Œå®ä½“ç±»ä¸­çš„å±æ€§çš„æ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="emphasis">a&gt;å¯ä»¥é€šè¿‡ä¸ºå­—æ®µèµ·åˆ«åçš„æ–¹å¼ï¼Œä¿è¯å’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¿æŒä¸€è‡´</span></span><br><span class="line"><span class="emphasis">b&gt;å¯ä»¥åœ¨MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸€ä¸ªå…¨å±€é…ç½®ä¿¡æ¯mapUnderscoreToCamelCaseï¼Œå¯</span></span><br><span class="line"><span class="emphasis">ä»¥åœ¨æŸ¥è¯¢è¡¨ä¸­æ•°æ®æ—¶ï¼Œè‡ªåŠ¨å°†_</span>ç±»å‹çš„å­—æ®µåè½¬æ¢ä¸ºé©¼å³°</span><br><span class="line">ä¾‹å¦‚ï¼šå­—æ®µåuser<span class="emphasis">_nameï¼Œè®¾ç½®äº†mapUnderscoreToCamelCaseï¼Œæ­¤æ—¶å­—æ®µåå°±ä¼šè½¬æ¢ä¸º</span></span><br><span class="line"><span class="emphasis">userName</span></span><br></pre></td></tr></table></figure><h3 id="2-å¤šå¯¹ä¸€æ˜ å°„å¤„ç†"><a href="#2-å¤šå¯¹ä¸€æ˜ å°„å¤„ç†" class="headerlink" title="2.å¤šå¯¹ä¸€æ˜ å°„å¤„ç†"></a>2.å¤šå¯¹ä¸€æ˜ å°„å¤„ç†</h3><h4 id="2-1çº§è”æ–¹å¼å¤„ç†æ˜ å°„å…³ç³»"><a href="#2-1çº§è”æ–¹å¼å¤„ç†æ˜ å°„å…³ç³»" class="headerlink" title="2.1çº§è”æ–¹å¼å¤„ç†æ˜ å°„å…³ç³»"></a>2.1çº§è”æ–¹å¼å¤„ç†æ˜ å°„å…³ç³»</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empDeptMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;eid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">property</span>=<span class="string">&quot;ename&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept.did&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept.dname&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Emp getEmpAndDeptByEid(@Param(&quot;eid&quot;) int eid);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDeptByEid&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empDeptMap&quot;</span>&gt;</span></span><br><span class="line">select emp.*,dept.* from t_emp emp left join t_dept dept on emp.did =</span><br><span class="line">dept.did where emp.eid = #&#123;eid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-2ä½¿ç”¨associationå¤„ç†æ˜ å°„å…³ç³»"><a href="#2-2ä½¿ç”¨associationå¤„ç†æ˜ å°„å…³ç³»" class="headerlink" title="2.2ä½¿ç”¨associationå¤„ç†æ˜ å°„å…³ç³»"></a>2.2ä½¿ç”¨associationå¤„ç†æ˜ å°„å…³ç³»</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empDeptMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;eid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">property</span>=<span class="string">&quot;ename&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span> <span class="attr">property</span>=<span class="string">&quot;did&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dname&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Emp getEmpAndDeptByEid(@Param(&quot;eid&quot;) int eid);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDeptByEid&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empDeptMap&quot;</span>&gt;</span></span><br><span class="line">select emp.*,dept.* from t_emp emp left join t_dept dept on emp.did =</span><br><span class="line">dept.did where emp.eid = #&#123;eid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-3åˆ†æ­¥æŸ¥è¯¢"><a href="#2-3åˆ†æ­¥æŸ¥è¯¢" class="headerlink" title="2.3åˆ†æ­¥æŸ¥è¯¢"></a>2.3åˆ†æ­¥æŸ¥è¯¢</h4><h5 id="2-3-1æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯"><a href="#2-3-1æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯" class="headerlink" title="2.3.1æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯"></a>2.3.1æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* é€šè¿‡åˆ†æ­¥æŸ¥è¯¢æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> eid</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Emp <span class="title function_">getEmpByStep</span><span class="params">(<span class="meta">@Param(&quot;eid&quot;)</span> <span class="type">int</span> eid)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empDeptStepMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;eid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">property</span>=<span class="string">&quot;ename&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">selectï¼šè®¾ç½®åˆ†æ­¥æŸ¥è¯¢ï¼ŒæŸ¥è¯¢æŸä¸ªå±æ€§çš„å€¼çš„sqlçš„æ ‡è¯†ï¼ˆnamespace.sqlIdï¼‰</span></span><br><span class="line"><span class="comment">columnï¼šå°†sqlä»¥åŠæŸ¥è¯¢ç»“æœä¸­çš„æŸä¸ªå­—æ®µè®¾ç½®ä¸ºåˆ†æ­¥æŸ¥è¯¢çš„æ¡ä»¶</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">select</span>=<span class="string">&quot;com.atguigu.MyBatis.mapper.DeptMapper.getEmpDeptByStep&quot;</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Emp getEmpByStep(@Param(&quot;eid&quot;) int eid);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByStep&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empDeptStepMap&quot;</span>&gt;</span></span><br><span class="line">select * from t_emp where eid = #&#123;eid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-3-2æ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯"><a href="#2-3-2æ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯" class="headerlink" title="2.3.2æ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯"></a>2.3.2æ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ†æ­¥æŸ¥è¯¢çš„ç¬¬äºŒæ­¥ï¼šæ ¹æ®å‘˜å·¥æ‰€å¯¹åº”çš„didæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> did</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Dept <span class="title function_">getEmpDeptByStep</span><span class="params">(<span class="meta">@Param(&quot;did&quot;)</span> <span class="type">int</span> did)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--Dept getEmpDeptByStep(@Param(&quot;did&quot;) int did);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpDeptByStep&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line">select * from t_dept where did = #&#123;did&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-ä¸€å¯¹å¤šæ˜ å°„å¤„ç†"><a href="#3-ä¸€å¯¹å¤šæ˜ å°„å¤„ç†" class="headerlink" title="3.ä¸€å¯¹å¤šæ˜ å°„å¤„ç†"></a>3.ä¸€å¯¹å¤šæ˜ å°„å¤„ç†</h3><h4 id="3-1ä½¿ç”¨collectionå¤„ç†æ˜ å°„å…³ç³»"><a href="#3-1ä½¿ç”¨collectionå¤„ç†æ˜ å°„å…³ç³»" class="headerlink" title="3.1ä½¿ç”¨collectionå¤„ç†æ˜ å°„å…³ç³»"></a>3.1ä½¿ç”¨collectionå¤„ç†æ˜ å°„å…³ç³»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®éƒ¨é—¨idæŸ¥æ–°éƒ¨é—¨ä»¥åŠéƒ¨é—¨ä¸­çš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> did</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Dept <span class="title function_">getDeptEmpByDid</span><span class="params">(<span class="meta">@Param(&quot;did&quot;)</span> <span class="type">int</span> did)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;deptEmpMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;did&quot;</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;dname&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">ofTypeï¼šè®¾ç½®collectionæ ‡ç­¾æ‰€å¤„ç†çš„é›†åˆå±æ€§ä¸­å­˜å‚¨æ•°æ®çš„ç±»å‹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;eid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">column</span>=<span class="string">&quot;ename&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Dept getDeptEmpByDid(@Param(&quot;did&quot;) int did);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptEmpByDid&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;deptEmpMap&quot;</span>&gt;</span></span><br><span class="line">select dept.*,emp.* from t_dept dept left join t_emp emp on dept.did =</span><br><span class="line">emp.did where dept.did = #&#123;did&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-2åˆ†æ­¥æŸ¥è¯¢"><a href="#3-2åˆ†æ­¥æŸ¥è¯¢" class="headerlink" title="3.2åˆ†æ­¥æŸ¥è¯¢"></a>3.2åˆ†æ­¥æŸ¥è¯¢</h4><h5 id="3-2-1æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯"><a href="#3-2-1æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯" class="headerlink" title="3.2.1æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯"></a>3.2.1æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* åˆ†æ­¥æŸ¥è¯¢éƒ¨é—¨å’Œéƒ¨é—¨ä¸­çš„å‘˜å·¥</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> did</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Dept <span class="title function_">getDeptByStep</span><span class="params">(<span class="meta">@Param(&quot;did&quot;)</span> <span class="type">int</span> did)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;deptEmpStep&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;did&quot;</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">column</span>=<span class="string">&quot;dname&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">fetchType</span>=<span class="string">&quot;eager&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">select</span>=<span class="string">&quot;com.atguigu.MyBatis.mapper.EmpMapper.getEmpListByDid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Dept getDeptByStep(@Param(&quot;did&quot;) int did);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptByStep&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;deptEmpStep&quot;</span>&gt;</span></span><br><span class="line">select * from t_dept where did = #&#123;did&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="3-2-2æ ¹æ®éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥"><a href="#3-2-2æ ¹æ®éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥" class="headerlink" title="3.2.2æ ¹æ®éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥"></a>3.2.2æ ¹æ®éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®éƒ¨é—¨idæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> did</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">List&lt;Emp&gt; <span class="title function_">getEmpListByDid</span><span class="params">(<span class="meta">@Param(&quot;did&quot;)</span> <span class="type">int</span> did)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;Emp&gt; getEmpListByDid(@Param(&quot;did&quot;) int did);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpListByDid&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">select * from t_emp where did = #&#123;did&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">åˆ†æ­¥æŸ¥è¯¢çš„ä¼˜ç‚¹ï¼šå¯ä»¥å®ç°å»¶è¿ŸåŠ è½½ï¼Œä½†æ˜¯å¿…é¡»åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®å…¨å±€é…ç½®ä¿¡æ¯ï¼š</span><br><span class="line">lazyLoadingEnabledï¼šå»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½</span><br><span class="line">aggressiveLazyLoadingï¼šå½“å¼€å¯æ—¶ï¼Œä»»ä½•æ–¹æ³•çš„è°ƒç”¨éƒ½ä¼šåŠ è½½è¯¥å¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚ å¦åˆ™ï¼Œæ¯ä¸ªå±æ€§ä¼šæŒ‰éœ€åŠ è½½ã€‚</span><br><span class="line">æ­¤æ—¶å°±å¯ä»¥å®ç°æŒ‰éœ€åŠ è½½ï¼Œè·å–çš„æ•°æ®æ˜¯ä»€ä¹ˆï¼Œå°±åªä¼šæ‰§è¡Œç›¸åº”çš„sqlã€‚æ­¤æ—¶å¯é€šè¿‡associationå’Œcollectionä¸­çš„fetchTypeå±æ€§è®¾ç½®å½“å‰çš„åˆ†æ­¥æŸ¥è¯¢æ˜¯å¦ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼ŒfetchType=&quot;lazy(å»¶è¿ŸåŠ è½½)|eager(ç«‹å³åŠ è½½)&quot;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -MyBatis -åç«¯ -æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VirtualBox å’Œ Vagrant å¿«é€Ÿå®‰è£… Centos7 æŠ¥é”™</title>
      <link href="/2023/12/09/Virtual%20Box%20%E5%92%8C%20Vagrant%20%E5%BF%AB%E9%80%9F%E5%AE%89%E8%A3%85%20centos7%20%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
      <url>/2023/12/09/Virtual%20Box%20%E5%92%8C%20Vagrant%20%E5%BF%AB%E9%80%9F%E5%AE%89%E8%A3%85%20centos7%20%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="VirtualBox-å’Œ-Vagrant-å¿«é€Ÿå®‰è£…-Centos7-æŠ¥é”™"><a href="#VirtualBox-å’Œ-Vagrant-å¿«é€Ÿå®‰è£…-Centos7-æŠ¥é”™" class="headerlink" title="VirtualBox å’Œ Vagrant å¿«é€Ÿå®‰è£… Centos7 æŠ¥é”™"></a>VirtualBox å’Œ Vagrant å¿«é€Ÿå®‰è£… Centos7 æŠ¥é”™</h1><p>ä»Šå¤©å°è¯•ç”¨ VirtualBox å’Œ Vagrant å¿«é€Ÿå®‰è£… Centos7ï¼ŒBUG å¤šå¤šï¼</p><p>1ï¼‰ä¸‹è½½ 6.1.26 ç‰ˆæœ¬ VirtualBoxï¼ŒWindows11 ä¸å…¼å®¹ï¼Ÿï¼Ÿï¼Ÿä»€ä¹ˆé¬¼ï¼Ÿ</p><p>è§£å†³æ–¹æ³•ï¼šæ¢ 6.1.44 ç‰ˆæœ¬äº†ï¼Œå¥½åƒæ˜¯ 6.1.28 ä»¥ä¸Šä¿®å¤äº† Windows11 ä¸èƒ½å®‰è£… Oracle çš„ VirtualBox çš„ BUGï¼Œ7.0.0ç‰ˆæœ¬ä»¥ä¸Šè²Œä¼¼ä¿®å¤äº†æ›´å¤š BUGï¼Œæˆ‘è¿™è¾¹æš‚æ—¶ç”¨çš„ 6.1.44ç‰ˆæœ¬ã€‚</p><p>2ï¼‰ä½¿ç”¨ Vagrant init centos&#x2F;7ï¼Œç„¶å Vagrant up ç–¯ç‹‚æŠ¥é”™ã€‚</p><p>2.1ï¼‰ç¬¬ä¸€ä¸ªé”™è¯¯ï¼Œç”±äºå›½å†…è¿ä¸ä¸Šå›½å¤–æœåŠ¡å™¨ï¼Œæ‹‰å–ä¸äº†ï¼Œæˆ‘ç›´æ¥åˆ°å®˜ç½‘ï¼Œåœ¨çº¿ä¸‹äº†ä¸ª .box æ–‡ä»¶ï¼Œç„¶ååˆ©ç”¨ Vagrant box add åç§° æ–‡ä»¶è·¯å¾„å³å¯å®Œæˆæ·»åŠ ã€‚åƒä¸‡åˆ«æ”¾ä¸­æ–‡è·¯å¾„ï¼ï¼ï¼å¦åˆ™ GG ï¼</p><p>2.2ï¼‰ç¬¬äºŒä¸ªé”™è¯¯</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">incompatible character encodings: gbk and utf-8 (encoding::compatibilityerror)</span><br></pre></td></tr></table></figure><p>ï¼Ÿï¼Ÿï¼Ÿåˆæ˜¯é—®å·ï¼Œæœäº†ç™¾åº¦ï¼Œååˆ†é’Ÿï¼Œå‘ç°æˆ‘ç”µè„‘ç³»ç»Ÿåæ˜¯ä¸­æ–‡ï¼Œæœ‰äº›è½¯ä»¶è‡ªåŠ¨åœ¨ C ç›˜ç”Ÿæˆç›®å½•ï¼Œç„¶åå»åŠ è½½æ–‡ä»¶ï¼Œè¿™ç©æ„è¯†åˆ«ä¸äº†ï¼Œç›´æ¥ GGã€‚</p><p>è§£å†³æ–¹æ³•ï¼š</p><p>æ‰“å¼€ VirtualBoxï¼Œå°†å…¨å±€è®¾å®šçš„é»˜è®¤è™šæ‹Ÿç”µè„‘ä½ç½®æ”¹æˆæ²¡æœ‰ä¸­æ–‡è·¯å¾„çš„ï¼Œè€Œä¸”ä½ å½“åˆçš„ BOX æ–‡ä»¶ï¼Œè¦åœ¨æ­¤è·¯å¾„ä¸‹ï¼</p><p><img src="https://pic.yupi.icu/5563/202312132217299.png"></p><p>æ­¤å¤–æˆ‘è¿˜åœ¨ Vagrantfile ä¸­æ·»åŠ ä»£ç ï¼Œä¸çŸ¥é“è¿™æ­¥æœ‰æ²¡æœ‰èµ·ä½œç”¨ï¼Œå¤§å®¶å¯ä»¥è¯•ä¸€è¯•æ§åˆ¶å˜é‡æ³•ï¼Œå¦‚æœä¸Šé¢æ²¡æœ‰ç”¨ï¼Œé‚£å°±æŠŠè¿™è¡Œå‘½ä»¤æ·»åŠ åˆ° Vagrantfile ä¸­ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Encoding.default_external = <span class="string">&#x27;UTF-8&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://pic.yupi.icu/5563/202312132219801.png"></p><p>è™šæ‹Ÿæœºè¿™ BUG è¿˜çœŸä¸å¥½æ‰¾ï¼Œå‰åæäº†åŠå°æ—¶å§ï¼Œç»ˆäºå®‰è£…æˆåŠŸäº†ã€‚</p><p><img src="https://pic.yupi.icu/5563/202312132220532.png"></p><p>æ€»ç»“ï¼šå®‰è£…è½¯ä»¶æ—¶ï¼Œä¸­æ–‡è·¯å¾„åƒä¸‡åˆ«æœ‰ï¼ï¼ï¼ä¹°ç”µè„‘ç„¶ååˆ›å»ºç”µè„‘ç”¨æˆ·åˆ«ç”¨ä¸­æ–‡ï¼Œåƒä¸€äº›å›½å¤–è´¦å·ä¹Ÿéƒ½ç”¨è‹±æ–‡ï¼Œä¸­æ–‡ä¹±ç é—®é¢˜å¤ªå¤šäº†ï¼Œä»æ ¹æºä¸Šè§£å†³é—®é¢˜ï¼ï¼ï¼</p>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -è™šæ‹Ÿæœº -VirtualBox -æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼è¯»ä¹¦ç¬”è®°ç¬¬ä¸€æœŸ</title>
      <link href="/2023/03/31/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
      <url>/2023/03/31/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="è®¾è®¡æ¨¡å¼è¯»ä¹¦ç¬”è®°ç¬¬ä¸€æœŸ"><a href="#è®¾è®¡æ¨¡å¼è¯»ä¹¦ç¬”è®°ç¬¬ä¸€æœŸ" class="headerlink" title="è®¾è®¡æ¨¡å¼è¯»ä¹¦ç¬”è®°ç¬¬ä¸€æœŸ"></a>è®¾è®¡æ¨¡å¼è¯»ä¹¦ç¬”è®°ç¬¬ä¸€æœŸ</h2><h3 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h3><h4 id="å·¥å‚æ¨¡å¼å¤§è‡´ç»“æ„"><a href="#å·¥å‚æ¨¡å¼å¤§è‡´ç»“æ„" class="headerlink" title="å·¥å‚æ¨¡å¼å¤§è‡´ç»“æ„"></a>å·¥å‚æ¨¡å¼å¤§è‡´ç»“æ„</h4><p><img src="http://xxx.xiaobaitiao.club/project/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F1.png" alt="image-20230331205536431"></p><ul><li>å›¾ä¸­å®ç°äº†ä¸€ä¸ªè®¡ç®—å™¨çš„åŠŸèƒ½</li><li>Operationä¸ºæŠ½è±¡çˆ¶ç±»,Sub,Addä¸¤ä¸ªå­ç±»å»ç»§æ‰¿æŠ½è±¡çˆ¶ç±»ï¼Œç„¶åå®ç°æŠ½è±¡çˆ¶ç±»çš„æ–¹æ³•ï¼ŒæŠ½è±¡çˆ¶ç±»çš„æ–¹æ³•å¯ä»¥æ˜¯æœ‰å®ç°çš„æ–¹æ³•ï¼Œå› æ­¤æˆ‘è¿™è¾¹ç”¨äº†ä¸€ä¸ªå…·ä½“å®ç°çš„æ–¹æ³•ï¼Œå†™æˆæŠ½è±¡æ–¹æ³•ä¹Ÿå¯ä»¥ï¼Œä½†å­ç±»å°±éœ€è¦å¿…é¡»å®ç°äº†ï¼Œè€ŒéæŠ½è±¡æ–¹æ³•ä¸ä¸€å®šè¦å®ç°ï¼Œæˆ‘è¿™ç§åªå†™äº†ä¸¤ä¸ªåŠŸèƒ½ï¼Œ4ä¸ªåŠŸèƒ½ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¸ºäº†ç¯‡å¹…å‡å°‘ä¸€ä¸‹ã€‚</li><li>OperationFactoryä½œä¸ºä¸€ä¸ªç®€å•çš„å·¥å‚ï¼Œæ¥å—å­—ç¬¦ä¸²ï¼Œç„¶åå†ç»™äºˆç›¸å¯¹åº”çš„å®ç°å­ç±»çš„å®ä¾‹å¯¹è±¡ã€‚æ¯”å¦‚ä½ å†™â€+â€,å°±å¯¹åº”new Add()ã€‚</li></ul><h4 id="å·¥å‚çš„å…·ä½“å®ç°æ–¹æ³•"><a href="#å·¥å‚çš„å…·ä½“å®ç°æ–¹æ³•" class="headerlink" title="å·¥å‚çš„å…·ä½“å®ç°æ–¹æ³•"></a>å·¥å‚çš„å…·ä½“å®ç°æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OperationFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Operation <span class="title function_">createOperate</span><span class="params">(String operate)</span>&#123;</span><br><span class="line">        <span class="type">Operation</span> <span class="variable">op</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">switch</span> (operate)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">                op = <span class="keyword">new</span> <span class="title class_">Add</span>();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">                op = <span class="keyword">new</span> <span class="title class_">Sub</span>();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> op;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥½å¤„ï¼šå…¶å®å¾ˆæ˜æ˜¾ï¼Œæœ¬æ¥è¿™æ®µswitch case,ä½ å¯èƒ½ä¼šæ”¾åœ¨æ§åˆ¶å±‚æˆ–è€…ä¸šåŠ¡å±‚ï¼Œè€Œå°†è¿™äº›ä»£ç æŠ½è±¡å‡ºæ¥ï¼Œæ”¾åœ¨ä¸€ä¸ªå·¥å‚ä¸­ï¼Œè¾“å…¥ä¸€ä¸ªä½ æƒ³è¦çš„æ“ä½œï¼Œä¾¿ä¼šç»™ä½ ç›¸å¯¹åº”çš„å®ä¾‹å¯¹è±¡ï¼Œå‡å°‘äº†è€¦åˆåº¦ã€‚ä½†ç»“åˆä¸‹é¢è¦è®²çš„ç­–ç•¥æ¨¡å¼ï¼Œè¿˜å¯ä»¥è¿›ä¸€æ­¥å‡å°‘è€¦åˆåº¦ã€‚</p><h4 id="æµ‹è¯•æ–¹æ³•"><a href="#æµ‹è¯•æ–¹æ³•" class="headerlink" title="æµ‹è¯•æ–¹æ³•"></a>æµ‹è¯•æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Operation</span> <span class="variable">operate</span> <span class="operator">=</span> OperationFactory.createOperate(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">        <span class="type">double</span> <span class="variable">result</span> <span class="operator">=</span> operate.getResult(<span class="number">520</span>, <span class="number">1314</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h3><h4 id="ç­–ç•¥æ¨¡å¼å¤§è‡´ç»“æ„å›¾"><a href="#ç­–ç•¥æ¨¡å¼å¤§è‡´ç»“æ„å›¾" class="headerlink" title="ç­–ç•¥æ¨¡å¼å¤§è‡´ç»“æ„å›¾"></a>ç­–ç•¥æ¨¡å¼å¤§è‡´ç»“æ„å›¾</h4><p><img src="http://xxx.xiaobaitiao.club/project/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F1.png" alt="image-20230331211346849"></p><ul><li><p>å›¾ä¸­CashSuperçš„æŠ½è±¡çˆ¶ç±»ï¼Œå…¶ä¸­acceptCashæ˜¯æŠ½è±¡æ–¹æ³•</p></li><li><p>ä¸‰ä¸ªå…·ä½“å­ç±»ç»§æ‰¿äº†CashSuperå¹¶ä¸”é‡å†™äº†CashSuperçš„æ–¹æ³•,CashNormalè¡¨ç¤ºåœ¨å•†åœºæ­£å¸¸è´­ä¹°å•†å“ï¼Œdouble priceä»·æ ¼,int numæ•°é‡,CashReturn ä»£è¡¨ä¹°xxxè¿”xxxï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ä»–ä»¬æ¥å—çš„å‚æ•°ç›¸åŒï¼Œåªæ˜¯å…·ä½“å®ç°ä¸åŒè€Œå·²ï¼ŒCashRebateä»£è¡¨æ‰“æŠ˜æƒ…å†µã€‚</p></li><li><p>CashContexté‡Œé¢å…¶å®è¿˜åŒ…å«äº†ä¸€ä¸ªæ„é€ å™¨</p></li><li><p>ç”¨å·¥å‚æ¨¡å¼+ç­–ç•¥æ¨¡å¼ç»“åˆï¼Œå°†CashContextç”¨ä½œä¸€ä¸ªContextä¸Šä¸‹æ–‡ï¼Œç”¨æ¥ç»´æŠ¤CashSuperè¿™ä¸ªå˜é‡ï¼Œå°†æ„é€ å™¨çš„å‚æ•°æ”¹å˜ä¸€ä¸ªå°±å¯ä»¥å®ç°ä¼ è¾“åŠŸèƒ½ç±»å‹ï¼Œç„¶åå°†å˜é‡èµ‹å€¼æˆç›¸å¯¹åº”çš„å®ç°å­ç±»ã€‚ç”¨getResultæ–¹æ³•è·å–å…·ä½“ç»“æœï¼Œè¿™æ ·ä¸€æ¥è·å–å…·ä½“å¯¹è±¡äº¤ç»™ä¸Šä¸‹æ–‡ï¼Œå…·ä½“æ‰§è¡Œæ–¹æ³•ä¹Ÿäº¤ç»™ä¸Šä¸‹æ–‡ã€‚é‚£ä¹ˆå®¢æˆ·ç«¯åªè¦çŸ¥é“Contextä¸€ä¸ªä¸Šä¸‹æ–‡å°±å¯ä»¥ç›´æ¥è·å–ç»“æœã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CashContext</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> CashSuper cs;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CashContext</span><span class="params">(<span class="type">int</span> cashType)</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (cashType)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="built_in">this</span>.cs = <span class="keyword">new</span> <span class="title class_">CashNormal</span>();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                <span class="built_in">this</span>.cs = <span class="keyword">new</span> <span class="title class_">CashRebate</span>(<span class="number">0.8</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                <span class="built_in">this</span>.cs = <span class="keyword">new</span> <span class="title class_">CashReturn</span>(<span class="number">300</span>,<span class="number">100</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getResult</span><span class="params">(<span class="type">double</span> price,<span class="type">int</span> num)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.cs.acceptCash(price,num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•æ–¹æ³•-1"><a href="#æµ‹è¯•æ–¹æ³•-1" class="headerlink" title="æµ‹è¯•æ–¹æ³•"></a>æµ‹è¯•æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestFactoryAndStrategy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">CashContext</span> <span class="variable">cashContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CashContext</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="type">double</span> <span class="variable">result</span> <span class="operator">=</span> cashContext.getResult(<span class="number">400</span>, <span class="number">2</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯¹æ¯”ä¸€ä¸‹å·¥å‚æ¨¡å¼"><a href="#å¯¹æ¯”ä¸€ä¸‹å·¥å‚æ¨¡å¼" class="headerlink" title="å¯¹æ¯”ä¸€ä¸‹å·¥å‚æ¨¡å¼"></a>å¯¹æ¯”ä¸€ä¸‹å·¥å‚æ¨¡å¼</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Operation</span> <span class="variable">operate</span> <span class="operator">=</span> OperationFactory.createOperate(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">        <span class="type">double</span> <span class="variable">result</span> <span class="operator">=</span> operate.getResult(<span class="number">520</span>, <span class="number">1314</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å·¥å‚æ¨¡å¼éœ€è¦çŸ¥é“createOperateè¿™ä¸ªæ–¹æ³•ï¼Œè€Œç­–ç•¥+å·¥å‚æ¨¡å¼ï¼Œç›´æ¥åˆ©ç”¨ä¸Šä¸‹æ–‡æ„é€ å™¨ä¼ å…¥å‚æ•°ï¼Œç„¶åç›´æ¥è·å–å¯¹åº”çš„å®ç°å­ç±»ï¼Œç›´æ¥è°ƒç”¨æ–¹æ³•ï¼Œé™ä½äº†å®¢æˆ·ç«¯çš„ä½¿ç”¨éš¾åº¦ã€‚è°ƒç”¨èµ·æ¥æ›´æ–¹æ³•ï¼Œåé¢åƒé±¼çš®è®²çš„é€‚é…å™¨æ¨¡å¼ï¼Œé—¨é¢æ¨¡å¼ï¼Œå¤§è‡´éƒ½ç›¸åŒï¼Œä¸ºäº†ç®€å•è°ƒç”¨ï¼Œé™ä½è€¦åˆï¼Œæ‰©å±•æ€§æ›´å¼ºã€‚</p><h2 id="â­é¡¹ç›®å’Œä¸ªäººåšå®¢"><a href="#â­é¡¹ç›®å’Œä¸ªäººåšå®¢" class="headerlink" title="â­é¡¹ç›®å’Œä¸ªäººåšå®¢"></a>â­é¡¹ç›®å’Œä¸ªäººåšå®¢</h2><p><strong>é¡¹ç›®:</strong></p><p>é¡¹ç›®æ˜¯æ¯”è¾ƒè€å¥—çš„å›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼ŒSpringBoot+Vue2+ElementUI</p><p>å¥—ä¸ªçš®ï¼Œç›´æ¥æ”¹ä¸‹æ•°æ®åº“ï¼Œå® ç‰©ç®¡ç†ç³»ç»Ÿï¼Œè½¦è¾†ç®¡ç†ç³»ç»Ÿï¼Œç”œå“ç®¡ç†ç³»ç»Ÿï¼Œå…¨éƒ¨éƒ½ä¸€ä¸ªæ ·ã€‚</p><p>ä¸»è¦æ˜¯ç®¡ç†ç³»ç»Ÿçš„è¯ï¼Œåç«¯ç”¨ç»„ä»¶åº“æ¯”è¾ƒæ–¹ä¾¿,æˆ‘ç”¨çš„elementUI,æ¨èå¯ä»¥è¯•ä¸€è¯•Ant Design Vue,Vueä¹Ÿæ˜¯å¯ä»¥åˆ©ç”¨åç«¯swaggerç›´æ¥ç”Ÿæˆæ¥å£çš„ï¼Œå‰æè¦VUE3+TSå¯ä»¥ç©ã€‚</p><p>äº®ç‚¹å¯èƒ½æ˜¯:1.ç™»å½•æ‹¦æˆªå™¨(ä¹Ÿå¯ä»¥ç”¨AOPçš„åˆ‡é¢ç©)2.Token(å¯ä»¥å¢åŠ redis)3.Echartså¯ä»¥å±•ç¤ºå€Ÿé˜…é‡ï¼Œä½ ä¹Ÿå¯ä»¥å¢åŠ æ´»è·ƒç”¨æˆ·4.é‡Œé¢å†…ç½®çˆ¬è™«ï¼Œå¯ä»¥çˆ¬æ•°æ®5.swagger+knife4jæµ‹è¯•æ¥å£</p><p>å¯æ‰©å±•ç‚¹ï¼šå¯ä»¥å¢åŠ å›¾ä¹¦æ¨èï¼Œè¿›è¡Œå¤§æ•°æ®åˆ†æï¼Œè¿™ä¸ªåº”è¯¥æ˜¯ä¸éš¾çš„ï¼Œæˆ–è€…ä½ æ·»åŠ ES,ç„¶ååšä¸‹æœç´¢å¼•æ“çš„ä¼˜åŒ–ï¼Œè¿™ä¸ªä¹Ÿä¸éš¾ï¼ŒæŒ‰åç«¯æ•°æ®åº“è¡¨ï¼Œæ„å»ºä¸‹ç´¢å¼•å°±è¡Œï¼Œç„¶åä½ å¯ä»¥è®¾ç½®å®šæ—¶ä»»åŠ¡è¿›è¡Œæ•°æ®åº“å’ŒESåŒæ­¥ï¼Œæˆ–è€…ç›´æ¥logstashä¸­é—´ä»¶ä¼ è¾“ã€å¤„ç†æ•°æ®ä¹Ÿè¡Œï¼Œä½¿ç”¨æ’ä»¶æ¯”è¾ƒæ–¹ä¾¿ã€‚ä½ è¿˜é˜”ä»¥æ·»åŠ å›¾ä¹¦ç§’æ€ï¼Œç”¨ä¸ŠRabbitMQã€‚ä½†ä¸€åˆ‡æŠ€æœ¯å…¶å®æ˜¯ç”¨äºä¸šåŠ¡ï¼Œå…¶å®å•ä¸ªäººé¡¹ç›®å®Œå…¨ç”¨ä¸ç€æ¶ˆæ¯é˜Ÿåˆ—ï¼Œredisï¼Œå› ä¸ºæ¯«æ— å¹¶å‘é‡å¯è¨€ã€‚æ¯•è®¾åšå¾®æœåŠ¡å±å®æœ‰ç‚¹ç¦»è°±äº†ï¼Œå±äºæ˜¯åªæ˜¯ç”¨æŠ€æœ¯ï¼Œä½†æ˜¯å®é™…ä¸šåŠ¡å®Œå…¨ä¸è‡³äºç”¨ä¸Šï¼Œå»ºè®®è¿˜æ˜¯åšä¸ªå°è€Œç¾çš„é¡¹ç›®æˆ–è€…æ¯”è¾ƒæœ‰åˆ›æ–°ç‚¹çš„å’ŒGPTæ¥è½¨çš„é¡¹ç›®ï¼ŒæŠŠGPTå½“ä½œä¸€ä¸ªåå°æ¥å£æµ‹è¯•ã€‚</p><p>å°å»ºè®®ï¼šä¸ç”¨ç„¦è™‘chatGPT,åè€Œæ˜¯è¦å­¦ä¹ å¦‚ä½•å°†GPTå’Œå­¦ä¹ å’Œå·¥ä½œç»“åˆï¼Œä¼šä½¿ç”¨å¥½AIçš„äººï¼Œæ¯”ä¸ä¼šç”¨AIçš„äººæ·˜æ±°ç‡åº”è¯¥ä¼šå°å¾ˆå¤šï¼ˆä¸ªäººæƒ³æ³•)ã€‚</p><p><a href="https://abc.xiaobaitiao.club/#/login"><strong>é¡¹ç›®éƒ¨ç½²åœ°å€</strong></a></p><p>æ¬¢è¿åœ¨è¯»è€…ç•™è¨€ç»„ä»¶è¿›è¡Œç•™è¨€ï¼ˆé‡‡ç”¨çš„æ˜¯ç§»åŠ¨å¼¹å¹•å½¢å¼)</p><p><a href="https://github.com/luoye6/Vue_BookManageSystem_backend"><strong>é¡¹ç›®GitHubåœ°å€</strong></a></p><p><a href="https://gitee.com/falle22222n-leaves/vue_-book-manage-system_backend"><strong>é¡¹ç›®Giteeåœ°å€</strong></a></p><p>æ¬¢è¿â­Starå’Œâ­äº’å…³ï¼Œæœ‰é—®é¢˜å¯ä»¥ç§ä¿¡æˆ‘å’¯</p><p><a href="https://luoye6.github.io/"><strong>ä¸ªäººåšå®¢åœ°å€</strong></a></p>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2023å¹´ä¸ŠåŠå¹´å­¦ä¹ è§„åˆ’</title>
      <link href="/2023/03/11/2023%E5%B9%B4%E4%B8%8A%E5%8D%8A%E5%B9%B4%E5%AD%A6%E4%B9%A0%E8%A7%84%E5%88%92/"/>
      <url>/2023/03/11/2023%E5%B9%B4%E4%B8%8A%E5%8D%8A%E5%B9%B4%E5%AD%A6%E4%B9%A0%E8%A7%84%E5%88%92/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="2023å¹´ä¸ŠåŠå¹´å­¦ä¹ è§„åˆ’"><a href="#2023å¹´ä¸ŠåŠå¹´å­¦ä¹ è§„åˆ’" class="headerlink" title="2023å¹´ä¸ŠåŠå¹´å­¦ä¹ è§„åˆ’"></a>2023å¹´ä¸ŠåŠå¹´å­¦ä¹ è§„åˆ’</h2><h3 id="1-å·²å­¦æŠ€æœ¯æ ˆå’Œè·å¥–æƒ…å†µ"><a href="#1-å·²å­¦æŠ€æœ¯æ ˆå’Œè·å¥–æƒ…å†µ" class="headerlink" title="1.å·²å­¦æŠ€æœ¯æ ˆå’Œè·å¥–æƒ…å†µ"></a>1.å·²å­¦æŠ€æœ¯æ ˆå’Œè·å¥–æƒ…å†µ</h3><p>ç›®å‰å¤§äºŒä¸‹å­¦æœŸï¼Œæˆ‘æ˜¯ä»å¤§ä¸€ä¸‹å­¦æœŸå¼€å§‹å­¦ä¹ Java,ä¸ŠåŠå­¦æœŸå­¦äº†Cè¯­è¨€ï¼Œç„¶åå»Cè¯­è¨€ç½‘åˆ·äº†å¤§æ¦‚200-300é¢˜ï¼Œç„¶åå¤§ä¸€ä¸Šç»©ç‚¹4.0+ã€‚å¤§ä¸€ä¸‹å­¦Javaï¼Œç„¶åçœ‹éŸ©è€å¸ˆçš„JavaSE900é›†ï¼ŒèŠ±äº†1ä¸ªåŠæœˆçš„æ—¶é—´ã€‚ç„¶åå¼€å§‹é™†ç»­æ”»å…‹SSMæ¡†æ¶ï¼ŒSpringBootæ¡†æ¶ç­‰ç­‰ã€‚</p><p><strong>æŠ€æœ¯æ ˆ:</strong></p><ul><li>å‰ç«¯: Vue2å’ŒVue3+TS,ç»„ä»¶åº“ElementUi,Ant Design Pro,Reactä¹Ÿå­¦ä¹ è¿‡ï¼Œå¤§å¤šæ•°éƒ½å¿˜äº†ï¼Œå› ä¸ºæ²¡åšè¿‡å®Œæ•´é¡¹ç›®ã€‚</li><li>åç«¯:SSM,SpringBoot,MP,SpringCloud</li><li>æ¶ˆæ¯é˜Ÿåˆ—: RabbitMq</li><li>æœç´¢å¼•æ“ï¼šES</li><li>éƒ¨ç½²: Docker å’Œ å®å¡” (Vercelå…¶æ¬¡)</li><li>ç¼“å­˜: Redis</li><li>æ•°æ®åº“ï¼šMySQL</li><li>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶: Git</li><li>åç«¯åŒ…ç®¡ç†: Maven</li><li>å‰ç«¯åŒ…ç®¡ç†: Npm,Yarn</li></ul><p><strong>è·å¥–æƒ…å†µ:</strong></p><ul><li>æ²¡å‚åŠ è¿‡æŒ‘æˆ˜è€…æ¯ï¼Œäº’è”ç½‘+ï¼Œæ„Ÿè§‰æ˜¯PPTå¤§èµ›ï¼Œè€Œä¸”æ²¡äººå¸¦ï¼Œæˆ‘å–œæ¬¢åšæŠ€æœ¯ï¼ŒåšPPTå’ŒWordå½“ä¸»è´Ÿè´£äººæ„Ÿè§‰ä¼šå¾ˆç´¯ã€‚</li><li>å››å…­çº§è€ƒè¿‡ è®¡ç®—æœºäºŒçº§ï¼ˆéšä¾¿è€ƒçš„)</li></ul><h3 id="2-å­¦ä¹ è®¡åˆ’"><a href="#2-å­¦ä¹ è®¡åˆ’" class="headerlink" title="2.å­¦ä¹ è®¡åˆ’"></a>2.å­¦ä¹ è®¡åˆ’</h3><ul><li>å¤‡è€ƒè½¯ä»¶ä¸­çº§(å¬è¯´ä¸éš¾ï¼Œåˆ·é¢˜å°±å®Œäº‹)</li><li>æ¯æ—¥ä¸€é“åŠ›æ‰£+å¤ä¹ åšè¿‡çš„é¢˜ç›®</li><li>æ“ä½œç³»ç»Ÿå’Œè®¡ç®—æœºç½‘ç»œ æ¯å¤©èŠ±1å°æ—¶çœ‹ä¸‹ï¼Œå¢åŠ ä¸‹çŸ¥è¯†çš„å¹¿åº¦ã€‚</li><li>å°†é±¼çš®çš„APIæ¥å£é¡¹ç›®å’Œèšåˆæœç´¢é¡¹ç›®åšå®Œï¼Œå› ä¸ºæˆ‘è‡ªå·±å·²ç»åˆ¶å®šå¥½äº†ç®€å†ï¼Œç„¶åæŒ‰ç®€å†å†™çš„å»å¤ä¹ å…«è‚¡æ–‡ä¹‹ç±»çš„ï¼Œåˆ°æ—¶å€™ç»“åˆé±¼çš®çš„ç‰›çš®é¡¹ç›®ç›´æ¥èµ·é£~</li><li>ç©ºé—²æ—¶é—´æ¯å¤©è·‘ä¸¤åœˆï¼Œç„¶åæ‹‰ä¸‹å¼•ä½“å‘ä¸Šï¼ˆ10+ï¼‰</li><li>å°†é‡å¿ƒä»ç»©ç‚¹è½¬ç§»åˆ°æŠ€æœ¯æ ˆä¸Šï¼Œå¤§ä¸€æ˜¯æ ¡äºŒç­‰å¥–ï¼Œè¯´å®è¯å¥–å­¦é‡‘ä¹Ÿå°±å›¾ä¸€ä¹ï¼Œè¿™å«é‡‘é‡&#x3D;â€¦..ï¼Œç»©ç‚¹æˆ‘ç°åœ¨ç¨³å®š3.7-3.8å·®ä¸å¤šï¼Œ4.0+å¤ªè€—è´¹æ—¶é—´äº†ï¼Œä¸å¦‚è½¬åˆ°æŠ€æœ¯æ ˆçš„æå‡ï¼Œæˆ–è€…å»å‚ä¸å…¶ä»–æ¯”èµ›ã€‚</li><li>æ¯å¤©å‡†å¤‡å…«è‚¡æ–‡å¤ä¹ 20é¢˜,å‡†å¤‡æš‘å‡å®ä¹ </li><li>åœ¨ä¸ªäººåšå®¢ä¸Šç»§ç»­æ›´æ–°ç¬”è®°</li><li>å¸®åŠ©æ˜Ÿçƒå°ä¼™ä¼´è§£ç­”é—®é¢˜</li><li>çœ‹Javaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯è¿™æœ¬ä¹¦ç±</li></ul><h3 id="3-é¡¹ç›®å’Œä¸ªäººåšå®¢"><a href="#3-é¡¹ç›®å’Œä¸ªäººåšå®¢" class="headerlink" title="3.é¡¹ç›®å’Œä¸ªäººåšå®¢"></a>3.é¡¹ç›®å’Œä¸ªäººåšå®¢</h3><p><strong>é¡¹ç›®:</strong></p><p>ä¸€æœˆä»½åˆ°2æœˆä»½å®Œæˆäº†ä¸ªäººè®¾è®¡çš„å›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼Œä»æ•°æ®åº“è¡¨è®¾è®¡ï¼Œç„¶åå‰ç«¯é¡µé¢ï¼Œåç«¯æ¥å£ï¼Œéƒ¨ç½²æœåŠ¡å™¨ï¼Œç”³è¯·SSLè¯ä¹¦ï¼Œæ­å»ºå›¾åºŠï¼Œç”±äºé±¼çš®å›¾åºŠæŒ‚äº†ï¼Œæˆ‘æŠŠé¡¹ç›®çš„å›¾ç‰‡å’Œä¸ªäººåšå®¢çš„å›¾ç‰‡ï¼Œæ”¾åœ¨æˆ‘è‡ªå·±çš„å›¾åºŠä¸Šäº†ï¼Œç„¶åè®¾ç½®äº†é˜²ç›—é“¾å’ŒCDNç¼“å­˜ã€‚</p><p><a href="https://abc.xiaobaitiao.club/#/login"><strong>é¡¹ç›®éƒ¨ç½²åœ°å€</strong></a></p><p>æ¬¢è¿åœ¨è¯»è€…ç•™è¨€ç»„ä»¶è¿›è¡Œç•™è¨€ï¼ˆé‡‡ç”¨çš„æ˜¯ç§»åŠ¨å¼¹å¹•å½¢å¼)</p><p><a href="https://github.com/luoye6/Vue_BookManageSystem_backend"><strong>é¡¹ç›®GitHubåœ°å€</strong></a></p><p><a href="https://gitee.com/falle22222n-leaves/vue_-book-manage-system_backend"><strong>é¡¹ç›®Giteeåœ°å€</strong></a></p><p>æ¬¢è¿â­Starå’Œâ­äº’å…³</p><p><a href="https://luoye6.github.io/"><strong>ä¸ªäººåšå®¢åœ°å€</strong></a></p>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -å­¦ä¹ è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rediså­¦ä¹ ç¬”è®°(2)</title>
      <link href="/2023/02/26/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(2)/"/>
      <url>/2023/02/26/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(2)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Rediså­¦ä¹ ç¬”è®°"><a href="#Rediså­¦ä¹ ç¬”è®°" class="headerlink" title="Rediså­¦ä¹ ç¬”è®°"></a>Rediså­¦ä¹ ç¬”è®°</h1><h2 id="â˜€ï¸1-Redisç¼“å­˜é—®é¢˜"><a href="#â˜€ï¸1-Redisç¼“å­˜é—®é¢˜" class="headerlink" title="â˜€ï¸1.Redisç¼“å­˜é—®é¢˜"></a>â˜€ï¸1.Redisç¼“å­˜é—®é¢˜</h2><ul><li>ä»€ä¹ˆæ˜¯ç¼“å­˜?</li></ul><p><strong>ç¼“å­˜(<strong>Cache),å°±æ˜¯æ•°æ®äº¤æ¢çš„</strong>ç¼“å†²åŒº</strong>,ä¿—ç§°çš„ç¼“å­˜å°±æ˜¯<strong>ç¼“å†²åŒºå†…çš„æ•°æ®</strong>,ä¸€èˆ¬ä»æ•°æ®åº“ä¸­è·å–,å­˜å‚¨äºæœ¬åœ°ä»£ç (ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ä¾‹<span class="number">1</span>:Static <span class="keyword">final</span> ConcurrentHashMap&lt;K,V&gt; map = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;(); æœ¬åœ°ç”¨äºé«˜å¹¶å‘</span><br><span class="line"></span><br><span class="line">ä¾‹<span class="number">2</span>:<span class="keyword">static</span> <span class="keyword">final</span> Cache&lt;K,V&gt; USER_CACHE = CacheBuilder.newBuilder().build(); ç”¨äºredisç­‰ç¼“å­˜</span><br><span class="line"></span><br><span class="line">ä¾‹<span class="number">3</span>:Static <span class="keyword">final</span> Map&lt;K,V&gt; map =  <span class="keyword">new</span> <span class="title class_">HashMap</span>(); æœ¬åœ°ç¼“å­˜</span><br></pre></td></tr></table></figure><p>ç”±äºå…¶è¢«<strong>Static</strong>ä¿®é¥°,æ‰€ä»¥éšç€ç±»çš„åŠ è½½è€Œè¢«åŠ è½½åˆ°<strong>å†…å­˜ä¹‹ä¸­</strong>,ä½œä¸ºæœ¬åœ°ç¼“å­˜,ç”±äºå…¶åˆè¢«<strong>final</strong>ä¿®é¥°,æ‰€ä»¥å…¶å¼•ç”¨(ä¾‹3:map)å’Œå¯¹è±¡(ä¾‹3:new HashMap())ä¹‹é—´çš„å…³ç³»æ˜¯å›ºå®šçš„,ä¸èƒ½æ”¹å˜,å› æ­¤ä¸ç”¨æ‹…å¿ƒèµ‹å€¼(&#x3D;)å¯¼è‡´ç¼“å­˜å¤±æ•ˆ;</p><ul><li>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç¼“å­˜?</li></ul><p>ä¸€å¥è¯:å› ä¸º<strong>é€Ÿåº¦å¿«,å¥½ç”¨</strong></p><p>ç¼“å­˜æ•°æ®å­˜å‚¨äºä»£ç ä¸­,è€Œä»£ç è¿è¡Œåœ¨å†…å­˜ä¸­,å†…å­˜çš„è¯»å†™æ€§èƒ½è¿œé«˜äºç£ç›˜,ç¼“å­˜å¯ä»¥å¤§å¤§é™ä½<strong>ç”¨æˆ·è®¿é—®å¹¶å‘é‡å¸¦æ¥çš„</strong>æœåŠ¡å™¨è¯»å†™å‹åŠ›</p><p>å®é™…å¼€å‘è¿‡ç¨‹ä¸­,ä¼ä¸šçš„æ•°æ®é‡,å°‘åˆ™å‡ åä¸‡,å¤šåˆ™å‡ åƒä¸‡,è¿™ä¹ˆå¤§æ•°æ®é‡,å¦‚æœæ²¡æœ‰ç¼“å­˜æ¥ä½œä¸ºâ€é¿éœ‡å™¨â€,ç³»ç»Ÿæ˜¯å‡ ä¹æ’‘ä¸ä½çš„,æ‰€ä»¥ä¼ä¸šä¼šå¤§é‡è¿ç”¨åˆ°ç¼“å­˜æŠ€æœ¯;</p><p>ä½†æ˜¯ç¼“å­˜ä¹Ÿä¼šå¢åŠ ä»£ç å¤æ‚åº¦å’Œè¿è¥çš„æˆæœ¬:</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226173948252.png" alt="image-20230226173948252"></p><ul><li>å¦‚ä½•ä½¿ç”¨ç¼“å­˜</li></ul><p>å®é™…å¼€å‘ä¸­,ä¼šæ„ç­‘å¤šçº§ç¼“å­˜æ¥ä½¿ç³»ç»Ÿè¿è¡Œé€Ÿåº¦è¿›ä¸€æ­¥æå‡,ä¾‹å¦‚:æœ¬åœ°ç¼“å­˜ä¸redisä¸­çš„ç¼“å­˜å¹¶å‘ä½¿ç”¨</p><p><strong>æµè§ˆå™¨ç¼“å­˜</strong>ï¼šä¸»è¦æ˜¯å­˜åœ¨äºæµè§ˆå™¨ç«¯çš„ç¼“å­˜</p><p><strong>åº”ç”¨å±‚ç¼“å­˜ï¼š</strong>å¯ä»¥åˆ†ä¸ºtomcatæœ¬åœ°ç¼“å­˜ï¼Œæ¯”å¦‚ä¹‹å‰æåˆ°çš„mapï¼Œæˆ–è€…æ˜¯ä½¿ç”¨redisä½œä¸ºç¼“å­˜</p><p><strong>æ•°æ®åº“ç¼“å­˜ï¼š</strong>åœ¨æ•°æ®åº“ä¸­æœ‰ä¸€ç‰‡ç©ºé—´æ˜¯ buffer poolï¼Œå¢æ”¹æŸ¥æ•°æ®éƒ½ä¼šå…ˆåŠ è½½åˆ°mysqlçš„ç¼“å­˜ä¸­</p><p><strong>CPUç¼“å­˜ï¼š</strong>å½“ä»£è®¡ç®—æœºæœ€å¤§çš„é—®é¢˜æ˜¯ cpuæ€§èƒ½æå‡äº†ï¼Œä½†å†…å­˜è¯»å†™é€Ÿåº¦æ²¡æœ‰è·Ÿä¸Šï¼Œæ‰€ä»¥ä¸ºäº†é€‚åº”å½“ä¸‹çš„æƒ…å†µï¼Œå¢åŠ äº†cpuçš„L1ï¼ŒL2ï¼ŒL3çº§çš„ç¼“å­˜</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226174004444.png" alt="image-20230226174004444"></p><h3 id="1-1ç¼“å­˜æ¨¡å‹å’Œæ€è·¯"><a href="#1-1ç¼“å­˜æ¨¡å‹å’Œæ€è·¯" class="headerlink" title="1.1ç¼“å­˜æ¨¡å‹å’Œæ€è·¯"></a>1.1ç¼“å­˜æ¨¡å‹å’Œæ€è·¯</h3><p>æ ‡å‡†çš„æ“ä½œæ–¹å¼å°±æ˜¯æŸ¥è¯¢æ•°æ®åº“ä¹‹å‰å…ˆæŸ¥è¯¢ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜æ•°æ®å­˜åœ¨ï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜ä¸­è¿”å›ï¼Œå¦‚æœç¼“å­˜æ•°æ®ä¸å­˜åœ¨ï¼Œå†æŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå°†æ•°æ®å­˜å…¥redisã€‚</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226174041131.png" alt="image-20230226174041131"></p><h3 id="1-2ä»£ç å®ä¾‹"><a href="#1-2ä»£ç å®ä¾‹" class="headerlink" title="1.2ä»£ç å®ä¾‹"></a>1.2ä»£ç å®ä¾‹</h3><p>ä»£ç æ€è·¯ï¼šå¦‚æœç¼“å­˜æœ‰ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œå¦‚æœç¼“å­˜ä¸å­˜åœ¨ï¼Œåˆ™æŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå­˜å…¥redisã€‚</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226174118730.png" alt="image-20230226174118730"></p><h3 id="1-3ç¼“å­˜æ›´æ–°ç­–ç•¥"><a href="#1-3ç¼“å­˜æ›´æ–°ç­–ç•¥" class="headerlink" title="1.3ç¼“å­˜æ›´æ–°ç­–ç•¥"></a>1.3ç¼“å­˜æ›´æ–°ç­–ç•¥</h3><p>ç¼“å­˜æ›´æ–°æ˜¯redisä¸ºäº†èŠ‚çº¦å†…å­˜è€Œè®¾è®¡å‡ºæ¥çš„ä¸€ä¸ªä¸œè¥¿ï¼Œä¸»è¦æ˜¯å› ä¸ºå†…å­˜æ•°æ®å®è´µï¼Œå½“æˆ‘ä»¬å‘redisæ’å…¥å¤ªå¤šæ•°æ®ï¼Œæ­¤æ—¶å°±å¯èƒ½ä¼šå¯¼è‡´ç¼“å­˜ä¸­çš„æ•°æ®è¿‡å¤šï¼Œæ‰€ä»¥redisä¼šå¯¹éƒ¨åˆ†æ•°æ®è¿›è¡Œæ›´æ–°ï¼Œæˆ–è€…æŠŠä»–å«ä¸ºæ·˜æ±°æ›´åˆé€‚ã€‚</p><p><strong>å†…å­˜æ·˜æ±°ï¼š</strong>redisè‡ªåŠ¨è¿›è¡Œï¼Œå½“rediså†…å­˜è¾¾åˆ°å’±ä»¬è®¾å®šçš„max-memeryçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è§¦å‘æ·˜æ±°æœºåˆ¶ï¼Œæ·˜æ±°æ‰ä¸€äº›ä¸é‡è¦çš„æ•°æ®(å¯ä»¥è‡ªå·±è®¾ç½®ç­–ç•¥æ–¹å¼)</p><p><strong>è¶…æ—¶å‰”é™¤ï¼š</strong>å½“æˆ‘ä»¬ç»™redisè®¾ç½®äº†è¿‡æœŸæ—¶é—´ttlä¹‹åï¼Œredisä¼šå°†è¶…æ—¶çš„æ•°æ®è¿›è¡Œåˆ é™¤ï¼Œæ–¹ä¾¿å’±ä»¬ç»§ç»­ä½¿ç”¨ç¼“å­˜</p><p><strong>ä¸»åŠ¨æ›´æ–°ï¼š</strong>æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è°ƒç”¨æ–¹æ³•æŠŠç¼“å­˜åˆ æ‰ï¼Œé€šå¸¸ç”¨äºè§£å†³ç¼“å­˜å’Œæ•°æ®åº“ä¸ä¸€è‡´é—®é¢˜</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226174312846.png" alt="image-20230226174312846"></p><h3 id="1-4æ•°æ®åº“ç¼“å­˜ä¸ä¸€è‡´è§£å†³æ–¹æ¡ˆ"><a href="#1-4æ•°æ®åº“ç¼“å­˜ä¸ä¸€è‡´è§£å†³æ–¹æ¡ˆ" class="headerlink" title="1.4æ•°æ®åº“ç¼“å­˜ä¸ä¸€è‡´è§£å†³æ–¹æ¡ˆ"></a>1.4æ•°æ®åº“ç¼“å­˜ä¸ä¸€è‡´è§£å†³æ–¹æ¡ˆ</h3><p>ç”±äºæˆ‘ä»¬çš„<strong>ç¼“å­˜çš„æ•°æ®æºæ¥è‡ªäºæ•°æ®åº“</strong>,è€Œæ•°æ®åº“çš„<strong>æ•°æ®æ˜¯ä¼šå‘ç”Ÿå˜åŒ–çš„</strong>,å› æ­¤,å¦‚æœå½“æ•°æ®åº“ä¸­<strong>æ•°æ®å‘ç”Ÿå˜åŒ–,è€Œç¼“å­˜å´æ²¡æœ‰åŒæ­¥</strong>,æ­¤æ—¶å°±ä¼šæœ‰<strong>ä¸€è‡´æ€§é—®é¢˜å­˜åœ¨</strong>,å…¶åæœæ˜¯:</p><p>ç”¨æˆ·ä½¿ç”¨ç¼“å­˜ä¸­çš„è¿‡æ—¶æ•°æ®,å°±ä¼šäº§ç”Ÿç±»ä¼¼å¤šçº¿ç¨‹æ•°æ®å®‰å…¨é—®é¢˜,ä»è€Œå½±å“ä¸šåŠ¡,äº§å“å£ç¢‘ç­‰;æ€ä¹ˆè§£å†³å‘¢ï¼Ÿæœ‰å¦‚ä¸‹å‡ ç§æ–¹æ¡ˆ</p><p>Cache Aside Pattern äººå·¥ç¼–ç æ–¹å¼ï¼šç¼“å­˜è°ƒç”¨è€…åœ¨æ›´æ–°å®Œæ•°æ®åº“åå†å»æ›´æ–°ç¼“å­˜ï¼Œä¹Ÿç§°ä¹‹ä¸ºåŒå†™æ–¹æ¡ˆ</p><p>Read&#x2F;Write Through Pattern : ç”±ç³»ç»Ÿæœ¬èº«å®Œæˆï¼Œæ•°æ®åº“ä¸ç¼“å­˜çš„é—®é¢˜äº¤ç”±ç³»ç»Ÿæœ¬èº«å»å¤„ç†</p><p>Write Behind Caching Pattern ï¼šè°ƒç”¨è€…åªæ“ä½œç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹å»å¼‚æ­¥å¤„ç†æ•°æ®åº“ï¼Œå®ç°æœ€ç»ˆä¸€è‡´</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226174349445.png" alt="image-20230226174349445"></p><p>ç»¼åˆè€ƒè™‘ä½¿ç”¨æ–¹æ¡ˆä¸€ï¼Œä½†æ˜¯æ–¹æ¡ˆä¸€è°ƒç”¨è€…å¦‚ä½•å¤„ç†å‘¢ï¼Ÿè¿™é‡Œæœ‰å‡ ä¸ªé—®é¢˜</p><p>æ“ä½œç¼“å­˜å’Œæ•°æ®åº“æ—¶æœ‰ä¸‰ä¸ªé—®é¢˜éœ€è¦è€ƒè™‘ï¼š</p><p>å¦‚æœé‡‡ç”¨ç¬¬ä¸€ä¸ªæ–¹æ¡ˆï¼Œé‚£ä¹ˆå‡è®¾æˆ‘ä»¬æ¯æ¬¡æ“ä½œæ•°æ®åº“åï¼Œéƒ½æ“ä½œç¼“å­˜ï¼Œä½†æ˜¯ä¸­é—´å¦‚æœæ²¡æœ‰äººæŸ¥è¯¢ï¼Œé‚£ä¹ˆè¿™ä¸ªæ›´æ–°åŠ¨ä½œå®é™…ä¸Šåªæœ‰æœ€åä¸€æ¬¡ç”Ÿæ•ˆï¼Œä¸­é—´çš„æ›´æ–°åŠ¨ä½œæ„ä¹‰å¹¶ä¸å¤§ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç¼“å­˜åˆ é™¤ï¼Œç­‰å¾…å†æ¬¡æŸ¥è¯¢æ—¶ï¼Œå°†ç¼“å­˜ä¸­çš„æ•°æ®åŠ è½½å‡ºæ¥</p><ul><li><p>åˆ é™¤ç¼“å­˜è¿˜æ˜¯æ›´æ–°ç¼“å­˜ï¼Ÿ</p><ul><li>æ›´æ–°ç¼“å­˜ï¼šæ¯æ¬¡æ›´æ–°æ•°æ®åº“éƒ½æ›´æ–°ç¼“å­˜ï¼Œæ— æ•ˆå†™æ“ä½œè¾ƒå¤š</li><li>åˆ é™¤ç¼“å­˜ï¼šæ›´æ–°æ•°æ®åº“æ—¶è®©ç¼“å­˜å¤±æ•ˆï¼ŒæŸ¥è¯¢æ—¶å†æ›´æ–°ç¼“å­˜</li></ul></li><li><p>å¦‚ä½•ä¿è¯ç¼“å­˜ä¸æ•°æ®åº“çš„æ“ä½œçš„åŒæ—¶æˆåŠŸæˆ–å¤±è´¥ï¼Ÿ</p><ul><li>å•ä½“ç³»ç»Ÿï¼Œå°†ç¼“å­˜ä¸æ•°æ®åº“æ“ä½œæ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡</li><li>åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œåˆ©ç”¨TCCç­‰åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆ</li></ul></li></ul><p>åº”è¯¥å…·ä½“æ“ä½œç¼“å­˜è¿˜æ˜¯æ“ä½œæ•°æ®åº“ï¼Œæˆ‘ä»¬åº”å½“æ˜¯å…ˆæ“ä½œæ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ï¼ŒåŸå› åœ¨äºï¼Œå¦‚æœä½ é€‰æ‹©ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œåœ¨ä¸¤ä¸ªçº¿ç¨‹å¹¶å‘æ¥è®¿é—®æ—¶ï¼Œå‡è®¾çº¿ç¨‹1å…ˆæ¥ï¼Œä»–å…ˆæŠŠç¼“å­˜åˆ äº†ï¼Œæ­¤æ—¶çº¿ç¨‹2è¿‡æ¥ï¼Œä»–æŸ¥è¯¢ç¼“å­˜æ•°æ®å¹¶ä¸å­˜åœ¨ï¼Œæ­¤æ—¶ä»–å†™å…¥ç¼“å­˜ï¼Œå½“ä»–å†™å…¥ç¼“å­˜åï¼Œçº¿ç¨‹1å†æ‰§è¡Œæ›´æ–°åŠ¨ä½œæ—¶ï¼Œå®é™…ä¸Šå†™å…¥çš„å°±æ˜¯æ—§çš„æ•°æ®ï¼Œæ–°çš„æ•°æ®è¢«æ—§æ•°æ®è¦†ç›–äº†ã€‚</p><ul><li>å…ˆæ“ä½œç¼“å­˜è¿˜æ˜¯å…ˆæ“ä½œæ•°æ®åº“ï¼Ÿ<ul><li>å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ“ä½œæ•°æ®åº“</li><li>å…ˆæ“ä½œæ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜</li></ul></li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226174408841.png" alt="image-20230226174408841"></p><h3 id="1-5å®ç°ç¼“å­˜å’Œæ•°æ®åº“åŒå†™ä¸€è‡´"><a href="#1-5å®ç°ç¼“å­˜å’Œæ•°æ®åº“åŒå†™ä¸€è‡´" class="headerlink" title="1.5å®ç°ç¼“å­˜å’Œæ•°æ®åº“åŒå†™ä¸€è‡´"></a>1.5å®ç°ç¼“å­˜å’Œæ•°æ®åº“åŒå†™ä¸€è‡´</h3><p>æ ¸å¿ƒæ€è·¯å¦‚ä¸‹ï¼š</p><p>ä¿®æ”¹ShopControllerä¸­çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ»¡è¶³ä¸‹é¢çš„éœ€æ±‚ï¼š</p><p>æ ¹æ®idæŸ¥è¯¢åº—é“ºæ—¶ï¼Œå¦‚æœç¼“å­˜æœªå‘½ä¸­ï¼Œåˆ™æŸ¥è¯¢æ•°æ®åº“ï¼Œå°†æ•°æ®åº“ç»“æœå†™å…¥ç¼“å­˜ï¼Œå¹¶è®¾ç½®è¶…æ—¶æ—¶é—´</p><p>æ ¹æ®idä¿®æ”¹åº—é“ºæ—¶ï¼Œå…ˆä¿®æ”¹æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜</p><p><strong>ä¿®æ”¹é‡ç‚¹ä»£ç 1</strong>ï¼šä¿®æ”¹<strong>ShopServiceImpl</strong>çš„queryByIdæ–¹æ³•</p><p><strong>è®¾ç½®redisç¼“å­˜æ—¶æ·»åŠ è¿‡æœŸæ—¶é—´</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226174558355.png" alt="image-20230226174558355"></p><p><strong>ä¿®æ”¹é‡ç‚¹ä»£ç 2</strong></p><p>ä»£ç åˆ†æï¼šé€šè¿‡ä¹‹å‰çš„æ·˜æ±°ï¼Œæˆ‘ä»¬ç¡®å®šäº†é‡‡ç”¨åˆ é™¤ç­–ç•¥ï¼Œæ¥è§£å†³åŒå†™é—®é¢˜ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹äº†æ•°æ®ä¹‹åï¼Œç„¶åæŠŠç¼“å­˜ä¸­çš„æ•°æ®è¿›è¡Œåˆ é™¤ï¼ŒæŸ¥è¯¢æ—¶å‘ç°ç¼“å­˜ä¸­æ²¡æœ‰æ•°æ®ï¼Œåˆ™ä¼šä»mysqlä¸­åŠ è½½æœ€æ–°çš„æ•°æ®ï¼Œä»è€Œé¿å…æ•°æ®åº“å’Œç¼“å­˜ä¸ä¸€è‡´çš„é—®é¢˜</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226174611540.png" alt="image-20230226174611540"></p><h3 id="1-6ç¼“å­˜ç©¿é€é—®é¢˜çš„è§£å†³æ€è·¯"><a href="#1-6ç¼“å­˜ç©¿é€é—®é¢˜çš„è§£å†³æ€è·¯" class="headerlink" title="1.6ç¼“å­˜ç©¿é€é—®é¢˜çš„è§£å†³æ€è·¯"></a>1.6ç¼“å­˜ç©¿é€é—®é¢˜çš„è§£å†³æ€è·¯</h3><p>ç¼“å­˜ç©¿é€ ï¼šç¼“å­˜ç©¿é€æ˜¯æŒ‡å®¢æˆ·ç«¯è¯·æ±‚çš„æ•°æ®åœ¨ç¼“å­˜ä¸­å’Œæ•°æ®åº“ä¸­éƒ½ä¸å­˜åœ¨ï¼Œè¿™æ ·ç¼“å­˜æ°¸è¿œä¸ä¼šç”Ÿæ•ˆï¼Œè¿™äº›è¯·æ±‚éƒ½ä¼šæ‰“åˆ°æ•°æ®åº“ã€‚</p><p>å¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š</p><ul><li>ç¼“å­˜ç©ºå¯¹è±¡<ul><li>ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œç»´æŠ¤æ–¹ä¾¿</li><li>ç¼ºç‚¹ï¼š<ul><li>é¢å¤–çš„å†…å­˜æ¶ˆè€—</li><li>å¯èƒ½é€ æˆçŸ­æœŸçš„ä¸ä¸€è‡´</li></ul></li></ul></li><li>å¸ƒéš†è¿‡æ»¤<ul><li>ä¼˜ç‚¹ï¼šå†…å­˜å ç”¨è¾ƒå°‘ï¼Œæ²¡æœ‰å¤šä½™key</li><li>ç¼ºç‚¹ï¼š<ul><li>å®ç°å¤æ‚</li><li>å­˜åœ¨è¯¯åˆ¤å¯èƒ½</li></ul></li></ul></li></ul><p><strong>ç¼“å­˜ç©ºå¯¹è±¡æ€è·¯åˆ†æï¼š</strong>å½“æˆ‘ä»¬å®¢æˆ·ç«¯è®¿é—®ä¸å­˜åœ¨çš„æ•°æ®æ—¶ï¼Œå…ˆè¯·æ±‚redisï¼Œä½†æ˜¯æ­¤æ—¶redisä¸­æ²¡æœ‰æ•°æ®ï¼Œæ­¤æ—¶ä¼šè®¿é—®åˆ°æ•°æ®åº“ï¼Œä½†æ˜¯æ•°æ®åº“ä¸­ä¹Ÿæ²¡æœ‰æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®ç©¿é€äº†ç¼“å­˜ï¼Œç›´å‡»æ•°æ®åº“ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“æ•°æ®åº“èƒ½å¤Ÿæ‰¿è½½çš„å¹¶å‘ä¸å¦‚redisè¿™ä¹ˆé«˜ï¼Œå¦‚æœå¤§é‡çš„è¯·æ±‚åŒæ—¶è¿‡æ¥è®¿é—®è¿™ç§ä¸å­˜åœ¨çš„æ•°æ®ï¼Œè¿™äº›è¯·æ±‚å°±éƒ½ä¼šè®¿é—®åˆ°æ•°æ®åº“ï¼Œç®€å•çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯å“ªæ€•è¿™ä¸ªæ•°æ®åœ¨æ•°æ®åº“ä¸­ä¹Ÿä¸å­˜åœ¨ï¼Œæˆ‘ä»¬ä¹ŸæŠŠè¿™ä¸ªæ•°æ®å­˜å…¥åˆ°redisä¸­å»ï¼Œè¿™æ ·ï¼Œä¸‹æ¬¡ç”¨æˆ·è¿‡æ¥è®¿é—®è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®ï¼Œé‚£ä¹ˆåœ¨redisä¸­ä¹Ÿèƒ½æ‰¾åˆ°è¿™ä¸ªæ•°æ®å°±ä¸ä¼šè¿›å…¥åˆ°ç¼“å­˜äº†</p><p><strong>å¸ƒéš†è¿‡æ»¤ï¼š</strong>å¸ƒéš†è¿‡æ»¤å™¨å…¶å®é‡‡ç”¨çš„æ˜¯å“ˆå¸Œæ€æƒ³æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé€šè¿‡ä¸€ä¸ªåºå¤§çš„äºŒè¿›åˆ¶æ•°ç»„ï¼Œèµ°å“ˆå¸Œæ€æƒ³å»åˆ¤æ–­å½“å‰è¿™ä¸ªè¦æŸ¥è¯¢çš„è¿™ä¸ªæ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­å­˜åœ¨ï¼Œåˆ™æ”¾è¡Œï¼Œè¿™ä¸ªè¯·æ±‚ä¼šå»è®¿é—®redisï¼Œå“ªæ€•æ­¤æ—¶redisä¸­çš„æ•°æ®è¿‡æœŸäº†ï¼Œä½†æ˜¯æ•°æ®åº“ä¸­ä¸€å®šå­˜åœ¨è¿™ä¸ªæ•°æ®ï¼Œåœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæ¥è¿™ä¸ªæ•°æ®åï¼Œå†å°†å…¶æ”¾å…¥åˆ°redisä¸­ï¼Œ</p><p>å‡è®¾å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­è¿™ä¸ªæ•°æ®ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›</p><p>è¿™ç§æ–¹å¼ä¼˜ç‚¹åœ¨äºèŠ‚çº¦å†…å­˜ç©ºé—´ï¼Œå­˜åœ¨è¯¯åˆ¤ï¼Œè¯¯åˆ¤åŸå› åœ¨äºï¼šå¸ƒéš†è¿‡æ»¤å™¨èµ°çš„æ˜¯å“ˆå¸Œæ€æƒ³ï¼Œåªè¦å“ˆå¸Œæ€æƒ³ï¼Œå°±å¯èƒ½å­˜åœ¨å“ˆå¸Œå†²çª</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226174735571.png" alt="image-20230226174735571"></p><h4 id="1-6-1ä»£ç è§£å†³å•†å“æŸ¥è¯¢çš„ç¼“å­˜ç©¿é€é—®é¢˜"><a href="#1-6-1ä»£ç è§£å†³å•†å“æŸ¥è¯¢çš„ç¼“å­˜ç©¿é€é—®é¢˜" class="headerlink" title="1.6.1ä»£ç è§£å†³å•†å“æŸ¥è¯¢çš„ç¼“å­˜ç©¿é€é—®é¢˜"></a>1.6.1ä»£ç è§£å†³å•†å“æŸ¥è¯¢çš„ç¼“å­˜ç©¿é€é—®é¢˜</h4><p>æ ¸å¿ƒæ€è·¯å¦‚ä¸‹ï¼š</p><p>åœ¨åŸæ¥çš„é€»è¾‘ä¸­ï¼Œæˆ‘ä»¬å¦‚æœå‘ç°è¿™ä¸ªæ•°æ®åœ¨mysqlä¸­ä¸å­˜åœ¨ï¼Œç›´æ¥å°±è¿”å›404äº†ï¼Œè¿™æ ·æ˜¯ä¼šå­˜åœ¨ç¼“å­˜ç©¿é€é—®é¢˜çš„</p><p>ç°åœ¨çš„é€»è¾‘ä¸­ï¼šå¦‚æœè¿™ä¸ªæ•°æ®ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬ä¸ä¼šè¿”å›404 ï¼Œè¿˜æ˜¯ä¼šæŠŠè¿™ä¸ªæ•°æ®å†™å…¥åˆ°Redisä¸­ï¼Œå¹¶ä¸”å°†valueè®¾ç½®ä¸ºç©ºï¼Œæ¬§å½“å†æ¬¡å‘èµ·æŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬å¦‚æœå‘ç°å‘½ä¸­ä¹‹åï¼Œåˆ¤æ–­è¿™ä¸ªvalueæ˜¯å¦æ˜¯nullï¼Œå¦‚æœæ˜¯nullï¼Œåˆ™æ˜¯ä¹‹å‰å†™å…¥çš„æ•°æ®ï¼Œè¯æ˜æ˜¯ç¼“å­˜ç©¿é€æ•°æ®ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ç›´æ¥è¿”å›æ•°æ®ã€‚</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226174814985.png" alt="image-20230226174814985"></p><p><strong>å°æ€»ç»“ï¼š</strong></p><p>ç¼“å­˜ç©¿é€äº§ç”Ÿçš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>ç”¨æˆ·è¯·æ±‚çš„æ•°æ®åœ¨ç¼“å­˜ä¸­å’Œæ•°æ®åº“ä¸­éƒ½ä¸å­˜åœ¨ï¼Œä¸æ–­å‘èµ·è¿™æ ·çš„è¯·æ±‚ï¼Œç»™æ•°æ®åº“å¸¦æ¥å·¨å¤§å‹åŠ›</li></ul><p>ç¼“å­˜ç©¿é€çš„è§£å†³æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ</p><ul><li>ç¼“å­˜nullå€¼</li><li>å¸ƒéš†è¿‡æ»¤</li><li>å¢å¼ºidçš„å¤æ‚åº¦ï¼Œé¿å…è¢«çŒœæµ‹idè§„å¾‹</li><li>åšå¥½æ•°æ®çš„åŸºç¡€æ ¼å¼æ ¡éªŒ</li><li>åŠ å¼ºç”¨æˆ·æƒé™æ ¡éªŒ</li><li>åšå¥½çƒ­ç‚¹å‚æ•°çš„é™æµ</li></ul><h3 id="1-7ç¼“å­˜é›ªå´©é—®é¢˜å’Œè§£å†³æ€è·¯"><a href="#1-7ç¼“å­˜é›ªå´©é—®é¢˜å’Œè§£å†³æ€è·¯" class="headerlink" title="1.7ç¼“å­˜é›ªå´©é—®é¢˜å’Œè§£å†³æ€è·¯"></a>1.7ç¼“å­˜é›ªå´©é—®é¢˜å’Œè§£å†³æ€è·¯</h3><p>ç¼“å­˜é›ªå´©æ˜¯æŒ‡åœ¨åŒä¸€æ—¶æ®µå¤§é‡çš„ç¼“å­˜keyåŒæ—¶å¤±æ•ˆæˆ–è€…RedisæœåŠ¡å®•æœºï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚åˆ°è¾¾æ•°æ®åº“ï¼Œå¸¦æ¥å·¨å¤§å‹åŠ›ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>ç»™ä¸åŒçš„Keyçš„TTLæ·»åŠ éšæœºå€¼</li><li>åˆ©ç”¨Redisé›†ç¾¤æé«˜æœåŠ¡çš„å¯ç”¨æ€§</li><li>ç»™ç¼“å­˜ä¸šåŠ¡æ·»åŠ é™çº§é™æµç­–ç•¥</li><li>ç»™ä¸šåŠ¡æ·»åŠ å¤šçº§ç¼“å­˜</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226183230453.png" alt="image-20230226183230453"></p><h3 id="1-8ç¼“å­˜å‡»ç©¿é—®é¢˜å’Œè§£å†³æ€è·¯"><a href="#1-8ç¼“å­˜å‡»ç©¿é—®é¢˜å’Œè§£å†³æ€è·¯" class="headerlink" title="1.8ç¼“å­˜å‡»ç©¿é—®é¢˜å’Œè§£å†³æ€è·¯"></a>1.8ç¼“å­˜å‡»ç©¿é—®é¢˜å’Œè§£å†³æ€è·¯</h3><p>ç¼“å­˜å‡»ç©¿é—®é¢˜ä¹Ÿå«çƒ­ç‚¹Keyé—®é¢˜ï¼Œå°±æ˜¯ä¸€ä¸ªè¢«é«˜å¹¶å‘è®¿é—®å¹¶ä¸”ç¼“å­˜é‡å»ºä¸šåŠ¡è¾ƒå¤æ‚çš„keyçªç„¶å¤±æ•ˆäº†ï¼Œæ— æ•°çš„è¯·æ±‚è®¿é—®ä¼šåœ¨ç¬é—´ç»™æ•°æ®åº“å¸¦æ¥å·¨å¤§çš„å†²å‡»ã€‚</p><p>å¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š</p><ul><li>äº’æ–¥é”</li><li>é€»è¾‘è¿‡æœŸ</li></ul><p>é€»è¾‘åˆ†æï¼šå‡è®¾çº¿ç¨‹1åœ¨æŸ¥è¯¢ç¼“å­˜ä¹‹åï¼Œæœ¬æ¥åº”è¯¥å»æŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åæŠŠè¿™ä¸ªæ•°æ®é‡æ–°åŠ è½½åˆ°ç¼“å­˜çš„ï¼Œæ­¤æ—¶åªè¦çº¿ç¨‹1èµ°å®Œè¿™ä¸ªé€»è¾‘ï¼Œå…¶ä»–çº¿ç¨‹å°±éƒ½èƒ½ä»ç¼“å­˜ä¸­åŠ è½½è¿™äº›æ•°æ®äº†ï¼Œä½†æ˜¯å‡è®¾åœ¨çº¿ç¨‹1æ²¡æœ‰èµ°å®Œçš„æ—¶å€™ï¼Œåç»­çš„çº¿ç¨‹2ï¼Œçº¿ç¨‹3ï¼Œçº¿ç¨‹4åŒæ—¶è¿‡æ¥è®¿é—®å½“å‰è¿™ä¸ªæ–¹æ³•ï¼Œ é‚£ä¹ˆè¿™äº›çº¿ç¨‹éƒ½ä¸èƒ½ä»ç¼“å­˜ä¸­æŸ¥è¯¢åˆ°æ•°æ®ï¼Œé‚£ä¹ˆä»–ä»¬å°±ä¼šåŒä¸€æ—¶åˆ»æ¥è®¿é—®æŸ¥è¯¢ç¼“å­˜ï¼Œéƒ½æ²¡æŸ¥åˆ°ï¼Œæ¥ç€åŒä¸€æ—¶é—´å»è®¿é—®æ•°æ®åº“ï¼ŒåŒæ—¶çš„å»æ‰§è¡Œæ•°æ®åº“ä»£ç ï¼Œå¯¹æ•°æ®åº“è®¿é—®å‹åŠ›è¿‡å¤§</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226183258869.png" alt="image-20230226183258869"></p><p>è§£å†³æ–¹æ¡ˆä¸€ã€ä½¿ç”¨é”æ¥è§£å†³ï¼š</p><p>å› ä¸ºé”èƒ½å®ç°äº’æ–¥æ€§ã€‚å‡è®¾çº¿ç¨‹è¿‡æ¥ï¼Œåªèƒ½ä¸€ä¸ªäººä¸€ä¸ªäººçš„æ¥è®¿é—®æ•°æ®åº“ï¼Œä»è€Œé¿å…å¯¹äºæ•°æ®åº“è®¿é—®å‹åŠ›è¿‡å¤§ï¼Œä½†è¿™ä¹Ÿä¼šå½±å“æŸ¥è¯¢çš„æ€§èƒ½ï¼Œå› ä¸ºæ­¤æ—¶ä¼šè®©æŸ¥è¯¢çš„æ€§èƒ½ä»å¹¶è¡Œå˜æˆäº†ä¸²è¡Œï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨tryLockæ–¹æ³• + double checkæ¥è§£å†³è¿™æ ·çš„é—®é¢˜ã€‚</p><p>å‡è®¾ç°åœ¨çº¿ç¨‹1è¿‡æ¥è®¿é—®ï¼Œä»–æŸ¥è¯¢ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œä½†æ˜¯æ­¤æ—¶ä»–è·å¾—åˆ°äº†é”çš„èµ„æºï¼Œé‚£ä¹ˆçº¿ç¨‹1å°±ä¼šä¸€ä¸ªäººå»æ‰§è¡Œé€»è¾‘ï¼Œå‡è®¾ç°åœ¨çº¿ç¨‹2è¿‡æ¥ï¼Œçº¿ç¨‹2åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¹¶æ²¡æœ‰è·å¾—åˆ°é”ï¼Œé‚£ä¹ˆçº¿ç¨‹2å°±å¯ä»¥è¿›è¡Œåˆ°ä¼‘çœ ï¼Œç›´åˆ°çº¿ç¨‹1æŠŠé”é‡Šæ”¾åï¼Œçº¿ç¨‹2è·å¾—åˆ°é”ï¼Œç„¶åå†æ¥æ‰§è¡Œé€»è¾‘ï¼Œæ­¤æ—¶å°±èƒ½å¤Ÿä»ç¼“å­˜ä¸­æ‹¿åˆ°æ•°æ®äº†ã€‚</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226183314848.png" alt="image-20230226183314848"></p><p>è§£å†³æ–¹æ¡ˆäºŒã€é€»è¾‘è¿‡æœŸæ–¹æ¡ˆ</p><p>æ–¹æ¡ˆåˆ†æï¼šæˆ‘ä»¬ä¹‹æ‰€ä»¥ä¼šå‡ºç°è¿™ä¸ªç¼“å­˜å‡»ç©¿é—®é¢˜ï¼Œä¸»è¦åŸå› æ˜¯åœ¨äºæˆ‘ä»¬å¯¹keyè®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œå‡è®¾æˆ‘ä»¬ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå…¶å®å°±ä¸ä¼šæœ‰ç¼“å­˜å‡»ç©¿çš„é—®é¢˜ï¼Œä½†æ˜¯ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿™æ ·æ•°æ®ä¸å°±ä¸€ç›´å ç”¨æˆ‘ä»¬å†…å­˜äº†å—ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨é€»è¾‘è¿‡æœŸæ–¹æ¡ˆã€‚</p><p>æˆ‘ä»¬æŠŠè¿‡æœŸæ—¶é—´è®¾ç½®åœ¨ redisçš„valueä¸­ï¼Œæ³¨æ„ï¼šè¿™ä¸ªè¿‡æœŸæ—¶é—´å¹¶ä¸ä¼šç›´æ¥ä½œç”¨äºredisï¼Œè€Œæ˜¯æˆ‘ä»¬åç»­é€šè¿‡é€»è¾‘å»å¤„ç†ã€‚å‡è®¾çº¿ç¨‹1å»æŸ¥è¯¢ç¼“å­˜ï¼Œç„¶åä»valueä¸­åˆ¤æ–­å‡ºæ¥å½“å‰çš„æ•°æ®å·²ç»è¿‡æœŸäº†ï¼Œæ­¤æ—¶çº¿ç¨‹1å»è·å¾—äº’æ–¥é”ï¼Œé‚£ä¹ˆå…¶ä»–çº¿ç¨‹ä¼šè¿›è¡Œé˜»å¡ï¼Œè·å¾—äº†é”çš„çº¿ç¨‹ä»–ä¼šå¼€å¯ä¸€ä¸ª çº¿ç¨‹å»è¿›è¡Œ ä»¥å‰çš„é‡æ„æ•°æ®çš„é€»è¾‘ï¼Œç›´åˆ°æ–°å¼€çš„çº¿ç¨‹å®Œæˆè¿™ä¸ªé€»è¾‘åï¼Œæ‰é‡Šæ”¾é”ï¼Œ è€Œçº¿ç¨‹1ç›´æ¥è¿›è¡Œè¿”å›ï¼Œå‡è®¾ç°åœ¨çº¿ç¨‹3è¿‡æ¥è®¿é—®ï¼Œç”±äºçº¿ç¨‹çº¿ç¨‹2æŒæœ‰ç€é”ï¼Œæ‰€ä»¥çº¿ç¨‹3æ— æ³•è·å¾—é”ï¼Œçº¿ç¨‹3ä¹Ÿç›´æ¥è¿”å›æ•°æ®ï¼Œåªæœ‰ç­‰åˆ°æ–°å¼€çš„çº¿ç¨‹2æŠŠé‡å»ºæ•°æ®æ„å»ºå®Œåï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½èµ°è¿”å›æ­£ç¡®çš„æ•°æ®ã€‚</p><p>è¿™ç§æ–¹æ¡ˆå·§å¦™åœ¨äºï¼Œå¼‚æ­¥çš„æ„å»ºç¼“å­˜ï¼Œç¼ºç‚¹åœ¨äºåœ¨æ„å»ºå®Œç¼“å­˜ä¹‹å‰ï¼Œè¿”å›çš„éƒ½æ˜¯è„æ•°æ®ã€‚</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226183333051.png" alt="image-20230226183333051"></p><p>è¿›è¡Œå¯¹æ¯”</p><p><strong>äº’æ–¥é”æ–¹æ¡ˆï¼š</strong>ç”±äºä¿è¯äº†äº’æ–¥æ€§ï¼Œæ‰€ä»¥æ•°æ®ä¸€è‡´ï¼Œä¸”å®ç°ç®€å•ï¼Œå› ä¸ºä»…ä»…åªéœ€è¦åŠ ä¸€æŠŠé”è€Œå·²ï¼Œä¹Ÿæ²¡å…¶ä»–çš„äº‹æƒ…éœ€è¦æ“å¿ƒï¼Œæ‰€ä»¥æ²¡æœ‰é¢å¤–çš„å†…å­˜æ¶ˆè€—ï¼Œç¼ºç‚¹åœ¨äºæœ‰é”å°±æœ‰æ­»é”é—®é¢˜çš„å‘ç”Ÿï¼Œä¸”åªèƒ½ä¸²è¡Œæ‰§è¡Œæ€§èƒ½è‚¯å®šå—åˆ°å½±å“</p><p><strong>é€»è¾‘è¿‡æœŸæ–¹æ¡ˆï¼š</strong> çº¿ç¨‹è¯»å–è¿‡ç¨‹ä¸­ä¸éœ€è¦ç­‰å¾…ï¼Œæ€§èƒ½å¥½ï¼Œæœ‰ä¸€ä¸ªé¢å¤–çš„çº¿ç¨‹æŒæœ‰é”å»è¿›è¡Œé‡æ„æ•°æ®ï¼Œä½†æ˜¯åœ¨é‡æ„æ•°æ®å®Œæˆå‰ï¼Œå…¶ä»–çš„çº¿ç¨‹åªèƒ½è¿”å›ä¹‹å‰çš„æ•°æ®ï¼Œä¸”å®ç°èµ·æ¥éº»çƒ¦</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226183353846.png" alt="image-20230226183353846"></p><h3 id="1-9åˆ©ç”¨äº’æ–¥é”è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜"><a href="#1-9åˆ©ç”¨äº’æ–¥é”è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜" class="headerlink" title="1.9åˆ©ç”¨äº’æ–¥é”è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜"></a>1.9åˆ©ç”¨äº’æ–¥é”è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜</h3><p>æ ¸å¿ƒæ€è·¯ï¼šç›¸è¾ƒäºåŸæ¥ä»ç¼“å­˜ä¸­æŸ¥è¯¢ä¸åˆ°æ•°æ®åç›´æ¥æŸ¥è¯¢æ•°æ®åº“è€Œè¨€ï¼Œç°åœ¨çš„æ–¹æ¡ˆæ˜¯ è¿›è¡ŒæŸ¥è¯¢ä¹‹åï¼Œå¦‚æœä»ç¼“å­˜æ²¡æœ‰æŸ¥è¯¢åˆ°æ•°æ®ï¼Œåˆ™è¿›è¡Œäº’æ–¥é”çš„è·å–ï¼Œè·å–äº’æ–¥é”åï¼Œåˆ¤æ–­æ˜¯å¦è·å¾—åˆ°äº†é”ï¼Œå¦‚æœæ²¡æœ‰è·å¾—åˆ°ï¼Œåˆ™ä¼‘çœ ï¼Œè¿‡ä¸€ä¼šå†è¿›è¡Œå°è¯•ï¼Œç›´åˆ°è·å–åˆ°é”ä¸ºæ­¢ï¼Œæ‰èƒ½è¿›è¡ŒæŸ¥è¯¢</p><p>å¦‚æœè·å–åˆ°äº†é”çš„çº¿ç¨‹ï¼Œå†å»è¿›è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥è¯¢åå°†æ•°æ®å†™å…¥redisï¼Œå†é‡Šæ”¾é”ï¼Œè¿”å›æ•°æ®ï¼Œåˆ©ç”¨äº’æ–¥é”å°±èƒ½ä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œæ“ä½œæ•°æ®åº“çš„é€»è¾‘ï¼Œé˜²æ­¢ç¼“å­˜å‡»ç©¿</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226183422324.png" alt="image-20230226183422324"></p><p><strong>æ“ä½œé”çš„ä»£ç ï¼š</strong></p><p>æ ¸å¿ƒæ€è·¯å°±æ˜¯åˆ©ç”¨redisçš„setnxæ–¹æ³•æ¥è¡¨ç¤ºè·å–é”ï¼Œè¯¥æ–¹æ³•å«ä¹‰æ˜¯redisä¸­å¦‚æœæ²¡æœ‰è¿™ä¸ªkeyï¼Œåˆ™æ’å…¥æˆåŠŸï¼Œè¿”å›1ï¼Œåœ¨stringRedisTemplateä¸­è¿”å›trueï¼Œ  å¦‚æœæœ‰è¿™ä¸ªkeyåˆ™æ’å…¥å¤±è´¥ï¼Œåˆ™è¿”å›0ï¼Œåœ¨stringRedisTemplateè¿”å›falseï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡trueï¼Œæˆ–è€…æ˜¯falseï¼Œæ¥è¡¨ç¤ºæ˜¯å¦æœ‰çº¿ç¨‹æˆåŠŸæ’å…¥keyï¼ŒæˆåŠŸæ’å…¥çš„keyçš„çº¿ç¨‹æˆ‘ä»¬è®¤ä¸ºä»–å°±æ˜¯è·å¾—åˆ°é”çš„çº¿ç¨‹ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">tryLock</span><span class="params">(String key)</span> &#123;</span><br><span class="line">    <span class="type">Boolean</span> <span class="variable">flag</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().setIfAbsent(key, <span class="string">&quot;1&quot;</span>, <span class="number">10</span>, TimeUnit.SECONDS);</span><br><span class="line">    <span class="keyword">return</span> BooleanUtil.isTrue(flag);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">unlock</span><span class="params">(String key)</span> &#123;</span><br><span class="line">    stringRedisTemplate.delete(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ“ä½œä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Shop <span class="title function_">queryWithMutex</span><span class="params">(Long id)</span>  &#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> CACHE_SHOP_KEY + id;</span><br><span class="line">       <span class="comment">// 1ã€ä»redisä¸­æŸ¥è¯¢å•†é“ºç¼“å­˜</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">shopJson</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(<span class="string">&quot;key&quot;</span>);</span><br><span class="line">       <span class="comment">// 2ã€åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">       <span class="keyword">if</span> (StrUtil.isNotBlank(shopJson)) &#123;</span><br><span class="line">           <span class="comment">// å­˜åœ¨,ç›´æ¥è¿”å›</span></span><br><span class="line">           <span class="keyword">return</span> JSONUtil.toBean(shopJson, Shop.class);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//åˆ¤æ–­å‘½ä¸­çš„å€¼æ˜¯å¦æ˜¯ç©ºå€¼</span></span><br><span class="line">       <span class="keyword">if</span> (shopJson != <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="comment">//è¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">           <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// 4.å®ç°ç¼“å­˜é‡æ„</span></span><br><span class="line">       <span class="comment">//4.1 è·å–äº’æ–¥é”</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">lockKey</span> <span class="operator">=</span> <span class="string">&quot;lock:shop:&quot;</span> + id;</span><br><span class="line">       <span class="type">Shop</span> <span class="variable">shop</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           <span class="type">boolean</span> <span class="variable">isLock</span> <span class="operator">=</span> tryLock(lockKey);</span><br><span class="line">           <span class="comment">// 4.2 åˆ¤æ–­å¦è·å–æˆåŠŸ</span></span><br><span class="line">           <span class="keyword">if</span>(!isLock)&#123;</span><br><span class="line">               <span class="comment">//4.3 å¤±è´¥ï¼Œåˆ™ä¼‘çœ é‡è¯•</span></span><br><span class="line">               Thread.sleep(<span class="number">50</span>);</span><br><span class="line">               <span class="keyword">return</span> queryWithMutex(id);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">//4.4 æˆåŠŸï¼Œæ ¹æ®idæŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line">            shop = getById(id);</span><br><span class="line">           <span class="comment">// 5.ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯</span></span><br><span class="line">           <span class="keyword">if</span>(shop == <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="comment">//å°†ç©ºå€¼å†™å…¥redis</span></span><br><span class="line">               stringRedisTemplate.opsForValue().set(key,<span class="string">&quot;&quot;</span>,CACHE_NULL_TTL,TimeUnit.MINUTES);</span><br><span class="line">               <span class="comment">//è¿”å›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">               <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">//6.å†™å…¥redis</span></span><br><span class="line">           stringRedisTemplate.opsForValue().set(key,JSONUtil.toJsonStr(shop),CACHE_NULL_TTL,TimeUnit.MINUTES);</span><br><span class="line"></span><br><span class="line">       &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">finally</span> &#123;</span><br><span class="line">           <span class="comment">//7.é‡Šæ”¾äº’æ–¥é”</span></span><br><span class="line">           unlock(lockKey);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> shop;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="1-10åˆ©ç”¨é€»è¾‘è¿‡æœŸè§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜"><a href="#1-10åˆ©ç”¨é€»è¾‘è¿‡æœŸè§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜" class="headerlink" title="1.10åˆ©ç”¨é€»è¾‘è¿‡æœŸè§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜"></a>1.10åˆ©ç”¨é€»è¾‘è¿‡æœŸè§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜</h3><p><strong>éœ€æ±‚ï¼šä¿®æ”¹æ ¹æ®idæŸ¥è¯¢å•†é“ºçš„ä¸šåŠ¡ï¼ŒåŸºäºé€»è¾‘è¿‡æœŸæ–¹å¼æ¥è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜</strong></p><p>æ€è·¯åˆ†æï¼šå½“ç”¨æˆ·å¼€å§‹æŸ¥è¯¢redisæ—¶ï¼Œåˆ¤æ–­æ˜¯å¦å‘½ä¸­ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­åˆ™ç›´æ¥è¿”å›ç©ºæ•°æ®ï¼Œä¸æŸ¥è¯¢æ•°æ®åº“ï¼Œè€Œä¸€æ—¦å‘½ä¸­åï¼Œå°†valueå–å‡ºï¼Œåˆ¤æ–­valueä¸­çš„è¿‡æœŸæ—¶é—´æ˜¯å¦æ»¡è¶³ï¼Œå¦‚æœæ²¡æœ‰è¿‡æœŸï¼Œåˆ™ç›´æ¥è¿”å›redisä¸­çš„æ•°æ®ï¼Œå¦‚æœè¿‡æœŸï¼Œåˆ™åœ¨å¼€å¯ç‹¬ç«‹çº¿ç¨‹åç›´æ¥è¿”å›ä¹‹å‰çš„æ•°æ®ï¼Œç‹¬ç«‹çº¿ç¨‹å»é‡æ„æ•°æ®ï¼Œé‡æ„å®Œæˆåé‡Šæ”¾äº’æ–¥é”ã€‚</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226183516684.png" alt="image-20230226183516684"></p><p>å¦‚æœå°è£…æ•°æ®ï¼šå› ä¸ºç°åœ¨redisä¸­å­˜å‚¨çš„æ•°æ®çš„valueéœ€è¦å¸¦ä¸Šè¿‡æœŸæ—¶é—´ï¼Œæ­¤æ—¶è¦ä¹ˆä½ å»ä¿®æ”¹åŸæ¥çš„å®ä½“ç±»ï¼Œè¦ä¹ˆä½ </p><p><strong>æ­¥éª¤ä¸€ã€</strong></p><p>æ–°å»ºä¸€ä¸ªå®ä½“ç±»ï¼Œæˆ‘ä»¬é‡‡ç”¨ç¬¬äºŒä¸ªæ–¹æ¡ˆï¼Œè¿™ä¸ªæ–¹æ¡ˆï¼Œå¯¹åŸæ¥ä»£ç æ²¡æœ‰ä¾µå…¥æ€§ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisData</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> LocalDateTime expireTime;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ­¥éª¤äºŒã€</strong></p><p>åœ¨<strong>ShopServiceImpl</strong> æ–°å¢æ­¤æ–¹æ³•ï¼Œåˆ©ç”¨å•å…ƒæµ‹è¯•è¿›è¡Œç¼“å­˜é¢„çƒ­</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226183623235.png" alt="image-20230226183623235"></p><p><strong>åœ¨æµ‹è¯•ç±»ä¸­</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230226183631928.png" alt="image-20230226183631928"></p><p>æ­¥éª¤ä¸‰ï¼šæ­£å¼ä»£ç </p><p><strong>ShopServiceImpl</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">ExecutorService</span> <span class="variable">CACHE_REBUILD_EXECUTOR</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">public</span> Shop <span class="title function_">queryWithLogicalExpire</span><span class="params">( Long id )</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> CACHE_SHOP_KEY + id;</span><br><span class="line">    <span class="comment">// 1.ä»redisæŸ¥è¯¢å•†é“ºç¼“å­˜</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(key);</span><br><span class="line">    <span class="comment">// 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">if</span> (StrUtil.isBlank(json)) &#123;</span><br><span class="line">        <span class="comment">// 3.å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4.å‘½ä¸­ï¼Œéœ€è¦å…ˆæŠŠjsonååºåˆ—åŒ–ä¸ºå¯¹è±¡</span></span><br><span class="line">    <span class="type">RedisData</span> <span class="variable">redisData</span> <span class="operator">=</span> JSONUtil.toBean(json, RedisData.class);</span><br><span class="line">    <span class="type">Shop</span> <span class="variable">shop</span> <span class="operator">=</span> JSONUtil.toBean((JSONObject) redisData.getData(), Shop.class);</span><br><span class="line">    <span class="type">LocalDateTime</span> <span class="variable">expireTime</span> <span class="operator">=</span> redisData.getExpireTime();</span><br><span class="line">    <span class="comment">// 5.åˆ¤æ–­æ˜¯å¦è¿‡æœŸ</span></span><br><span class="line">    <span class="keyword">if</span>(expireTime.isAfter(LocalDateTime.now())) &#123;</span><br><span class="line">        <span class="comment">// 5.1.æœªè¿‡æœŸï¼Œç›´æ¥è¿”å›åº—é“ºä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">return</span> shop;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 5.2.å·²è¿‡æœŸï¼Œéœ€è¦ç¼“å­˜é‡å»º</span></span><br><span class="line">    <span class="comment">// 6.ç¼“å­˜é‡å»º</span></span><br><span class="line">    <span class="comment">// 6.1.è·å–äº’æ–¥é”</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">lockKey</span> <span class="operator">=</span> LOCK_SHOP_KEY + id;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">isLock</span> <span class="operator">=</span> tryLock(lockKey);</span><br><span class="line">    <span class="comment">// 6.2.åˆ¤æ–­æ˜¯å¦è·å–é”æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span> (isLock)&#123;</span><br><span class="line">        CACHE_REBUILD_EXECUTOR.submit( ()-&gt;&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//é‡å»ºç¼“å­˜</span></span><br><span class="line">                <span class="built_in">this</span>.saveShop2Redis(id,<span class="number">20L</span>);</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                unlock(lockKey);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 6.4.è¿”å›è¿‡æœŸçš„å•†é“ºä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">return</span> shop;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-11å°è£…Rediså·¥å…·ç±»"><a href="#1-11å°è£…Rediså·¥å…·ç±»" class="headerlink" title="1.11å°è£…Rediså·¥å…·ç±»"></a>1.11å°è£…Rediså·¥å…·ç±»</h3><p>åŸºäºStringRedisTemplateå°è£…ä¸€ä¸ªç¼“å­˜å·¥å…·ç±»ï¼Œæ»¡è¶³ä¸‹åˆ—éœ€æ±‚ï¼š</p><ul><li>æ–¹æ³•1ï¼šå°†ä»»æ„Javaå¯¹è±¡åºåˆ—åŒ–ä¸ºjsonå¹¶å­˜å‚¨åœ¨stringç±»å‹çš„keyä¸­ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®TTLè¿‡æœŸæ—¶é—´</li><li>æ–¹æ³•2ï¼šå°†ä»»æ„Javaå¯¹è±¡åºåˆ—åŒ–ä¸ºjsonå¹¶å­˜å‚¨åœ¨stringç±»å‹çš„keyä¸­ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®é€»è¾‘è¿‡æœŸæ—¶é—´ï¼Œç”¨äºå¤„ç†ç¼“</li></ul><p>å­˜å‡»ç©¿é—®é¢˜</p><ul><li>æ–¹æ³•3ï¼šæ ¹æ®æŒ‡å®šçš„keyæŸ¥è¯¢ç¼“å­˜ï¼Œå¹¶ååºåˆ—åŒ–ä¸ºæŒ‡å®šç±»å‹ï¼Œåˆ©ç”¨ç¼“å­˜ç©ºå€¼çš„æ–¹å¼è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜</li><li>æ–¹æ³•4ï¼šæ ¹æ®æŒ‡å®šçš„keyæŸ¥è¯¢ç¼“å­˜ï¼Œå¹¶ååºåˆ—åŒ–ä¸ºæŒ‡å®šç±»å‹ï¼Œéœ€è¦åˆ©ç”¨é€»è¾‘è¿‡æœŸè§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜</li></ul><p>å°†é€»è¾‘è¿›è¡Œå°è£…</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheClient</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">ExecutorService</span> <span class="variable">CACHE_REBUILD_EXECUTOR</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CacheClient</span><span class="params">(StringRedisTemplate stringRedisTemplate)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.stringRedisTemplate = stringRedisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(String key, Object value, Long time, TimeUnit unit)</span> &#123;</span><br><span class="line">        stringRedisTemplate.opsForValue().set(key, JSONUtil.toJsonStr(value), time, unit);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWithLogicalExpire</span><span class="params">(String key, Object value, Long time, TimeUnit unit)</span> &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®é€»è¾‘è¿‡æœŸ</span></span><br><span class="line">        <span class="type">RedisData</span> <span class="variable">redisData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RedisData</span>();</span><br><span class="line">        redisData.setData(value);</span><br><span class="line">        redisData.setExpireTime(LocalDateTime.now().plusSeconds(unit.toSeconds(time)));</span><br><span class="line">        <span class="comment">// å†™å…¥Redis</span></span><br><span class="line">        stringRedisTemplate.opsForValue().set(key, JSONUtil.toJsonStr(redisData));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;R,ID&gt; R <span class="title function_">queryWithPassThrough</span><span class="params">(</span></span><br><span class="line"><span class="params">            String keyPrefix, ID id, Class&lt;R&gt; type, Function&lt;ID, R&gt; dbFallback, Long time, TimeUnit unit)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> keyPrefix + id;</span><br><span class="line">        <span class="comment">// 1.ä»redisæŸ¥è¯¢å•†é“ºç¼“å­˜</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(key);</span><br><span class="line">        <span class="comment">// 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isNotBlank(json)) &#123;</span><br><span class="line">            <span class="comment">// 3.å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">            <span class="keyword">return</span> JSONUtil.toBean(json, type);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­å‘½ä¸­çš„æ˜¯å¦æ˜¯ç©ºå€¼</span></span><br><span class="line">        <span class="keyword">if</span> (json != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// è¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.ä¸å­˜åœ¨ï¼Œæ ¹æ®idæŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> dbFallback.apply(id);</span><br><span class="line">        <span class="comment">// 5.ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯</span></span><br><span class="line">        <span class="keyword">if</span> (r == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// å°†ç©ºå€¼å†™å…¥redis</span></span><br><span class="line">            stringRedisTemplate.opsForValue().set(key, <span class="string">&quot;&quot;</span>, CACHE_NULL_TTL, TimeUnit.MINUTES);</span><br><span class="line">            <span class="comment">// è¿”å›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 6.å­˜åœ¨ï¼Œå†™å…¥redis</span></span><br><span class="line">        <span class="built_in">this</span>.set(key, r, time, unit);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;R, ID&gt; R <span class="title function_">queryWithLogicalExpire</span><span class="params">(</span></span><br><span class="line"><span class="params">            String keyPrefix, ID id, Class&lt;R&gt; type, Function&lt;ID, R&gt; dbFallback, Long time, TimeUnit unit)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> keyPrefix + id;</span><br><span class="line">        <span class="comment">// 1.ä»redisæŸ¥è¯¢å•†é“ºç¼“å­˜</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(key);</span><br><span class="line">        <span class="comment">// 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isBlank(json)) &#123;</span><br><span class="line">            <span class="comment">// 3.å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4.å‘½ä¸­ï¼Œéœ€è¦å…ˆæŠŠjsonååºåˆ—åŒ–ä¸ºå¯¹è±¡</span></span><br><span class="line">        <span class="type">RedisData</span> <span class="variable">redisData</span> <span class="operator">=</span> JSONUtil.toBean(json, RedisData.class);</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> JSONUtil.toBean((JSONObject) redisData.getData(), type);</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">expireTime</span> <span class="operator">=</span> redisData.getExpireTime();</span><br><span class="line">        <span class="comment">// 5.åˆ¤æ–­æ˜¯å¦è¿‡æœŸ</span></span><br><span class="line">        <span class="keyword">if</span>(expireTime.isAfter(LocalDateTime.now())) &#123;</span><br><span class="line">            <span class="comment">// 5.1.æœªè¿‡æœŸï¼Œç›´æ¥è¿”å›åº—é“ºä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">return</span> r;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 5.2.å·²è¿‡æœŸï¼Œéœ€è¦ç¼“å­˜é‡å»º</span></span><br><span class="line">        <span class="comment">// 6.ç¼“å­˜é‡å»º</span></span><br><span class="line">        <span class="comment">// 6.1.è·å–äº’æ–¥é”</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">lockKey</span> <span class="operator">=</span> LOCK_SHOP_KEY + id;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isLock</span> <span class="operator">=</span> tryLock(lockKey);</span><br><span class="line">        <span class="comment">// 6.2.åˆ¤æ–­æ˜¯å¦è·å–é”æˆåŠŸ</span></span><br><span class="line">        <span class="keyword">if</span> (isLock)&#123;</span><br><span class="line">            <span class="comment">// 6.3.æˆåŠŸï¼Œå¼€å¯ç‹¬ç«‹çº¿ç¨‹ï¼Œå®ç°ç¼“å­˜é‡å»º</span></span><br><span class="line">            CACHE_REBUILD_EXECUTOR.submit(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">// æŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line">                    <span class="type">R</span> <span class="variable">newR</span> <span class="operator">=</span> dbFallback.apply(id);</span><br><span class="line">                    <span class="comment">// é‡å»ºç¼“å­˜</span></span><br><span class="line">                    <span class="built_in">this</span>.setWithLogicalExpire(key, newR, time, unit);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                    <span class="comment">// é‡Šæ”¾é”</span></span><br><span class="line">                    unlock(lockKey);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 6.4.è¿”å›è¿‡æœŸçš„å•†é“ºä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;R, ID&gt; R <span class="title function_">queryWithMutex</span><span class="params">(</span></span><br><span class="line"><span class="params">            String keyPrefix, ID id, Class&lt;R&gt; type, Function&lt;ID, R&gt; dbFallback, Long time, TimeUnit unit)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> keyPrefix + id;</span><br><span class="line">        <span class="comment">// 1.ä»redisæŸ¥è¯¢å•†é“ºç¼“å­˜</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">shopJson</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(key);</span><br><span class="line">        <span class="comment">// 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span> (StrUtil.isNotBlank(shopJson)) &#123;</span><br><span class="line">            <span class="comment">// 3.å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">            <span class="keyword">return</span> JSONUtil.toBean(shopJson, type);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­å‘½ä¸­çš„æ˜¯å¦æ˜¯ç©ºå€¼</span></span><br><span class="line">        <span class="keyword">if</span> (shopJson != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// è¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.å®ç°ç¼“å­˜é‡å»º</span></span><br><span class="line">        <span class="comment">// 4.1.è·å–äº’æ–¥é”</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">lockKey</span> <span class="operator">=</span> LOCK_SHOP_KEY + id;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">isLock</span> <span class="operator">=</span> tryLock(lockKey);</span><br><span class="line">            <span class="comment">// 4.2.åˆ¤æ–­æ˜¯å¦è·å–æˆåŠŸ</span></span><br><span class="line">            <span class="keyword">if</span> (!isLock) &#123;</span><br><span class="line">                <span class="comment">// 4.3.è·å–é”å¤±è´¥ï¼Œä¼‘çœ å¹¶é‡è¯•</span></span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">                <span class="keyword">return</span> queryWithMutex(keyPrefix, id, type, dbFallback, time, unit);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 4.4.è·å–é”æˆåŠŸï¼Œæ ¹æ®idæŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line">            r = dbFallback.apply(id);</span><br><span class="line">            <span class="comment">// 5.ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯</span></span><br><span class="line">            <span class="keyword">if</span> (r == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">// å°†ç©ºå€¼å†™å…¥redis</span></span><br><span class="line">                stringRedisTemplate.opsForValue().set(key, <span class="string">&quot;&quot;</span>, CACHE_NULL_TTL, TimeUnit.MINUTES);</span><br><span class="line">                <span class="comment">// è¿”å›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 6.å­˜åœ¨ï¼Œå†™å…¥redis</span></span><br><span class="line">            <span class="built_in">this</span>.set(key, r, time, unit);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 7.é‡Šæ”¾é”</span></span><br><span class="line">            unlock(lockKey);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 8.è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">tryLock</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">flag</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().setIfAbsent(key, <span class="string">&quot;1&quot;</span>, <span class="number">10</span>, TimeUnit.SECONDS);</span><br><span class="line">        <span class="keyword">return</span> BooleanUtil.isTrue(flag);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">unlock</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        stringRedisTemplate.delete(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ShopServiceImpl ä¸­</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> CacheClient cacheClient;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">queryById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="comment">// è§£å†³ç¼“å­˜ç©¿é€</span></span><br><span class="line">        <span class="type">Shop</span> <span class="variable">shop</span> <span class="operator">=</span> cacheClient</span><br><span class="line">                .queryWithPassThrough(CACHE_SHOP_KEY, id, Shop.class, <span class="built_in">this</span>::getById, CACHE_SHOP_TTL, TimeUnit.MINUTES);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// äº’æ–¥é”è§£å†³ç¼“å­˜å‡»ç©¿</span></span><br><span class="line">        <span class="comment">// Shop shop = cacheClient</span></span><br><span class="line">        <span class="comment">//         .queryWithMutex(CACHE_SHOP_KEY, id, Shop.class, this::getById, CACHE_SHOP_TTL, TimeUnit.MINUTES);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€»è¾‘è¿‡æœŸè§£å†³ç¼“å­˜å‡»ç©¿</span></span><br><span class="line">        <span class="comment">// Shop shop = cacheClient</span></span><br><span class="line">        <span class="comment">//         .queryWithLogicalExpire(CACHE_SHOP_KEY, id, Shop.class, this::getById, 20L, TimeUnit.SECONDS);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (shop == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> Result.fail(<span class="string">&quot;åº—é“ºä¸å­˜åœ¨ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 7.è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> Result.ok(shop);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -Redis -å­¦ä¹  -æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rediså­¦ä¹ ç¬”è®°(1)</title>
      <link href="/2023/02/25/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2023/02/25/Redis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Rediså­¦ä¹ ç¬”è®°"><a href="#Rediså­¦ä¹ ç¬”è®°" class="headerlink" title="Rediså­¦ä¹ ç¬”è®°"></a>Rediså­¦ä¹ ç¬”è®°</h1><h2 id="â˜€ï¸1-Rediså’Œä¼ ç»ŸSQLçš„åŒºåˆ«"><a href="#â˜€ï¸1-Rediså’Œä¼ ç»ŸSQLçš„åŒºåˆ«" class="headerlink" title="â˜€ï¸1.Rediså’Œä¼ ç»ŸSQLçš„åŒºåˆ«"></a>â˜€ï¸1.Rediså’Œä¼ ç»ŸSQLçš„åŒºåˆ«</h2><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230225153805881.png" alt="image-20230225153805881"></p><ul><li>å­˜å‚¨æ–¹å¼<ul><li>å…³ç³»å‹æ•°æ®åº“åŸºäºç£ç›˜è¿›è¡Œå­˜å‚¨ï¼Œä¼šæœ‰å¤§é‡çš„ç£ç›˜IOï¼Œå¯¹æ€§èƒ½æœ‰ä¸€å®šå½±å“</li><li>éå…³ç³»å‹æ•°æ®åº“ï¼Œä»–ä»¬çš„æ“ä½œæ›´å¤šçš„æ˜¯ä¾èµ–äºå†…å­˜æ¥æ“ä½œï¼Œå†…å­˜çš„è¯»å†™é€Ÿåº¦ä¼šéå¸¸å¿«ï¼Œæ€§èƒ½è‡ªç„¶ä¼šå¥½ä¸€äº›</li></ul></li></ul><ul><li>æ‰©å±•æ€§<ul><li>å…³ç³»å‹æ•°æ®åº“é›†ç¾¤æ¨¡å¼ä¸€èˆ¬æ˜¯ä¸»ä»ï¼Œä¸»ä»æ•°æ®ä¸€è‡´ï¼Œèµ·åˆ°æ•°æ®å¤‡ä»½çš„ä½œç”¨ï¼Œç§°ä¸ºå‚ç›´æ‰©å±•ã€‚</li><li>éå…³ç³»å‹æ•°æ®åº“å¯ä»¥å°†æ•°æ®æ‹†åˆ†ï¼Œå­˜å‚¨åœ¨ä¸åŒæœºå™¨ä¸Šï¼Œå¯ä»¥ä¿å­˜æµ·é‡æ•°æ®ï¼Œè§£å†³å†…å­˜å¤§å°æœ‰é™çš„é—®é¢˜ã€‚ç§°ä¸ºæ°´å¹³æ‰©å±•ã€‚</li><li>å…³ç³»å‹æ•°æ®åº“å› ä¸ºè¡¨ä¹‹é—´å­˜åœ¨å…³è”å…³ç³»ï¼Œå¦‚æœåšæ°´å¹³æ‰©å±•ä¼šç»™æ•°æ®æŸ¥è¯¢å¸¦æ¥å¾ˆå¤šéº»çƒ¦</li></ul></li></ul><p><strong>Redisç‰¹å¾:</strong></p><ul><li>é”®å€¼ï¼ˆkey-valueï¼‰å‹ï¼Œvalueæ”¯æŒå¤šç§ä¸åŒæ•°æ®ç»“æ„ï¼ŒåŠŸèƒ½ä¸°å¯Œ</li><li>å•çº¿ç¨‹ï¼Œæ¯ä¸ªå‘½ä»¤å…·å¤‡åŸå­æ€§</li><li>ä½å»¶è¿Ÿï¼Œé€Ÿåº¦å¿«ï¼ˆåŸºäºå†…å­˜ã€IOå¤šè·¯å¤ç”¨ã€è‰¯å¥½çš„ç¼–ç ï¼‰ã€‚</li><li>æ”¯æŒæ•°æ®æŒä¹…åŒ–</li><li>æ”¯æŒä¸»ä»é›†ç¾¤ã€åˆ†ç‰‡é›†ç¾¤</li><li>æ”¯æŒå¤šè¯­è¨€å®¢æˆ·ç«¯</li></ul><p>Redisçš„å®˜æ–¹ç½‘ç«™åœ°å€ï¼š<a href="https://redis.io/">https://redis.io/</a></p><h2 id="â˜€ï¸2-Rediså¯åŠ¨"><a href="#â˜€ï¸2-Rediså¯åŠ¨" class="headerlink" title="â˜€ï¸2.Rediså¯åŠ¨"></a>â˜€ï¸2.Rediså¯åŠ¨</h2><p><strong>Redisé…ç½®åå°å¯åŠ¨åæ“ä½œå‘½ä»¤</strong></p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨</span></span><br><span class="line">systemctl start redis</span><br><span class="line"><span class="comment"># åœæ­¢</span></span><br><span class="line">systemctl stop redis</span><br><span class="line"><span class="comment"># é‡å¯</span></span><br><span class="line">systemctl restart redis</span><br><span class="line"><span class="comment"># æŸ¥çœ‹çŠ¶æ€</span></span><br><span class="line">systemctl status redis</span><br><span class="line"><span class="comment"># Rediså¼€æœºè‡ªå¯</span></span><br><span class="line">systemctl <span class="built_in">enable</span> redis</span><br></pre></td></tr></table></figure><p><strong>Rediså‘½ä»¤è¡Œå®¢æˆ·ç«¯</strong></p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">redis-cli [options] [commonds]</span><br></pre></td></tr></table></figure><p>å…¶ä¸­å¸¸è§çš„optionsæœ‰ï¼š</p><ul><li><code>-h 127.0.0.1</code>ï¼šæŒ‡å®šè¦è¿æ¥çš„redisèŠ‚ç‚¹çš„IPåœ°å€ï¼Œé»˜è®¤æ˜¯127.0.0.1</li><li><code>-p 6379</code>ï¼šæŒ‡å®šè¦è¿æ¥çš„redisèŠ‚ç‚¹çš„ç«¯å£ï¼Œé»˜è®¤æ˜¯6379</li><li><code>-a 123321</code>ï¼šæŒ‡å®šredisçš„è®¿é—®å¯†ç </li></ul><p>å…¶ä¸­çš„commondså°±æ˜¯Redisçš„æ“ä½œå‘½ä»¤ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>ping</code>ï¼šä¸redisæœåŠ¡ç«¯åšå¿ƒè·³æµ‹è¯•ï¼ŒæœåŠ¡ç«¯æ­£å¸¸ä¼šè¿”å›<code>pong</code></li></ul><p>ä¸æŒ‡å®šcommondæ—¶ï¼Œä¼šè¿›å…¥<code>redis-cli</code>çš„äº¤äº’æ§åˆ¶å°ï¼š</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230225154126600.png" alt="image-20230225154126600"></p><h2 id="â˜€ï¸3-Rediså¸¸ç”¨å‘½ä»¤"><a href="#â˜€ï¸3-Rediså¸¸ç”¨å‘½ä»¤" class="headerlink" title="â˜€ï¸3.Rediså¸¸ç”¨å‘½ä»¤"></a>â˜€ï¸3.Rediså¸¸ç”¨å‘½ä»¤</h2><h3 id="â˜ƒï¸3-1Redisé€šç”¨å‘½ä»¤"><a href="#â˜ƒï¸3-1Redisé€šç”¨å‘½ä»¤" class="headerlink" title="â˜ƒï¸3.1Redisé€šç”¨å‘½ä»¤"></a>â˜ƒï¸3.1Redisé€šç”¨å‘½ä»¤</h3><p>é€šç”¨æŒ‡ä»¤æ˜¯éƒ¨åˆ†æ•°æ®ç±»å‹çš„ï¼Œéƒ½å¯ä»¥ä½¿ç”¨çš„æŒ‡ä»¤ï¼Œå¸¸è§çš„æœ‰ï¼š</p><ul><li>KEYSï¼šæŸ¥çœ‹ç¬¦åˆæ¨¡æ¿çš„æ‰€æœ‰key</li><li>DELï¼šåˆ é™¤ä¸€ä¸ªæŒ‡å®šçš„key</li><li>EXISTSï¼šåˆ¤æ–­keyæ˜¯å¦å­˜åœ¨</li><li>EXPIREï¼šç»™ä¸€ä¸ªkeyè®¾ç½®æœ‰æ•ˆæœŸï¼Œæœ‰æ•ˆæœŸåˆ°æœŸæ—¶è¯¥keyä¼šè¢«è‡ªåŠ¨åˆ é™¤</li><li>TTLï¼šæŸ¥çœ‹ä¸€ä¸ªKEYçš„å‰©ä½™æœ‰æ•ˆæœŸ</li></ul><p>é€šè¿‡help [command] å¯ä»¥æŸ¥çœ‹ä¸€ä¸ªå‘½ä»¤çš„å…·ä½“ç”¨æ³•ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹keyså‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ï¼š</span></span><br><span class="line">127.0.0.1:6379&gt; <span class="built_in">help</span> keys</span><br><span class="line"></span><br><span class="line">KEYS pattern</span><br><span class="line">summary: Find all keys matching the given pattern</span><br><span class="line">since: 1.0.0</span><br><span class="line">group: generic</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ä¸€ä¸ªå­—æ®µä¸ºageï¼Œå€¼ä¸º18,æœ‰æ•ˆæœŸä¸º10ç§’</span></span><br><span class="line"><span class="built_in">set</span> age 18 EX 10</span><br><span class="line"><span class="comment"># Time To Live è·å–å‰©ä½™å­˜æ´»æ—¶é—´</span></span><br><span class="line">TTL age</span><br><span class="line"><span class="comment"># è·å–ageçš„å€¼</span></span><br><span class="line">get age</span><br></pre></td></tr></table></figure><h3 id="â˜ƒï¸3-2Stringç±»å‹"><a href="#â˜ƒï¸3-2Stringç±»å‹" class="headerlink" title="â˜ƒï¸3.2Stringç±»å‹"></a>â˜ƒï¸3.2Stringç±»å‹</h3><p>Stringç±»å‹ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ˜¯Redisä¸­æœ€ç®€å•çš„å­˜å‚¨ç±»å‹ã€‚</p><p>å…¶valueæ˜¯å­—ç¬¦ä¸²ï¼Œä¸è¿‡æ ¹æ®å­—ç¬¦ä¸²çš„æ ¼å¼ä¸åŒï¼Œåˆå¯ä»¥åˆ†ä¸º3ç±»ï¼š</p><ul><li>stringï¼šæ™®é€šå­—ç¬¦ä¸²</li><li>intï¼šæ•´æ•°ç±»å‹ï¼Œå¯ä»¥åšè‡ªå¢ã€è‡ªå‡æ“ä½œ</li><li>floatï¼šæµ®ç‚¹ç±»å‹ï¼Œå¯ä»¥åšè‡ªå¢ã€è‡ªå‡æ“ä½œ</li></ul><p>ä¸ç®¡æ˜¯å“ªç§æ ¼å¼ï¼Œåº•å±‚éƒ½æ˜¯å­—èŠ‚æ•°ç»„å½¢å¼å­˜å‚¨ï¼Œåªä¸è¿‡æ˜¯ç¼–ç æ–¹å¼ä¸åŒã€‚å­—ç¬¦ä¸²ç±»å‹çš„æœ€å¤§ç©ºé—´ä¸èƒ½è¶…è¿‡512m.</p><h5 id="3-2-1Stringçš„å¸¸è§å‘½ä»¤"><a href="#3-2-1Stringçš„å¸¸è§å‘½ä»¤" class="headerlink" title="3.2.1Stringçš„å¸¸è§å‘½ä»¤"></a>3.2.1Stringçš„å¸¸è§å‘½ä»¤</h5><ul><li>SETï¼šæ·»åŠ æˆ–è€…ä¿®æ”¹å·²ç»å­˜åœ¨çš„ä¸€ä¸ªStringç±»å‹çš„é”®å€¼å¯¹</li><li>GETï¼šæ ¹æ®keyè·å–Stringç±»å‹çš„value</li><li>MSETï¼šæ‰¹é‡æ·»åŠ å¤šä¸ªStringç±»å‹çš„é”®å€¼å¯¹</li><li>MGETï¼šæ ¹æ®å¤šä¸ªkeyè·å–å¤šä¸ªStringç±»å‹çš„value</li><li>INCRï¼šè®©ä¸€ä¸ªæ•´å‹çš„keyè‡ªå¢1</li><li>INCRBY:è®©ä¸€ä¸ªæ•´å‹çš„keyè‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿ï¼Œä¾‹å¦‚ï¼šincrby num 2 è®©numå€¼è‡ªå¢2</li><li>INCRBYFLOATï¼šè®©ä¸€ä¸ªæµ®ç‚¹ç±»å‹çš„æ•°å­—è‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿</li><li>SETNXï¼šæ·»åŠ ä¸€ä¸ªStringç±»å‹çš„é”®å€¼å¯¹ï¼Œå‰ææ˜¯è¿™ä¸ªkeyä¸å­˜åœ¨ï¼Œå¦åˆ™ä¸æ‰§è¡Œ</li><li>SETEXï¼šæ·»åŠ ä¸€ä¸ªStringç±»å‹çš„é”®å€¼å¯¹ï¼Œå¹¶ä¸”æŒ‡å®šæœ‰æ•ˆæœŸ</li></ul><h5 id="3-2-2Keyç»“æ„"><a href="#3-2-2Keyç»“æ„" class="headerlink" title="3.2.2Keyç»“æ„"></a>3.2.2Keyç»“æ„</h5><p>Redisæ²¡æœ‰ç±»ä¼¼MySQLä¸­çš„Tableçš„æ¦‚å¿µï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•åŒºåˆ†ä¸åŒç±»å‹çš„keyå‘¢ï¼Ÿ</p><p>ä¾‹å¦‚ï¼Œéœ€è¦å­˜å‚¨ç”¨æˆ·ã€å•†å“ä¿¡æ¯åˆ°redisï¼Œæœ‰ä¸€ä¸ªç”¨æˆ·idæ˜¯1ï¼Œæœ‰ä¸€ä¸ªå•†å“idæ°å¥½ä¹Ÿæ˜¯1ï¼Œæ­¤æ—¶å¦‚æœä½¿ç”¨idä½œä¸ºkeyï¼Œé‚£å°±ä¼šå†²çªäº†ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™keyæ·»åŠ å‰ç¼€åŠ ä»¥åŒºåˆ†ï¼Œä¸è¿‡è¿™ä¸ªå‰ç¼€ä¸æ˜¯éšä¾¿åŠ çš„ï¼Œæœ‰ä¸€å®šçš„è§„èŒƒï¼š</p><p>Redisçš„keyå…è®¸æœ‰å¤šä¸ªå•è¯å½¢æˆå±‚çº§ç»“æ„ï¼Œå¤šä¸ªå•è¯ä¹‹é—´ç”¨â€™:â€™éš”å¼€ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">é¡¹ç›®å:ä¸šåŠ¡å:ç±»å‹:id</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ ¼å¼å¹¶éå›ºå®šï¼Œä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥åˆ é™¤æˆ–æ·»åŠ è¯æ¡ã€‚è¿™æ ·ä»¥æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠä¸åŒç±»å‹çš„æ•°æ®åŒºåˆ†å¼€äº†ã€‚ä»è€Œé¿å…äº†keyçš„å†²çªé—®é¢˜ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬çš„é¡¹ç›®åç§°å« heimaï¼Œæœ‰userå’Œproductä¸¤ç§ä¸åŒç±»å‹çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰keyï¼š</p><ul><li><p>userç›¸å…³çš„keyï¼š<strong>heima:user:1</strong></p></li><li><p>productç›¸å…³çš„keyï¼š<strong>heima:product:1</strong></p></li></ul><p>å¦‚æœValueæ˜¯ä¸€ä¸ªJavaå¯¹è±¡ï¼Œä¾‹å¦‚ä¸€ä¸ªUserå¯¹è±¡ï¼Œåˆ™å¯ä»¥å°†å¯¹è±¡åºåˆ—åŒ–ä¸ºJSONå­—ç¬¦ä¸²åå­˜å‚¨ï¼š</p><table><thead><tr><th><strong>KEY</strong></th><th><strong>VALUE</strong></th></tr></thead><tbody><tr><td>heima:user:1</td><td>{â€œidâ€:1,  â€œnameâ€: â€œJackâ€, â€œageâ€: 21}</td></tr><tr><td>heima:product:1</td><td>{â€œidâ€:1,  â€œnameâ€: â€œå°ç±³11â€, â€œpriceâ€: 4999}</td></tr></tbody></table><p>å¹¶ä¸”ï¼Œåœ¨Redisçš„æ¡Œé¢å®¢æˆ·ç«¯ä¸­ï¼Œè¿˜ä¼šä»¥ç›¸åŒå‰ç¼€ä½œä¸ºå±‚çº§ç»“æ„ï¼Œè®©æ•°æ®çœ‹èµ·æ¥å±‚æ¬¡åˆ†æ˜ï¼Œå…³ç³»æ¸…æ™°ï¼š</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230225155824695.png" alt="image-20230225155824695"></p><h4 id="â˜ƒï¸3-2-3Hashç±»å‹"><a href="#â˜ƒï¸3-2-3Hashç±»å‹" class="headerlink" title="â˜ƒï¸3.2.3Hashç±»å‹"></a>â˜ƒï¸3.2.3Hashç±»å‹</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230225160353998.png" alt="image-20230225160353998"></p><p>Hashçš„å¸¸è§å‘½ä»¤æœ‰ï¼š</p><ul><li><p>HSET key field valueï¼šæ·»åŠ æˆ–è€…ä¿®æ”¹hashç±»å‹keyçš„fieldçš„å€¼</p></li><li><p>HGET key fieldï¼šè·å–ä¸€ä¸ªhashç±»å‹keyçš„fieldçš„å€¼</p></li><li><p>HMSETï¼šæ‰¹é‡æ·»åŠ å¤šä¸ªhashç±»å‹keyçš„fieldçš„å€¼</p></li><li><p>HMGETï¼šæ‰¹é‡è·å–å¤šä¸ªhashç±»å‹keyçš„fieldçš„å€¼</p></li><li><p>HGETALLï¼šè·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„fieldå’Œvalue</p></li><li><p>HKEYSï¼šè·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„field</p></li><li><p>HINCRBY:è®©ä¸€ä¸ªhashç±»å‹keyçš„å­—æ®µå€¼è‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿</p></li><li><p>HSETNXï¼šæ·»åŠ ä¸€ä¸ªhashç±»å‹çš„keyçš„fieldå€¼ï¼Œå‰ææ˜¯è¿™ä¸ªfieldä¸å­˜åœ¨ï¼Œå¦åˆ™ä¸æ‰§è¡Œ</p></li></ul><h4 id="â˜ƒï¸3-2-4Listç±»å‹"><a href="#â˜ƒï¸3-2-4Listç±»å‹" class="headerlink" title="â˜ƒï¸3.2.4Listç±»å‹"></a>â˜ƒï¸3.2.4Listç±»å‹</h4><p>Redisä¸­çš„Listç±»å‹ä¸Javaä¸­çš„LinkedListç±»ä¼¼ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ç»“æ„ã€‚æ—¢å¯ä»¥æ”¯æŒæ­£å‘æ£€ç´¢å’Œä¹Ÿå¯ä»¥æ”¯æŒåå‘æ£€ç´¢ã€‚</p><p>ç‰¹å¾ä¹Ÿä¸LinkedListç±»ä¼¼ï¼š</p><ul><li>æœ‰åº</li><li>å…ƒç´ å¯ä»¥é‡å¤</li><li>æ’å…¥å’Œåˆ é™¤å¿«</li><li>æŸ¥è¯¢é€Ÿåº¦ä¸€èˆ¬</li></ul><p>å¸¸ç”¨æ¥å­˜å‚¨ä¸€ä¸ªæœ‰åºæ•°æ®ï¼Œä¾‹å¦‚ï¼šæœ‹å‹åœˆç‚¹èµåˆ—è¡¨ï¼Œè¯„è®ºåˆ—è¡¨ç­‰ã€‚</p><p>Listçš„å¸¸è§å‘½ä»¤æœ‰ï¼š</p><ul><li>LPUSH key element â€¦ ï¼šå‘åˆ—è¡¨å·¦ä¾§æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </li><li>LPOP keyï¼šç§»é™¤å¹¶è¿”å›åˆ—è¡¨å·¦ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰åˆ™è¿”å›nil</li><li>RPUSH key element â€¦ ï¼šå‘åˆ—è¡¨å³ä¾§æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </li><li>RPOP keyï¼šç§»é™¤å¹¶è¿”å›åˆ—è¡¨å³ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>LRANGE key star endï¼šè¿”å›ä¸€æ®µè§’æ ‡èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ </li><li>BLPOPå’ŒBRPOPï¼šä¸LPOPå’ŒRPOPç±»ä¼¼ï¼Œåªä¸è¿‡åœ¨æ²¡æœ‰å…ƒç´ æ—¶ç­‰å¾…æŒ‡å®šæ—¶é—´ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›nil</li></ul><h4 id="â˜ƒï¸3-2-5Setç±»å‹"><a href="#â˜ƒï¸3-2-5Setç±»å‹" class="headerlink" title="â˜ƒï¸3.2.5Setç±»å‹"></a>â˜ƒï¸3.2.5Setç±»å‹</h4><p>Redisçš„Setç»“æ„ä¸Javaä¸­çš„HashSetç±»ä¼¼ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªvalueä¸ºnullçš„HashMapã€‚å› ä¸ºä¹Ÿæ˜¯ä¸€ä¸ªhashè¡¨ï¼Œå› æ­¤å…·å¤‡ä¸HashSetç±»ä¼¼çš„ç‰¹å¾ï¼š</p><ul><li><p>æ— åº</p></li><li><p>å…ƒç´ ä¸å¯é‡å¤</p></li><li><p>æŸ¥æ‰¾å¿«</p></li><li><p>æ”¯æŒäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰åŠŸèƒ½</p></li></ul><p>Setçš„å¸¸è§å‘½ä»¤æœ‰ï¼š</p><ul><li>SADD key member â€¦ ï¼šå‘setä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </li><li>SREM key member â€¦ : ç§»é™¤setä¸­çš„æŒ‡å®šå…ƒç´ </li><li>SCARD keyï¼š è¿”å›setä¸­å…ƒç´ çš„ä¸ªæ•°</li><li>SISMEMBER key memberï¼šåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºsetä¸­</li><li>SMEMBERSï¼šè·å–setä¸­çš„æ‰€æœ‰å…ƒç´ </li><li>SINTER key1 key2 â€¦ ï¼šæ±‚key1ä¸key2çš„äº¤é›†</li></ul><h4 id="â˜ƒï¸3-2-6SortedSetç±»å‹"><a href="#â˜ƒï¸3-2-6SortedSetç±»å‹" class="headerlink" title="â˜ƒï¸3.2.6SortedSetç±»å‹"></a>â˜ƒï¸3.2.6SortedSetç±»å‹</h4><p>Redisçš„SortedSetæ˜¯ä¸€ä¸ªå¯æ’åºçš„seté›†åˆï¼Œä¸Javaä¸­çš„TreeSetæœ‰äº›ç±»ä¼¼ï¼Œä½†åº•å±‚æ•°æ®ç»“æ„å´å·®åˆ«å¾ˆå¤§ã€‚SortedSetä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½å¸¦æœ‰ä¸€ä¸ªscoreå±æ€§ï¼Œå¯ä»¥åŸºäºscoreå±æ€§å¯¹å…ƒç´ æ’åºï¼Œåº•å±‚çš„å®ç°æ˜¯ä¸€ä¸ªè·³è¡¨ï¼ˆSkipListï¼‰åŠ  hashè¡¨ã€‚</p><p>SortedSetå…·å¤‡ä¸‹åˆ—ç‰¹æ€§ï¼š</p><ul><li>å¯æ’åº</li><li>å…ƒç´ ä¸é‡å¤</li><li>æŸ¥è¯¢é€Ÿåº¦å¿«</li></ul><p>å› ä¸ºSortedSetçš„å¯æ’åºç‰¹æ€§ï¼Œç»å¸¸è¢«ç”¨æ¥å®ç°æ’è¡Œæ¦œè¿™æ ·çš„åŠŸèƒ½ã€‚</p><p>SortedSetçš„å¸¸è§å‘½ä»¤æœ‰ï¼š</p><ul><li>ZADD key score memberï¼šæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ åˆ°sorted set ï¼Œå¦‚æœå·²ç»å­˜åœ¨åˆ™æ›´æ–°å…¶scoreå€¼</li><li>ZREM key memberï¼šåˆ é™¤sorted setä¸­çš„ä¸€ä¸ªæŒ‡å®šå…ƒç´ </li><li>ZSCORE key member : è·å–sorted setä¸­çš„æŒ‡å®šå…ƒç´ çš„scoreå€¼</li><li>ZRANK key memberï¼šè·å–sorted set ä¸­çš„æŒ‡å®šå…ƒç´ çš„æ’å</li><li>ZCARD keyï¼šè·å–sorted setä¸­çš„å…ƒç´ ä¸ªæ•°</li><li>ZCOUNT key min maxï¼šç»Ÿè®¡scoreå€¼åœ¨ç»™å®šèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ çš„ä¸ªæ•°</li><li>ZINCRBY key increment memberï¼šè®©sorted setä¸­çš„æŒ‡å®šå…ƒç´ è‡ªå¢ï¼Œæ­¥é•¿ä¸ºæŒ‡å®šçš„incrementå€¼</li><li>ZRANGE key min maxï¼šæŒ‰ç…§scoreæ’åºåï¼Œè·å–æŒ‡å®šæ’åèŒƒå›´å†…çš„å…ƒç´ </li><li>ZRANGEBYSCORE key min maxï¼šæŒ‰ç…§scoreæ’åºåï¼Œè·å–æŒ‡å®šscoreèŒƒå›´å†…çš„å…ƒç´ </li><li>ZDIFFã€ZINTERã€ZUNIONï¼šæ±‚å·®é›†ã€äº¤é›†ã€å¹¶é›†</li></ul><p>æ³¨æ„ï¼šæ‰€æœ‰çš„æ’åé»˜è®¤éƒ½æ˜¯å‡åºï¼Œå¦‚æœè¦é™åºåˆ™åœ¨å‘½ä»¤çš„Zåé¢æ·»åŠ REVå³å¯ï¼Œä¾‹å¦‚ï¼š</p><ul><li><p><strong>å‡åº</strong>è·å–sorted set ä¸­çš„æŒ‡å®šå…ƒç´ çš„æ’åï¼šZRANK key member</p></li><li><p><strong>é™åº</strong>è·å–sorted set ä¸­çš„æŒ‡å®šå…ƒç´ çš„æ’åï¼šZREVRANK key memeber</p></li></ul><h2 id="â˜€ï¸4-Redisçš„Javaå®¢æˆ·ç«¯"><a href="#â˜€ï¸4-Redisçš„Javaå®¢æˆ·ç«¯" class="headerlink" title="â˜€ï¸4.Redisçš„Javaå®¢æˆ·ç«¯"></a>â˜€ï¸4.Redisçš„Javaå®¢æˆ·ç«¯</h2><h3 id="â˜ƒï¸4-1SpringDataRediså®¢æˆ·ç«¯"><a href="#â˜ƒï¸4-1SpringDataRediså®¢æˆ·ç«¯" class="headerlink" title="â˜ƒï¸4.1SpringDataRediså®¢æˆ·ç«¯"></a>â˜ƒï¸4.1SpringDataRediså®¢æˆ·ç«¯</h3><p>SpringDataæ˜¯Springä¸­æ•°æ®æ“ä½œçš„æ¨¡å—ï¼ŒåŒ…å«å¯¹å„ç§æ•°æ®åº“çš„é›†æˆï¼Œå…¶ä¸­å¯¹Redisçš„é›†æˆæ¨¡å—å°±å«åšSpringDataRedisï¼Œå®˜ç½‘åœ°å€ï¼š<a href="https://spring.io/projects/spring-data-redis">https://spring.io/projects/spring-data-redis</a></p><ul><li>æä¾›äº†å¯¹ä¸åŒRediså®¢æˆ·ç«¯çš„æ•´åˆï¼ˆLettuceå’ŒJedisï¼‰</li><li>æä¾›äº†RedisTemplateç»Ÿä¸€APIæ¥æ“ä½œRedis</li><li>æ”¯æŒRedisçš„å‘å¸ƒè®¢é˜…æ¨¡å‹</li><li>æ”¯æŒRediså“¨å…µå’ŒRedisé›†ç¾¤</li><li>æ”¯æŒåŸºäºLettuceçš„å“åº”å¼ç¼–ç¨‹</li><li>æ”¯æŒåŸºäºJDKã€JSONã€å­—ç¬¦ä¸²ã€Springå¯¹è±¡çš„æ•°æ®åºåˆ—åŒ–åŠååºåˆ—åŒ–</li><li>æ”¯æŒåŸºäºRedisçš„JDKCollectionå®ç°</li></ul><p>SpringDataRedisä¸­æä¾›äº†RedisTemplateå·¥å…·ç±»ï¼Œå…¶ä¸­å°è£…äº†å„ç§å¯¹Redisçš„æ“ä½œã€‚å¹¶ä¸”å°†ä¸åŒæ•°æ®ç±»å‹çš„æ“ä½œAPIå°è£…åˆ°äº†ä¸åŒçš„ç±»å‹ä¸­ï¼š</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230225161322643.png" alt="image-20230225161322643"></p><h3 id="â˜ƒï¸4-2å¿«é€Ÿå…¥é—¨"><a href="#â˜ƒï¸4-2å¿«é€Ÿå…¥é—¨" class="headerlink" title="â˜ƒï¸4.2å¿«é€Ÿå…¥é—¨"></a>â˜ƒï¸4.2å¿«é€Ÿå…¥é—¨</h3><p>SpringBootå·²ç»æä¾›äº†å¯¹SpringDataRedisçš„æ”¯æŒï¼Œä½¿ç”¨éå¸¸ç®€å•ã€‚</p><p>é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªmavené¡¹ç›®ï¼Œç„¶åæŒ‰ç…§ä¸‹é¢æ­¥éª¤æ‰§è¡Œï¼š</p><h4 id="1ï¼‰å¼•å…¥ä¾èµ–"><a href="#1ï¼‰å¼•å…¥ä¾èµ–" class="headerlink" title="1ï¼‰å¼•å…¥ä¾èµ–"></a>1ï¼‰å¼•å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.heima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>redis-demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>redis-demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--redisä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--common-pool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--Jacksonä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2ï¼‰é…ç½®Redis"><a href="#2ï¼‰é…ç½®Redis" class="headerlink" title="2ï¼‰é…ç½®Redis"></a>2ï¼‰é…ç½®Redis</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123321</span></span><br><span class="line">    <span class="attr">lettuce:</span></span><br><span class="line">      <span class="attr">pool:</span></span><br><span class="line">        <span class="attr">max-active:</span> <span class="number">8</span></span><br><span class="line">        <span class="attr">max-idle:</span> <span class="number">8</span></span><br><span class="line">        <span class="attr">min-idle:</span> <span class="number">0</span></span><br><span class="line">        <span class="attr">max-wait:</span> <span class="string">100ms</span></span><br></pre></td></tr></table></figure><h4 id="3ï¼‰æ³¨å…¥RedisTemplate"><a href="#3ï¼‰æ³¨å…¥RedisTemplate" class="headerlink" title="3ï¼‰æ³¨å…¥RedisTemplate"></a>3ï¼‰æ³¨å…¥RedisTemplate</h4><p>å› ä¸ºæœ‰äº†SpringBootçš„è‡ªåŠ¨è£…é…ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿æ¥å°±ç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RedisStringTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4ï¼‰ç¼–å†™æµ‹è¯•"><a href="#4ï¼‰ç¼–å†™æµ‹è¯•" class="headerlink" title="4ï¼‰ç¼–å†™æµ‹è¯•"></a>4ï¼‰ç¼–å†™æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RedisStringTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate edisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å†™å…¥ä¸€æ¡Stringæ•°æ®</span></span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;è™å“¥&quot;</span>);</span><br><span class="line">        <span class="comment">// è·å–stringæ•°æ®</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">name</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="â˜ƒï¸4-3è‡ªå®šä¹‰åºåˆ—åŒ–"><a href="#â˜ƒï¸4-3è‡ªå®šä¹‰åºåˆ—åŒ–" class="headerlink" title="â˜ƒï¸4.3è‡ªå®šä¹‰åºåˆ—åŒ–"></a>â˜ƒï¸4.3è‡ªå®šä¹‰åºåˆ—åŒ–</h3><p>RedisTemplateå¯ä»¥æ¥æ”¶ä»»æ„Objectä½œä¸ºå€¼å†™å…¥Redisï¼š</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230225162208529.png" alt="image-20230225162208529"></p><p>åªä¸è¿‡å†™å…¥å‰ä¼šæŠŠObjectåºåˆ—åŒ–ä¸ºå­—èŠ‚å½¢å¼ï¼Œé»˜è®¤æ˜¯é‡‡ç”¨JDKåºåˆ—åŒ–ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230225162216346.png" alt="image-20230225162216346"></p><p>ç¼ºç‚¹ï¼š</p><ul><li>å¯è¯»æ€§å·®</li><li>å†…å­˜å ç”¨è¾ƒå¤§</li></ul><p>æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰RedisTemplateçš„åºåˆ—åŒ–æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory connectionFactory)</span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºRedisTemplateå¯¹è±¡</span></span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// è®¾ç½®è¿æ¥å·¥å‚</span></span><br><span class="line">        template.setConnectionFactory(connectionFactory);</span><br><span class="line">        <span class="comment">// åˆ›å»ºJSONåºåˆ—åŒ–å·¥å…·</span></span><br><span class="line">        <span class="type">GenericJackson2JsonRedisSerializer</span> <span class="variable">jsonRedisSerializer</span> <span class="operator">=</span> </span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">GenericJackson2JsonRedisSerializer</span>();</span><br><span class="line">        <span class="comment">// è®¾ç½®Keyçš„åºåˆ—åŒ–</span></span><br><span class="line">        template.setKeySerializer(RedisSerializer.string());</span><br><span class="line">        template.setHashKeySerializer(RedisSerializer.string());</span><br><span class="line">        <span class="comment">// è®¾ç½®Valueçš„åºåˆ—åŒ–</span></span><br><span class="line">        template.setValueSerializer(jsonRedisSerializer);</span><br><span class="line">        template.setHashValueSerializer(jsonRedisSerializer);</span><br><span class="line">        <span class="comment">// è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé‡‡ç”¨äº†JSONåºåˆ—åŒ–æ¥ä»£æ›¿é»˜è®¤çš„JDKåºåˆ—åŒ–æ–¹å¼ã€‚æœ€ç»ˆç»“æœå¦‚å›¾ï¼š</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230225162247608.png" alt="image-20230225162247608"></p><p>æ•´ä½“å¯è¯»æ€§æœ‰äº†å¾ˆå¤§æå‡ï¼Œå¹¶ä¸”èƒ½å°†Javaå¯¹è±¡è‡ªåŠ¨çš„åºåˆ—åŒ–ä¸ºJSONå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”æŸ¥è¯¢æ—¶èƒ½è‡ªåŠ¨æŠŠJSONååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ã€‚ä¸è¿‡ï¼Œå…¶ä¸­è®°å½•äº†åºåˆ—åŒ–æ—¶å¯¹åº”çš„classåç§°ï¼Œç›®çš„æ˜¯ä¸ºäº†æŸ¥è¯¢æ—¶å®ç°è‡ªåŠ¨ååºåˆ—åŒ–ã€‚è¿™ä¼šå¸¦æ¥é¢å¤–çš„å†…å­˜å¼€é”€ã€‚</p><h3 id="â˜ƒï¸4-4StringRedisTemplate"><a href="#â˜ƒï¸4-4StringRedisTemplate" class="headerlink" title="â˜ƒï¸4.4StringRedisTemplate"></a>â˜ƒï¸4.4StringRedisTemplate</h3><p>ä¸ºäº†èŠ‚çœå†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä½¿ç”¨JSONåºåˆ—åŒ–å™¨æ¥å¤„ç†valueï¼Œè€Œæ˜¯ç»Ÿä¸€ä½¿ç”¨Stringåºåˆ—åŒ–å™¨ï¼Œè¦æ±‚åªèƒ½å­˜å‚¨Stringç±»å‹çš„keyå’Œvalueã€‚å½“éœ€è¦å­˜å‚¨Javaå¯¹è±¡æ—¶ï¼Œæ‰‹åŠ¨å®Œæˆå¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p><p>å› ä¸ºå­˜å…¥å’Œè¯»å–æ—¶çš„åºåˆ—åŒ–åŠååºåˆ—åŒ–éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±å®ç°çš„ï¼ŒSpringDataRediså°±ä¸ä¼šå°†classä¿¡æ¯å†™å…¥Redisäº†ã€‚</p><p>è¿™ç§ç”¨æ³•æ¯”è¾ƒæ™®éï¼Œå› æ­¤SpringDataRediså°±æä¾›äº†RedisTemplateçš„å­ç±»ï¼šStringRedisTemplateï¼Œå®ƒçš„keyå’Œvalueçš„åºåˆ—åŒ–æ–¹å¼é»˜è®¤å°±æ˜¯Stringæ–¹å¼ã€‚</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230225163502334.png" alt="image-20230225163502334"></p><p>çœå»äº†æˆ‘ä»¬è‡ªå®šä¹‰RedisTemplateçš„åºåˆ—åŒ–æ–¹å¼çš„æ­¥éª¤ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"><span class="comment">// JSONåºåˆ—åŒ–å·¥å…·</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSaveUser</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;è™å“¥&quot;</span>, <span class="number">21</span>);</span><br><span class="line">    <span class="comment">// æ‰‹åŠ¨åºåˆ—åŒ–</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> mapper.writeValueAsString(user);</span><br><span class="line">    <span class="comment">// å†™å…¥æ•°æ®</span></span><br><span class="line">    stringRedisTemplate.opsForValue().set(<span class="string">&quot;user:200&quot;</span>, json);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æ•°æ®</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">jsonUser</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().get(<span class="string">&quot;user:200&quot;</span>);</span><br><span class="line">    <span class="comment">// æ‰‹åŠ¨ååºåˆ—åŒ–</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> mapper.readValue(jsonUser, User.class);</span><br><span class="line">    System.out.println(<span class="string">&quot;user1 = &quot;</span> + user1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -Redis -å­¦ä¹  -æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jsonFormatæ³¨è§£</title>
      <link href="/2023/02/07/jsonFormat%E6%B3%A8%E8%A7%A3/"/>
      <url>/2023/02/07/jsonFormat%E6%B3%A8%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="JsonFormatæ³¨è§£"><a href="#JsonFormatæ³¨è§£" class="headerlink" title="JsonFormatæ³¨è§£"></a>JsonFormatæ³¨è§£</h3><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230207194439027.png" alt="image-20230207194439027"></p><h3 id="1-é—®é¢˜"><a href="#1-é—®é¢˜" class="headerlink" title="1.é—®é¢˜"></a>1.é—®é¢˜</h3><p>åœ¨ç”¨Vueçš„ç»„ä»¶åº“ElementUiçš„æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨ï¼Œdatetimepicker,å‘é€ç»™åç«¯è¯·æ±‚æŠ¥400é”™è¯¯ï¼Œåç«¯ç”¨å®ä½“ç±»æ¥å—å‚æ•°ï¼Œæ—¥æœŸæ ¼å¼ä¸ºLocalDateTimeç±»å‹ï¼Œæœ¬æ¥æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä½†æ˜¯ç”±äºLocalDateTimeå¸¦Tï¼Œå› æ­¤å‰ç«¯ä¼šæ¥å—åˆ°å¸¦Tçš„æ—¶é—´æ ¼å¼ï¼Œä¸ç¾è§‚ï¼Œå› æ­¤ï¼Œæˆ‘è®¾ç½®JsonFormatæŒ‡å®šåç«¯ä¼ è¾“ç»™å‰ç«¯çš„å‚æ•°ä¸ºyyyy-MM-dd HH:mm:ssè¿™ä¸ªæ ¼å¼ã€‚Okï¼Œå‰ç«¯åˆ—è¡¨æ ¼å¼ç¡®å®å·²ç»æ”¹å˜ï¼Œä½†æ˜¯å½“æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨å†æ¬¡å‘é€axiosè¯·æ±‚æ—¶ï¼ŒæŠ¥400é”™è¯¯ï¼Œè¯´æ˜æ–¹æ³•æˆ–è€…å‚æ•°ç±»å‹ä¸åŒ¹é…ï¼Œå°±æ˜¯åŠ äº†æ³¨è§£åæ‰ä¸åŒ¹é…ï¼Œå› æ­¤æˆ‘å»uiç»„ä»¶åº“å‘ç°äº†ä¸€ä¸ªæ—¥æœŸæ—¶é—´é€‰æ‹©å™¨å¯ä»¥è®¾ç½®çš„å±æ€§ã€‚</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230207194941580.png" alt="image-20230207194941580"></p><h3 id="2-æ³¨æ„äº‹é¡¹"><a href="#2-æ³¨æ„äº‹é¡¹" class="headerlink" title="2.æ³¨æ„äº‹é¡¹"></a>2.æ³¨æ„äº‹é¡¹</h3><p>æ³¨æ„æ˜¯ç¬¬äºŒä¸ªï¼Œæˆ‘æœ¬æ¥è®¾ç½®äº†ç¬¬ä¸€ä¸ªï¼Œç»“æœå¡äº†å¥½ä¹…ï¼Œæˆ‘çœ‹ç¬¬ä¸€ä¸ªé»˜è®¤å€¼å°±æ˜¯yyyy-MM-dd HH:mm:ssè¿™ç§ï¼Œç»“æœå®ƒæ˜¯æ˜¾ç¤ºçš„æ ¼å¼ï¼Œä¼ å€¼æ ¼å¼æ˜¯ç¬¬äºŒä¸ªï¼Œå› ä¸ºç¬¬äºŒä¸ªé»˜è®¤æ˜¯Dateç±»å‹ï¼ŒæŒ‡å®šä¸ºyyyy-MM-dd HH:mm:sså°±å¯ä»¥äº†ã€‚</p><p>é—®é¢˜è§£å†³ï¼šå‰ç«¯æ—¢å¯ä»¥ç›´æ¥æ”¶åˆ°yyyy-MM-dd HH:mm:ss,åç«¯ä¹Ÿå¯ä»¥ç”¨LocalDateTimeæ¥å—ï¼Œä¹‹æ‰€ä»¥ä¸è®¾ç½®stringæ¥å—æ—¥æœŸï¼Œæ˜¯å› ä¸ºï¼Œæˆ‘ä¸šåŠ¡é€»è¾‘ä¸­æœ‰åŠ å¤©æ•°çš„é€»è¾‘ï¼Œåªèƒ½ç”¨æ—¥æœŸç±»çš„plusæ–¹æ³•æ·»åŠ ã€‚</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230207195236767.png" alt="image-20230207195236767"></p><p>æˆ‘æœ¬æ¥åœ¨å…¨å±€è®¾ç½®äº†jsonæ ¼å¼åŒ–çš„ï¼Œç»“æœç›´æ¥å¤±æ•ˆäº†ï¼Œæ‰€ä»¥åœ¨å®ä½“ç±»ä¸Šçš„å±æ€§ä¸ŠåŠ äº†å•ç‹¬çš„jsonFormatã€‚</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230207195329224.png" alt="image-20230207195329224"></p><h3 id="3-æ€»ç»“å’Œå»ºè®®-é‡ç‚¹"><a href="#3-æ€»ç»“å’Œå»ºè®®-é‡ç‚¹" class="headerlink" title="3.æ€»ç»“å’Œå»ºè®®(é‡ç‚¹)"></a>3.æ€»ç»“å’Œå»ºè®®(é‡ç‚¹)</h3><p>å»ºè®®è¿˜æ˜¯æœ‰éœ€è¦çš„å®ä½“ç±»å•ç‹¬åŠ ä¸Šæ³¨è§£ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºå•¥å…¨å±€é…ç½®å¤±æ•ˆäº†ã€‚</p><p>@DateTimeFormatæ˜¯ç”¨äºæ¥å—å‰ç«¯å‘é€çš„æ—¶é—´æ ¼å¼</p><p>@JsonFormatæ˜¯åç«¯ä¼ è¾“ç»™å‰ç«¯æŒ‡å®šçš„æ—¶é—´æ ¼å¼</p><p>ä¸€å®šè¦åŠ ä¸ŠGMT+8ï¼Œä¸ç„¶åˆ°æ—¶å€™ä½ ä¸šåŠ¡æŸ¥è¯¢å˜æˆæ ¼æ—å¨æ²»æ—¶é—´ï¼Œå°‘åŒ—äº¬æ—¶é—´8å°æ—¶ã€‚</p><p>å»ºè®®å•ç‹¬ç”¨æ³¨è§£çš„éƒ½åŠ ä¸Šï¼Œæ•°æ®åº“ä¹Ÿè®¾ç½®å¥½ï¼ˆå½“ç„¶è¿™å¾—çœ‹mysql5.7å’Œmysql8ä¸ä¸€æ ·)</p><p>ç»„ä»¶åº“è™½å¥½ï¼Œè¿˜æ˜¯å¾—çœ‹ä»”ç»†å†ç”¨ï¼Œè¦æ˜¯vue3ç›´æ¥elementplusæˆ–è€…AntDesign(Vueç‰ˆ)</p>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -æ³¨è§£ -Bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitHubç¾åŒ–æ•™ç¨‹</title>
      <link href="/2023/01/15/GitHub%E7%BE%8E%E5%8C%96%E6%95%99%E7%A8%8B/"/>
      <url>/2023/01/15/GitHub%E7%BE%8E%E5%8C%96%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="GitHubç¾åŒ–æ•™ç¨‹"><a href="#GitHubç¾åŒ–æ•™ç¨‹" class="headerlink" title="GitHubç¾åŒ–æ•™ç¨‹"></a>GitHubç¾åŒ–æ•™ç¨‹</h2><h3 id="1-ç¾åŒ–åçš„é¡µé¢æ•ˆæœ"><a href="#1-ç¾åŒ–åçš„é¡µé¢æ•ˆæœ" class="headerlink" title="1.ç¾åŒ–åçš„é¡µé¢æ•ˆæœ"></a>1.ç¾åŒ–åçš„é¡µé¢æ•ˆæœ</h3><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230115115410800.png" alt="image-20230115115410800"></p><h3 id="2-æ•™ç¨‹"><a href="#2-æ•™ç¨‹" class="headerlink" title="2.æ•™ç¨‹"></a>2.æ•™ç¨‹</h3><h4 id="2-1å»ºä¸€ä¸ªå’Œç”¨æˆ·åç›¸åŒçš„GitHubä»“åº“"><a href="#2-1å»ºä¸€ä¸ªå’Œç”¨æˆ·åç›¸åŒçš„GitHubä»“åº“" class="headerlink" title="2.1å»ºä¸€ä¸ªå’Œç”¨æˆ·åç›¸åŒçš„GitHubä»“åº“"></a>2.1å»ºä¸€ä¸ªå’Œç”¨æˆ·åç›¸åŒçš„GitHubä»“åº“</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230115120545123.png" alt="image-20230115120545123"></p><p>å› ä¸ºæˆ‘å·²ç»å»ºè¿‡äº†ï¼Œæ‰€ä»¥æç¤ºä»“åº“é‡å¤å­˜åœ¨ï¼Œä½ ä»¬å¯ä»¥ç›´æ¥å»ºï¼Œ<strong>è®°å¾—æŠŠAdd a README file æ‰“é’©</strong>ï¼Œè‡ªåŠ¨ç”Ÿæˆmdæ–‡ä»¶ã€‚</p><h4 id="2-2åœ¨ç”¨æˆ·åä»“åº“çš„README-mdæ–‡ä»¶ä¸­æ·»åŠ å†…å®¹"><a href="#2-2åœ¨ç”¨æˆ·åä»“åº“çš„README-mdæ–‡ä»¶ä¸­æ·»åŠ å†…å®¹" class="headerlink" title="2.2åœ¨ç”¨æˆ·åä»“åº“çš„README.mdæ–‡ä»¶ä¸­æ·»åŠ å†…å®¹"></a>2.2åœ¨ç”¨æˆ·åä»“åº“çš„README.mdæ–‡ä»¶ä¸­æ·»åŠ å†…å®¹</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€å¼ å›¾ç‰‡ï¼šé€šè¿‡APIå‘é€è¯·æ±‚è°ƒç”¨çš„ï¼Œæ¯å°æ—¶è¶…è¿‡æ¬¡æ•°ï¼Œä¼šæŠ¥é”™ï¼Œå¯¼è‡´å›¾ç‰‡ä¸¢å¤±ï¼Œä¸å®šæœŸå»æŸ¥çœ‹ä¸€ä¸‹ï¼Œæ›´æ–°ä¸‹çŠ¶æ€ã€‚</span><br><span class="line">[<span class="string">![luoye6&#x27;s GitHub stats</span>](<span class="link">https://github-readme-stats.vercel.app/api?username=luoye6&amp;show_icons=true&amp;theme=radical</span>)](<span class="link">https://luoye6.github.io/</span>)</span><br><span class="line">æ ¼å¼:[<span class="string">![ç”¨æˆ·å&#x27;s GitHub stats</span>](<span class="link">https://github-readme-stats.vercel.app/api?username=æ‚¨çš„ç”¨æˆ·å&amp;show_icons=true&amp;theme=radical</span>)](<span class="link">link-urlä¹Ÿå°±æ˜¯ç‚¹å‡»å›¾ç‰‡è·³è½¬çš„é“¾æ¥ï¼Œæˆ‘è®¾ç½®çš„æ˜¯æˆ‘çš„ä¸ªäººåšå®¢</span>)</span><br></pre></td></tr></table></figure><p><strong>show_icons&#x3D;true&amp;theme&#x3D;radicaléƒ½æ˜¯é¢å¤–çš„å±æ€§é…ç½®å¯ä»¥å»æ‰</strong></p><p><strong>themeæ ·å¼é€‰æ‹©ï¼šdark,radical,merko,gruvbox,tokyonight,onedark,cobaltä¸»é¢˜</strong></p><p><strong>å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©ä¸»é¢˜æ ·å¼</strong></p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">ç¬¬äºŒå¼ å›¾ç‰‡:é€šè¿‡APIå‘é€è¯·æ±‚è°ƒç”¨çš„ï¼Œæ¯å°æ—¶è¶…è¿‡æ¬¡æ•°ï¼Œä¼šæŠ¥é”™ï¼Œå¯¼è‡´å›¾ç‰‡ä¸¢å¤±ï¼Œä¸å®šæœŸå»æŸ¥çœ‹ä¸€ä¸‹ï¼Œæ›´æ–°ä¸‹çŠ¶æ€ã€‚</span><br><span class="line">[<span class="string">![Top Langs</span>](<span class="link">https://github-readme-stats.vercel.app/api/top-langs/?username=luoye6</span>)](<span class="link">https://luoye6.github.io/</span>)</span><br><span class="line">[<span class="string">![Top Langs</span>](<span class="link">https://github-readme-stats.vercel.app/api/top-langs/?username=æ‚¨çš„ç”¨æˆ·å</span>)](<span class="link">link-urlä¹Ÿå°±æ˜¯ç‚¹å‡»å›¾ç‰‡è·³è½¬çš„é“¾æ¥ï¼Œæˆ‘è®¾ç½®çš„æ˜¯æˆ‘çš„ä¸ªäººåšå®¢</span>)</span><br></pre></td></tr></table></figure><p><strong>ä¸»é¢˜è¯­è¨€å¡ç‰‡å¯ä»¥è·Ÿä»¥ä¸‹ä¿®é¥°:</strong><br><code>&amp;layout=compact</code> å‚æ•°æ¥æ”¹å˜å¡ç‰‡çš„æ ·å¼</p><p><code>?hide=language1,language2</code> å‚æ•°æ¥éšè—æŒ‡å®šçš„è¯­è¨€</p><h4 id="2-3è‡ªå®šä¹‰å›¾ç‰‡"><a href="#2-3è‡ªå®šä¹‰å›¾ç‰‡" class="headerlink" title="2.3è‡ªå®šä¹‰å›¾ç‰‡"></a>2.3è‡ªå®šä¹‰å›¾ç‰‡</h4><p><strong>ä½ å¯èƒ½é¢å¤–æƒ³æ·»åŠ è‡ªå®šä¹‰å›¾ç‰‡ï¼Œå¯ä»¥æ ¹æ®ä»¥ä¸‹æ•™ç¨‹æ¥åšï¼Œå¦‚æœä½ ç†Ÿæ‚‰markdownçš„è¯­æ³•ï¼Œé‚£ä¹ˆæ·»åŠ å›¾ç‰‡åº”è¯¥æ˜¯å¾ˆç®€å•çš„äº‹ã€‚ä½†æˆ‘è¿™é‡Œç»Ÿä¸€æ•™ä¸‹ã€‚</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230115120830941.png" alt="image-20230115120830941"></p><p>ä½ å¯èƒ½ä¼šæƒ³æ·»åŠ LeetCodeè§£é¢˜æ•°é‡ï¼Œæˆ–è€…æ˜¯æäº¤æ¬¡æ•°ç­‰è‡ªå®šä¹‰å›¾ç‰‡ã€‚å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ•™ç¨‹ã€‚</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">[<span class="string">![image</span>](<span class="link">https://github.com/luoye6/luoye6/blob/main/img/LeetCode1.png</span>)](<span class="link">https://luoye6.github.io/</span>)</span><br><span class="line">[<span class="string">![image</span>](<span class="link">å›¾ç‰‡çš„é“¾æ¥</span>)](<span class="link">link-urlç‚¹å‡»å›¾ç‰‡è·³è½¬çš„é“¾æ¥</span>)</span><br></pre></td></tr></table></figure><p>ä½ å¯èƒ½æ²¡æœ‰å›¾åºŠæ¥å½“åšå›¾ç‰‡çš„ä»“åº“ï¼Œæœ‰ä»¥ä¸‹ä¸¤ä¸ªé€‰é¡¹ï¼š</p><p>1.é˜¿é‡Œäº‘ï¼Œè…¾è®¯ç­‰å¹³å°çš„å›¾åºŠ(è´­ä¹°æœåŠ¡)</p><p>2.GitHub(å›¾åºŠ)</p><p><strong>æˆ‘å»ºè®®ç›´æ¥åˆ›å»ºGitHubå›¾åºŠ</strong></p><p>ä¾ç„¶åœ¨å’Œç”¨æˆ·åç›¸åŒçš„ä»“åº“ä¸‹</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230115121254314.png" alt="image-20230115121254314"></p><p>ç‚¹å‡»Add File ç„¶åé€‰æ‹©ç¬¬äºŒä¸ªé€‰é¡¹ upload é‡æ–°é…ç½®</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230115121333975.png" alt="image-20230115121333975"></p><p>å°†éœ€è¦çš„å›¾ç‰‡å…ˆæ”¾åœ¨æ¡Œé¢çš„æ–‡ä»¶å¤¹ä¸­ï¼Œ<strong>ç„¶åå°†æ–‡ä»¶å¤¹æ‰˜å…¥ä¸Šæ–¹å›¾ç‰‡çš„åŒºåŸŸå³å¯</strong>ï¼Œç‚¹å‡»æäº¤è¯·æ±‚ã€‚</p><p>ç„¶åè¿›å…¥åˆšåˆšåˆ›å»ºçš„imgæ–‡ä»¶å¤¹(GitHubä¸­)</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230115121458214.png" alt="image-20230115121458214"></p><p>åˆ†åˆ«ç‚¹å‡»ä¸¤ä¸ªå›¾ç‰‡</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230115121538212.png" alt="image-20230115121538212"></p><p>è·å–åˆ°åœ°å€æ çš„å›¾ç‰‡é“¾æ¥ï¼Œç„¶åå°±å¯ä»¥æ·»åŠ è‡ªå®šä¹‰å›¾ç‰‡å’¯ï¼</p><p>é™„èµ ä¸€äº›emoilå½“åšåˆ†å‰²çº¿çš„ä¿®é¥°ç¬¦ã€‚</p><p>â˜€ï¸ â­ â˜ï¸â›…â›ˆï¸ ï¸ ï¸ ï¸ ï¸ ï¸ ï¸ ï¸ ï¸ ï¸ â˜‚ï¸â˜”âš¡â„ï¸â˜ƒï¸â›„â˜„ï¸</p><p>â™ ï¸â™¥ï¸â™¦ï¸â™£ï¸ â™¿ âš ï¸ â›” â˜¢ï¸â˜£ï¸â¬†ï¸â†—ï¸â¡ï¸â†˜ï¸â¬‡ï¸â†™ï¸â¬…ï¸â†–ï¸â†•ï¸â†”ï¸â†©ï¸â†ªï¸â¤´ï¸â¤µï¸</p><p>â˜˜ï¸â˜˜ï¸â›½ âš“â›µ âœˆ</p><p>é™„ä»¶ï¼šæˆ‘çš„ä¸ªäººåšå®¢(<a href="https://luoye6.github.io/)%EF%BC%8C%E9%87%8C%E9%9D%A2%E6%9C%89%E5%89%8D%E5%90%8E%E7%AB%AF%E7%9A%84%E7%AC%94%E8%AE%B0%E8%BF%98%E6%9C%89GitHub%E7%BE%8E%E5%8C%96%E6%95%99%E7%A8%8B%E3%80%82%E5%A6%82%E6%9E%9C%E6%9C%89%E7%BE%8E%E5%8C%96%E6%95%99%E7%A8%8B%E7%9A%84%E7%96%91%E9%97%AE%E6%88%96%E8%80%85%E8%87%AA%E5%B7%B1%E6%83%B3%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E5%8F%AF%E4%BB%A5%E5%9C%A8%E8%AF%84%E8%AE%BA%E5%8C%BA%E7%95%99%E8%A8%80%E6%88%96%E8%80%85%E5%85%B3%E6%B3%A8%E4%B8%8B%E6%88%91%EF%BC%8C%E7%84%B6%E5%90%8E%E7%A7%81%E4%BF%A1%E3%80%82">https://luoye6.github.io/)ï¼Œé‡Œé¢æœ‰å‰åç«¯çš„ç¬”è®°è¿˜æœ‰GitHubç¾åŒ–æ•™ç¨‹ã€‚å¦‚æœæœ‰ç¾åŒ–æ•™ç¨‹çš„ç–‘é—®æˆ–è€…è‡ªå·±æƒ³æ­å»ºä¸ªäººåšå®¢å¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€æˆ–è€…å…³æ³¨ä¸‹æˆ‘ï¼Œç„¶åç§ä¿¡ã€‚</a></p><p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©çš„è¯ï¼Œå¯ä»¥ç»™åšä¸»ç‚¹ä¸ªèµï¼Œæ„Ÿè°¢~</p>]]></content>
      
      
      <categories>
          
          <category> -GitHub </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -GitHub -ç¾åŒ– -æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactå­¦ä¹ æ€»ç»“(1)</title>
      <link href="/2023/01/13/React%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"/>
      <url>/2023/01/13/React%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Reactå­¦ä¹ æ€»ç»“"><a href="#Reactå­¦ä¹ æ€»ç»“" class="headerlink" title="Reactå­¦ä¹ æ€»ç»“"></a>Reactå­¦ä¹ æ€»ç»“</h1><h2 id="1-Reactå¿«é€Ÿä¸Šæ‰‹"><a href="#1-Reactå¿«é€Ÿä¸Šæ‰‹" class="headerlink" title="1.Reactå¿«é€Ÿä¸Šæ‰‹"></a>1.Reactå¿«é€Ÿä¸Šæ‰‹</h2><h3 id="1-1åŸºç¡€æ¡ˆä¾‹"><a href="#1-1åŸºç¡€æ¡ˆä¾‹" class="headerlink" title="1.1åŸºç¡€æ¡ˆä¾‹"></a>1.1åŸºç¡€æ¡ˆä¾‹</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡ä¸€ä¸ªå®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-dom,ç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react-dom.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥Babel,ç”¨äºå°†es6è½¬åŒ–ä¸ºes5 ç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/babel.min.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ­¤å¤„ä¸€å®šè¦å†™babel</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1.åˆ›å»ºè™šæ‹ŸDOM</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="variable constant_">VDOM</span> = <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello,React<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span> </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ­¤å¤„ä¸€å®šä¸è¦å†™å¼•å·,å› ä¸ºä¸æ˜¯å­—ç¬¦ä¸²</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2.æ¸²æŸ“è™šæ‹ŸDOMåˆ°é¡µé¢</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="variable constant_">VDOM</span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="1-2JSXè¯­æ³•è§„åˆ™"><a href="#1-2JSXè¯­æ³•è§„åˆ™" class="headerlink" title="1.2JSXè¯­æ³•è§„åˆ™"></a>1.2JSXè¯­æ³•è§„åˆ™</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.title</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡ä¸€ä¸ªå®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-dom,ç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react-dom.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥Babel,ç”¨äºå°†es6è½¬åŒ–ä¸ºes5 ç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/babel.min.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> myId = <span class="string">&quot;xiaobaitiao&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> myData = <span class="string">&quot;Hello,World&quot;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> <span class="variable constant_">VDOM</span> = (</span></span><br><span class="line"><span class="language-javascript">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">            <span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;&#123;myId&#125;&quot;</span> <span class="attr">className</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> &#x27;<span class="attr">white</span>&#x27;, <span class="attr">fontSize:</span> &#x27;<span class="attr">30px</span>&#x27; &#125;&#125;&gt;</span>&#123;myData&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">            <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello,World<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">            <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>/&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">        )</span></span><br><span class="line"><span class="language-javascript">       <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="variable constant_">VDOM</span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">       <span class="comment">//    jsxè¯­æ³•è§„åˆ™:</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//             1.å®šäºè™šæ‹ŸDOMæ—¶ï¼Œä¸è¦å†™å¼•å·</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//             2.æ ‡ç­¾ä¸­å¦‚æœè¦æ··å…¥JSè¡¨è¾¾å¼è¦ç”¨&#123;&#125;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//             3.æ ·å¼çš„ç±»åä¸è¦ç”¨class,è¦ç”¨className</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//             4.å†…æ•›æ ·å¼ï¼Œè¦ç”¨style=&#123;&#123;key:value&#125;&#125;çš„å½¢å¼å»å†™ å¦‚æœvalueçš„å€¼æ˜¯ä¸€ä¸ªå˜é‡ä¸ç”¨åŠ å¼•å·ï¼Œå¦‚æœæ˜¯å¸¸é‡è¦åŠ å¼•å·</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//             5.åªæœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//             6.æ ‡ç­¾å¿…é¡»æ˜¯é—­åˆçš„</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//             7.æ ‡ç­¾é¦–å­—æ¯</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//                 (1).è‹¥å°å†™å­—æ¯å¼€å¤´,åˆ™å°†è¯¥æ ‡ç­¾è½¬ä¸ºhtmlåŒåå…ƒç´ ï¼Œè‹¥htmlæ— è¯¥æ ‡ç­¾å¯¹åº”çš„åŒåå…ƒç´ ,åˆ™æŠ¥é”™</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//                 (2).è‹¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œreactå°±å»æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ï¼Œè‹¥ç»„ä»¶æ²¡æœ‰å®šä¹‰ï¼Œåˆ™æŠ¥é”™</span></span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">       </span><br><span class="line">        </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-2-1JSXå°ç»ƒä¹ "><a href="#1-2-1JSXå°ç»ƒä¹ " class="headerlink" title="1.2.1JSXå°ç»ƒä¹ "></a>1.2.1JSXå°ç»ƒä¹ </h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡ä¸€ä¸ªå®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-dom,ç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react-dom.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥Babel,ç”¨äºå°†es6è½¬åŒ–ä¸ºes5 ç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/babel.min.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> title = <span class="string">&quot;å‰ç«¯JSæ¡†æ¶åˆ—è¡¨&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span>  struct = [<span class="string">&#x27;Angular&#x27;</span>,<span class="string">&#x27;React&#x27;</span>,<span class="string">&#x27;Vue&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// react ä¼šè‡ªåŠ¨éå†æ•°ç»„ï¼Œä½†æ˜¯ä¸ä¼šéå†å¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ­¤å¤„ä¸€å®šè¦å†™babel</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1.åˆ›å»ºè™šæ‹ŸDOM</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> <span class="variable constant_">VDOM</span> =   (</span></span><br><span class="line"><span class="language-javascript">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">            <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;title&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    struct.map((num,index) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        return <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;num&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    &#125;)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>    </span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">    )</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// æ­¤å¤„ä¸€å®šä¸è¦å†™å¼•å·,å› ä¸ºä¸æ˜¯å­—ç¬¦ä¸²</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2.æ¸²æŸ“è™šæ‹ŸDOMåˆ°é¡µé¢</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="variable constant_">VDOM</span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="1-3å‡½æ•°å¼ç»„ä»¶"><a href="#1-3å‡½æ•°å¼ç»„ä»¶" class="headerlink" title="1.3å‡½æ•°å¼ç»„ä»¶"></a>1.3å‡½æ•°å¼ç»„ä»¶</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡ä¸€ä¸ªå®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-dom,ç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react-dom.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥Babel,ç”¨äºå°†es6è½¬åŒ–ä¸ºes5 ç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/babel.min.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1.åˆ›å»ºå‡½æ•°å¼ç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ‘æ˜¯ç”¨å‡½æ•°å®šä¹‰çš„ç»„ä»¶(é€‚ç”¨äºç®€å•ç»„ä»¶)<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2.æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        æ‰§è¡ŒReactDOM.renderåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            1.Reactè§£æç»„ä»¶æ ‡ç­¾,æ‰¾åˆ°äº†MyComponentç»„ä»¶</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            2.å‘ç°ç»„ä»¶æ˜¯ä½¿ç”¨å‡½æ•°å®šä¹‰çš„ï¼Œéšåè°ƒç”¨è¯¥å‡½æ•°ï¼Œå°†è¿”å›çš„è™šæ‹ŸDOMè½¬ä¸ºçœŸå®DOMï¼Œéšåå‘ˆç°åœ¨é¡µé¢ä¸­</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    */</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="1-4ç»„ä»¶å±æ€§ä¹‹state"><a href="#1-4ç»„ä»¶å±æ€§ä¹‹state" class="headerlink" title="1.4ç»„ä»¶å±æ€§ä¹‹state"></a>1.4ç»„ä»¶å±æ€§ä¹‹state</h3><h4 id="1-4-1ç±»å¼ç»„ä»¶"><a href="#1-4-1ç±»å¼ç»„ä»¶" class="headerlink" title="1.4.1ç±»å¼ç»„ä»¶"></a>1.4.1ç±»å¼ç»„ä»¶</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡ä¸€ä¸ªå®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-dom,ç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react-dom.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥Babel,ç”¨äºå°†es6è½¬åŒ–ä¸ºes5 ç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/babel.min.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1.åˆ›å»ºç±»å¼ç»„ä»¶ ä¸€å®šè¦å…ˆç»§æ‰¿React.Component</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ‘æ˜¯ç”¨ç±»å®šä¹‰çš„ç»„ä»¶(é€‚ç”¨äºå¤æ‚ç»„ä»¶çš„å®šä¹‰)<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2.æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span>/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-4-2åˆå§‹åŒ–state"><a href="#1-4-2åˆå§‹åŒ–state" class="headerlink" title="1.4.2åˆå§‹åŒ–state"></a>1.4.2åˆå§‹åŒ–state</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡ä¸€ä¸ªå®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-dom,ç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react-dom.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥Babel,ç”¨äºå°†es6è½¬åŒ–ä¸ºes5 ç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/babel.min.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 1.åˆ›å»ºç±»å¼ç»„ä»¶ ç±»åè®°å¾—å¤§å†™</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Weather</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">super</span>(props);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">state</span> = &#123; <span class="attr">isHot</span>: <span class="literal">false</span> &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//è§£å†³changeWeatherä¸­thisçš„æŒ‡å‘é—®é¢˜</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">changeWeather</span> = <span class="variable language_">this</span>.<span class="property">changeWeather</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">changeWeather</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// changeWeatheræ”¾åœ¨å“ªé‡Œ? Weatherçš„åŸå‹å¯¹è±¡ä¸Šï¼Œä¾›å®ä¾‹é€‚ç”¨</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// ç”±äºchangeWeatheræ˜¯ä½œä¸ºonClickçš„å›è°ƒï¼Œæ‰€ä»¥ä¸æ˜¯é€šè¿‡å®ä¾‹è°ƒç”¨çš„ï¼Œæ˜¯ç›´æ¥è°ƒç”¨</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// ç±»ä¸­çš„æ–¹æ³•é»˜è®¤å¼€å¯äº†å±€éƒ¨çš„ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥changeWeatherä¸­çš„thisæ˜¯underfined</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// è·å–åŸæ¥çš„isHotå€¼</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> isHot = <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">isHot</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// æ³¨æ„:çŠ¶æ€å¿…é¡»é€šè¿‡setStateè¿›è¡Œä¿®æ”¹ ä¸èƒ½ç›´æ¥ä¿®æ”¹ ä¾‹å¦‚:this.state.isHot = !this.state.isHot</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">isHot</span>:!isHot&#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> &#123; isHot &#125; = <span class="variable language_">this</span>.<span class="property">state</span> <span class="comment">// è§£æ„èµ‹å€¼</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// å¦‚æœè¦ç»‘å®šäº‹ä»¶ onclick-&gt;onClick onblur-&gt;onBlur å¤§å†™</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;this.changeWeather&#125;</span>&gt;</span>ä»Šå¤©å¤©æ°”å¾ˆ&#123;isHot ? &#x27;ç‚çƒ­&#x27; : &#x27;å‡‰çˆ½&#x27;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 2.æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Weather</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-4-3stateçš„ç®€å†™å½¢å¼"><a href="#1-4-3stateçš„ç®€å†™å½¢å¼" class="headerlink" title="1.4.3stateçš„ç®€å†™å½¢å¼"></a>1.4.3stateçš„ç®€å†™å½¢å¼</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡ä¸€ä¸ªå®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-dom,ç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react-dom.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥Babel,ç”¨äºå°†es6è½¬åŒ–ä¸ºes5 ç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/babel.min.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 1.åˆ›å»ºç±»å¼ç»„ä»¶ ç±»åè®°å¾—å¤§å†™</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Weather</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// state å¯ä»¥ç›´æ¥å†™åœ¨å¤–é¢ åˆå§‹åŒ–çŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">            state = &#123;<span class="attr">isHot</span>:<span class="literal">false</span>,<span class="attr">wind</span>:<span class="string">&#x27;å¾®é£&#x27;</span>&#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// è‡ªå®šä¹‰æ–¹æ³•å†™æˆèµ‹å€¼è¯­å¥åŠ ä¸Šç®­å¤´å‡½æ•°çš„å½¢å¼ï¼Œç®­å¤´å‡½æ•°æœ¬èº«å¹¶æ²¡æœ‰this,æ‰€ä»¥å®ƒå‘å¤–å»¶ä¼¸ï¼Œæ‰¾åˆ°this,ä¹Ÿå°±æ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">            changeWeather = <span class="function">()=&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> isHot = <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">isHot</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">isHot</span>:!isHot&#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> &#123; isHot &#125; = <span class="variable language_">this</span>.<span class="property">state</span> <span class="comment">// è§£æ„èµ‹å€¼</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;this.changeWeather&#125;</span>&gt;</span>ä»Šå¤©å¤©æ°”å¾ˆ&#123;isHot ? &#x27;ç‚çƒ­&#x27; : &#x27;å‡‰çˆ½&#x27;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 2.æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Weather</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="1-5ç»„ä»¶å±æ€§ä¹‹props"><a href="#1-5ç»„ä»¶å±æ€§ä¹‹props" class="headerlink" title="1.5ç»„ä»¶å±æ€§ä¹‹props"></a>1.5ç»„ä»¶å±æ€§ä¹‹props</h3><h4 id="1-5-1propsåŸºæœ¬ä½¿ç”¨"><a href="#1-5-1propsåŸºæœ¬ä½¿ç”¨" class="headerlink" title="1.5.1propsåŸºæœ¬ä½¿ç”¨"></a>1.5.1propsåŸºæœ¬ä½¿ç”¨</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react-dom.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/babel.min.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/babel&#x27;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// åˆ›å»ºç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> &#123;name,age,sex&#125; = <span class="variable language_">this</span>.<span class="property">props</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">                    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å§“å:&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å¹´é¾„:&#123;age&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ€§åˆ«:&#123;sex&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> p = &#123;<span class="attr">name</span>:<span class="string">&#x27;å°çº¢&#x27;</span>,<span class="attr">age</span>:<span class="string">&#x27;22&#x27;</span>,<span class="attr">sex</span>:<span class="string">&#x27;å¥³&#x27;</span>&#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">&quot;å°ç™½&quot;</span> <span class="attr">age</span>=<span class="string">&quot;18&quot;</span> <span class="attr">sex</span>=<span class="string">&quot;ç”·&quot;</span> /&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">&quot;å°é»‘&quot;</span> <span class="attr">age</span>=<span class="string">&quot;28&quot;</span> <span class="attr">sex</span>=<span class="string">&quot;ç”·&quot;</span> /&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test1&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">&quot;å°å¼ &quot;</span> <span class="attr">age</span>=<span class="string">&quot;8&quot;</span> <span class="attr">sex</span>=<span class="string">&quot;ç”·&quot;</span> /&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test2&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åŸç”Ÿjsä¸èƒ½ç”¨å±•å¼€è¿ç®—ç¬¦å±•å¼€å¯¹è±¡ï¼Œåªèƒ½å¤åˆ¶å¯¹è±¡ï¼Œä½†åœ¨babelå’Œreactçš„å…±åŒä½œç”¨ä¸‹ï¼Œå±•å¼€è¿ç®—ç¬¦å¯ä»¥å±•å¼€å¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> &#123;<span class="attr">...p</span>&#125;/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test3&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-5-2å±•å¼€é¢„ç®—ç¦å¤ä¹ "><a href="#1-5-2å±•å¼€é¢„ç®—ç¦å¤ä¹ " class="headerlink" title="1.5.2å±•å¼€é¢„ç®—ç¦å¤ä¹ "></a>1.5.2å±•å¼€é¢„ç®—ç¦å¤ä¹ </h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> arr1 = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> arr2 = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>]</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(...arr1); <span class="comment">//å±•å¼€ä¸€ä¸ªæ•°ç»„</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> arr3 = [...arr1, ...arr2]<span class="comment">//è¿æ¥æ•°ç»„</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åœ¨å‡½æ•°ä¸­ä½¿ç”¨</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">...numbers</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> numbers.<span class="title function_">reduce</span>(<span class="function">(<span class="params">preValue, currentValue</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> preValue + currentValue</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ„é€ å­—é¢é‡å¯¹è±¡æ—¶ä½¿ç”¨å±•å¼€è¯­æ³•</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;tom&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> person2 = &#123; ...person &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//console.log(...person); //æŠ¥é”™ï¼Œå±•å¼€è¿ç®—ç¬¦ä¸èƒ½å±•å¼€å¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">        person.<span class="property">name</span> = <span class="string">&#x27;jerry&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(person2);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(person);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åˆå¹¶ä¿®æ”¹</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> person3 = &#123; ...person, <span class="attr">name</span>: <span class="string">&#x27;jack&#x27;</span>, <span class="attr">address</span>: <span class="string">&quot;åœ°çƒ&quot;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(person3);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-5-3å¯¹propsè¿›è¡Œé™åˆ¶"><a href="#1-5-3å¯¹propsè¿›è¡Œé™åˆ¶" class="headerlink" title="1.5.3å¯¹propsè¿›è¡Œé™åˆ¶"></a>1.5.3å¯¹propsè¿›è¡Œé™åˆ¶</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react-dom.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/babel.min.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥prop-types,ç”¨äºå¯¹ç»„ä»¶æ ‡ç­¾å±æ€§è¿›è¡Œé™åˆ¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/prop-types.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>  <span class="attr">type</span>=<span class="string">&#x27;text/babel&#x27;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// åˆ›å»ºç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> &#123;name,age,sex&#125; = <span class="variable language_">this</span>.<span class="property">props</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">                    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å§“å:&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å¹´é¾„:&#123;age+1&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ€§åˆ«:&#123;sex&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">           </span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//å¯¹æ ‡ç­¾å±æ€§è¿›è¡Œç±»å‹ï¼Œå¿…è¦æ€§çš„é™åˆ¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Person</span>.<span class="property">propTypes</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">name</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>, <span class="comment">//é™åˆ¶nameå¿…ä¼ ï¼Œä¸”ä¸ºå­—ç¬¦ä¸²</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">sex</span>:<span class="title class_">PropTypes</span>.<span class="property">string</span>,<span class="comment">//é™åˆ¶sexä¸ºå­—ç¬¦ä¸²</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">age</span>:<span class="title class_">PropTypes</span>.<span class="property">number</span>,<span class="comment">//é™åˆ¶ageä¸ºæ•°å€¼</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">speak</span>:<span class="title class_">PropTypes</span>.<span class="property">func</span>,<span class="comment">//é™åˆ¶speakä¸ºå‡½æ•°</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æŒ‡å®šé»˜è®¤æ ‡ç­¾å±æ€§å€¼</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Person</span>.<span class="property">defaultProps</span> = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">sex</span>:<span class="string">&#x27;ä¸ç”·ä¸å¥³&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">age</span>:<span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> p = &#123;<span class="attr">name</span>:<span class="string">&#x27;å°çº¢&#x27;</span>,<span class="attr">age</span>:<span class="number">22</span>,<span class="attr">sex</span>:<span class="string">&#x27;å¥³&#x27;</span>&#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">&quot;å°ç™½&quot;</span>  <span class="attr">sex</span>=<span class="string">&quot;ç”·&quot;</span> /&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">&quot;å°é»‘&quot;</span> <span class="attr">age</span>=<span class="string">&quot;28&quot;</span> <span class="attr">sex</span>=<span class="string">&quot;ç”·&quot;</span> /&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test1&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">&quot;å°å¼ &quot;</span> <span class="attr">age</span>=<span class="string">&quot;8&quot;</span> <span class="attr">sex</span>=<span class="string">&quot;ç”·&quot;</span> /&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test2&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åŸç”Ÿjsä¸èƒ½ç”¨å±•å¼€è¿ç®—ç¬¦å±•å¼€å¯¹è±¡ï¼Œåªèƒ½å¤åˆ¶å¯¹è±¡ï¼Œä½†åœ¨babelå’Œreactçš„å…±åŒä½œç”¨ä¸‹ï¼Œå±•å¼€è¿ç®—ç¬¦å¯ä»¥å±•å¼€å¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> &#123;<span class="attr">...p</span>&#125;/&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test3&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-5-4propsç®€å†™å½¢å¼"><a href="#1-5-4propsç®€å†™å½¢å¼" class="headerlink" title="1.5.4propsç®€å†™å½¢å¼"></a>1.5.4propsç®€å†™å½¢å¼</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/react-dom.development.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/babel.min.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥prop-types,ç”¨äºå¯¹ç»„ä»¶æ ‡ç­¾å±æ€§è¿›è¡Œé™åˆ¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/javascript&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;../js/prop-types.js&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&#x27;text/babel&#x27;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// åˆ›å»ºç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å¯¹æ ‡ç­¾å±æ€§è¿›è¡Œç±»å‹ï¼Œå¿…è¦æ€§çš„é™åˆ¶</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">static</span> propTypes = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">name</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>.<span class="property">isRequired</span>, <span class="comment">//é™åˆ¶nameå¿…ä¼ ï¼Œä¸”ä¸ºå­—ç¬¦ä¸²</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">sex</span>: <span class="title class_">PropTypes</span>.<span class="property">string</span>,<span class="comment">//é™åˆ¶sexä¸ºå­—ç¬¦ä¸²</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">age</span>: <span class="title class_">PropTypes</span>.<span class="property">number</span>,<span class="comment">//é™åˆ¶ageä¸ºæ•°å€¼</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">speak</span>: <span class="title class_">PropTypes</span>.<span class="property">func</span>,<span class="comment">//é™åˆ¶speakä¸ºå‡½æ•°</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//æŒ‡å®šé»˜è®¤æ ‡ç­¾å±æ€§å€¼</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">static</span> defaultProps = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">sex</span>: <span class="string">&#x27;ä¸ç”·ä¸å¥³&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">age</span>: <span class="number">18</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> &#123; name, age, sex &#125; = <span class="variable language_">this</span>.<span class="property">props</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">                    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å§“å:&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å¹´é¾„:&#123;age + 1&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ€§åˆ«:&#123;sex&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> p = &#123; <span class="attr">name</span>: <span class="string">&#x27;å°çº¢&#x27;</span>, <span class="attr">age</span>: <span class="number">22</span>, <span class="attr">sex</span>: <span class="string">&#x27;å¥³&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">&quot;å°ç™½&quot;</span> <span class="attr">sex</span>=<span class="string">&quot;ç”·&quot;</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">&quot;å°é»‘&quot;</span> <span class="attr">age</span>=<span class="string">&quot;28&quot;</span> <span class="attr">sex</span>=<span class="string">&quot;ç”·&quot;</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test1&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">name</span>=<span class="string">&quot;å°å¼ &quot;</span> <span class="attr">age</span>=<span class="string">&quot;8&quot;</span> <span class="attr">sex</span>=<span class="string">&quot;ç”·&quot;</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test2&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åŸç”Ÿjsä¸èƒ½ç”¨å±•å¼€è¿ç®—ç¬¦å±•å¼€å¯¹è±¡ï¼Œåªèƒ½å¤åˆ¶å¯¹è±¡ï¼Œä½†åœ¨babelå’Œreactçš„å…±åŒä½œç”¨ä¸‹ï¼Œå±•å¼€è¿ç®—ç¬¦å¯ä»¥å±•å¼€å¯¹è±¡</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Person</span> &#123;<span class="attr">...p</span>&#125; /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test3&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="1-6ç»„ä»¶å±æ€§ä¹‹refs"><a href="#1-6ç»„ä»¶å±æ€§ä¹‹refs" class="headerlink" title="1.6ç»„ä»¶å±æ€§ä¹‹refs"></a>1.6ç»„ä»¶å±æ€§ä¹‹refs</h3><h4 id="1-6-1å­—ç¬¦ä¸²å½¢å¼çš„ref"><a href="#1-6-1å­—ç¬¦ä¸²å½¢å¼çš„ref" class="headerlink" title="1.6.1å­—ç¬¦ä¸²å½¢å¼çš„ref"></a>1.6.1å­—ç¬¦ä¸²å½¢å¼çš„ref</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªâ€œå®¹å™¨â€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-domï¼Œç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥babelï¼Œç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åˆ›å»ºç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å±•ç¤ºå·¦ä¾§è¾“å…¥æ¡†çš„æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">            showData = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> &#123; input1 &#125; = <span class="variable language_">this</span>.<span class="property">refs</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// const &#123;a,b&#125; = this.props;</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// alert(a+b)</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(input1.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å±•ç¤ºå³ä¾§è¾“å…¥æ¡†çš„æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">            showData2 = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> &#123; input2 &#125; = <span class="variable language_">this</span>.<span class="property">refs</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(input2.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">                    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&quot;input1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;ç‚¹å‡»æŒ‰é’®æç¤ºæ•°æ®&quot;</span> /&gt;</span><span class="symbol">&amp;nbsp;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.showData&#125;</span>&gt;</span>ç‚¹æˆ‘æç¤ºå·¦ä¾§çš„æ•°æ®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="symbol">&amp;nbsp;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&quot;input2&quot;</span> <span class="attr">onBlur</span>=<span class="string">&#123;this.showData2&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;å¤±å»ç„¦ç‚¹æç¤ºæ•°æ®&quot;</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> <span class="attr">a</span>=<span class="string">&quot;1&quot;</span> <span class="attr">b</span>=<span class="string">&quot;2&quot;</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-6-2å›è°ƒå‡½æ•°å½¢å¼"><a href="#1-6-2å›è°ƒå‡½æ•°å½¢å¼" class="headerlink" title="1.6.2å›è°ƒå‡½æ•°å½¢å¼"></a>1.6.2å›è°ƒå‡½æ•°å½¢å¼</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªâ€œå®¹å™¨â€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-domï¼Œç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥babelï¼Œç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åˆ›å»ºç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å±•ç¤ºå·¦ä¾§è¾“å…¥æ¡†çš„æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">            showData = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> &#123;input1&#125; = <span class="variable language_">this</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(input1.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å±•ç¤ºå³ä¾§è¾“å…¥æ¡†çš„æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">            showData2 = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">input2</span>.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">                    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;(currentNode)</span> =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                            this.input1 = currentNode</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        &#125;&#125; type=&quot;text&quot; placeholder=&quot;ç‚¹å‡»æŒ‰é’®æç¤ºæ•°æ®&quot; /&gt;<span class="symbol">&amp;nbsp;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.showData&#125;</span>&gt;</span>ç‚¹æˆ‘æç¤ºå·¦ä¾§çš„æ•°æ®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="symbol">&amp;nbsp;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;(currentNode)</span> =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                            this.input2 = currentNode</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        &#125;&#125; onBlur=&#123;this.showData2&#125; type=&quot;text&quot; placeholder=&quot;å¤±å»ç„¦ç‚¹æç¤ºæ•°æ®&quot; /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> <span class="attr">a</span>=<span class="string">&quot;1&quot;</span> <span class="attr">b</span>=<span class="string">&quot;2&quot;</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-6-3createRefçš„ä½¿ç”¨"><a href="#1-6-3createRefçš„ä½¿ç”¨" class="headerlink" title="1.6.3createRefçš„ä½¿ç”¨"></a>1.6.3createRefçš„ä½¿ç”¨</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªâ€œå®¹å™¨â€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-domï¼Œç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥babelï¼Œç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åˆ›å»ºç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                        React.createRefè°ƒç”¨åå¯ä»¥è¿”å›ä¸€ä¸ªå®¹å™¨ï¼Œè¯¥å®¹å™¨å¯ä»¥å­˜å‚¨è¢«refæ‰€æ ‡è¯†çš„èŠ‚ç‚¹,è¯¥å®¹å™¨æ˜¯â€œä¸“äººä¸“ç”¨â€çš„</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                     */</span></span></span><br><span class="line"><span class="language-javascript">            myRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span></span><br><span class="line"><span class="language-javascript">            myRef2 = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å±•ç¤ºå·¦ä¾§è¾“å…¥æ¡†çš„æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">            showData = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">myRef</span>.<span class="property">current</span>.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å±•ç¤ºå³ä¾§è¾“å…¥æ¡†çš„æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">            showData2 = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">myRef2</span>.<span class="property">current</span>.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">                    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;ç‚¹å‡»æŒ‰é’®æç¤ºæ•°æ®&quot;</span> /&gt;</span><span class="symbol">&amp;nbsp;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.showData&#125;</span>&gt;</span>ç‚¹æˆ‘æç¤ºå·¦ä¾§çš„æ•°æ®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="symbol">&amp;nbsp;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">onBlur</span>=<span class="string">&#123;this.showData2&#125;</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef2&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;å¤±å»ç„¦ç‚¹æç¤ºæ•°æ®&quot;</span> /&gt;</span><span class="symbol">&amp;nbsp;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> <span class="attr">a</span>=<span class="string">&quot;1&quot;</span> <span class="attr">b</span>=<span class="string">&quot;2&quot;</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-6-4reactäº‹ä»¶å¤„ç†"><a href="#1-6-4reactäº‹ä»¶å¤„ç†" class="headerlink" title="1.6.4reactäº‹ä»¶å¤„ç†"></a>1.6.4reactäº‹ä»¶å¤„ç†</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªâ€œå®¹å™¨â€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-domï¼Œç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥babelï¼Œç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åˆ›å»ºç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                        (1).é€šè¿‡onXxxå±æ€§æŒ‡å®šäº‹ä»¶å¤„ç†å‡½æ•°(æ³¨æ„å¤§å°å†™)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                                a.Reactä½¿ç”¨çš„æ˜¯è‡ªå®šä¹‰(åˆæˆ)äº‹ä»¶, è€Œä¸æ˜¯ä½¿ç”¨çš„åŸç”ŸDOMäº‹ä»¶ â€”â€”â€”â€”â€”â€” ä¸ºäº†æ›´å¥½çš„å…¼å®¹æ€§</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                                b.Reactä¸­çš„äº‹ä»¶æ˜¯é€šè¿‡äº‹ä»¶å§”æ‰˜æ–¹å¼å¤„ç†çš„(å§”æ‰˜ç»™ç»„ä»¶æœ€å¤–å±‚çš„å…ƒç´ ) â€”â€”â€”â€”â€”â€”â€”â€”ä¸ºäº†çš„é«˜æ•ˆ</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                        (2).é€šè¿‡event.targetå¾—åˆ°å‘ç”Ÿäº‹ä»¶çš„DOMå…ƒç´ å¯¹è±¡ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”ä¸è¦è¿‡åº¦ä½¿ç”¨ref</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                     */</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//åˆ›å»ºrefå®¹å™¨</span></span></span><br><span class="line"><span class="language-javascript">            myRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span></span><br><span class="line"><span class="language-javascript">            myRef2 = <span class="title class_">React</span>.<span class="title function_">createRef</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å±•ç¤ºå·¦ä¾§è¾“å…¥æ¡†çš„æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">            showData = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">target</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">myRef</span>.<span class="property">current</span>.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å±•ç¤ºå³ä¾§è¾“å…¥æ¡†çš„æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">            showData2 = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(event.<span class="property">target</span>.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">                    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;this.myRef&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;ç‚¹å‡»æŒ‰é’®æç¤ºæ•°æ®&quot;</span> /&gt;</span><span class="symbol">&amp;nbsp;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.showData&#125;</span>&gt;</span>ç‚¹æˆ‘æç¤ºå·¦ä¾§çš„æ•°æ®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="symbol">&amp;nbsp;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">onBlur</span>=<span class="string">&#123;this.showData2&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;å¤±å»ç„¦ç‚¹æç¤ºæ•°æ®&quot;</span> /&gt;</span><span class="symbol">&amp;nbsp;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ¸²æŸ“ç»„ä»¶åˆ°é¡µé¢</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Demo</span> <span class="attr">a</span>=<span class="string">&quot;1&quot;</span> <span class="attr">b</span>=<span class="string">&quot;2&quot;</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="1-7reactæ”¶é›†è¡¨å•æ•°æ®"><a href="#1-7reactæ”¶é›†è¡¨å•æ•°æ®" class="headerlink" title="1.7reactæ”¶é›†è¡¨å•æ•°æ®"></a>1.7reactæ”¶é›†è¡¨å•æ•°æ®</h3><h4 id="1-7-1éå—æ§ç»„ä»¶"><a href="#1-7-1éå—æ§ç»„ä»¶" class="headerlink" title="1.7.1éå—æ§ç»„ä»¶"></a>1.7.1éå—æ§ç»„ä»¶</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªâ€œå®¹å™¨â€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-domï¼Œç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥babelï¼Œç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åˆ›å»ºç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Login</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            handleSubmit = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                event.<span class="title function_">preventDefault</span>() <span class="comment">//é˜»æ­¢è¡¨å•æäº¤</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> &#123; username, password &#125; = <span class="variable language_">this</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">`ä½ è¾“å…¥çš„ç”¨æˆ·åæ˜¯ï¼š<span class="subst">$&#123;username.value&#125;</span>,ä½ è¾“å…¥çš„å¯†ç æ˜¯ï¼š<span class="subst">$&#123;password.value&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">                    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.handleSubmit&#125;</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;c</span> =&gt;</span> this.username = c&#125; type=&quot;text&quot; name=&quot;username&quot; /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;c</span> =&gt;</span> this.password = c&#125; type=&quot;password&quot; name=&quot;password&quot; /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">button</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ¸²æŸ“ç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Login</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-7-2å—æ§ç»„ä»¶"><a href="#1-7-2å—æ§ç»„ä»¶" class="headerlink" title="1.7.2å—æ§ç»„ä»¶"></a>1.7.2å—æ§ç»„ä»¶</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªâ€œå®¹å™¨â€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-domï¼Œç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥babelï¼Œç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åˆ›å»ºç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Login</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//åˆå§‹åŒ–çŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">            state = &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">//ç”¨æˆ·å</span></span></span><br><span class="line"><span class="language-javascript">                <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">//å¯†ç </span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//ä¿å­˜ç”¨æˆ·ååˆ°çŠ¶æ€ä¸­</span></span></span><br><span class="line"><span class="language-javascript">            saveUsername = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">username</span>: event.<span class="property">target</span>.<span class="property">value</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//ä¿å­˜å¯†ç åˆ°çŠ¶æ€ä¸­</span></span></span><br><span class="line"><span class="language-javascript">            savePassword = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">password</span>: event.<span class="property">target</span>.<span class="property">value</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//è¡¨å•æäº¤çš„å›è°ƒ</span></span></span><br><span class="line"><span class="language-javascript">            handleSubmit = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                event.<span class="title function_">preventDefault</span>() <span class="comment">//é˜»æ­¢è¡¨å•æäº¤</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> &#123; username, password &#125; = <span class="variable language_">this</span>.<span class="property">state</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">`ä½ è¾“å…¥çš„ç”¨æˆ·åæ˜¯ï¼š<span class="subst">$&#123;username&#125;</span>,ä½ è¾“å…¥çš„å¯†ç æ˜¯ï¼š<span class="subst">$&#123;password&#125;</span>`</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">                    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.handleSubmit&#125;</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.saveUsername&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.savePassword&#125;</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">button</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ¸²æŸ“ç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Login</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="1-8reactä¹‹ç”Ÿå‘½å‘¨æœŸ"><a href="#1-8reactä¹‹ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1.8reactä¹‹ç”Ÿå‘½å‘¨æœŸ"></a>1.8reactä¹‹ç”Ÿå‘½å‘¨æœŸ</h3><h4 id="1-8-1ç”Ÿå‘½å‘¨æœŸå‡½æ•°-æ—§ç‰ˆ"><a href="#1-8-1ç”Ÿå‘½å‘¨æœŸå‡½æ•°-æ—§ç‰ˆ" class="headerlink" title="1.8.1ç”Ÿå‘½å‘¨æœŸå‡½æ•°(æ—§ç‰ˆ)"></a>1.8.1ç”Ÿå‘½å‘¨æœŸå‡½æ•°(æ—§ç‰ˆ)</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªâ€œå®¹å™¨â€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-domï¼Œç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥babelï¼Œç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                    1. åˆå§‹åŒ–é˜¶æ®µ: ç”±ReactDOM.render()è§¦å‘---åˆæ¬¡æ¸²æŸ“</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                                        1. constructor()</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                                        2. componentWillMount()</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                                        3. render()</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                                        4. componentDidMount() =====&gt; å¸¸ç”¨</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                                                        ä¸€èˆ¬åœ¨è¿™ä¸ªé’©å­ä¸­åšä¸€äº›åˆå§‹åŒ–çš„äº‹ï¼Œä¾‹å¦‚ï¼šå¼€å¯å®šæ—¶å™¨ã€å‘é€ç½‘ç»œè¯·æ±‚ã€è®¢é˜…æ¶ˆæ¯</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                    2. æ›´æ–°é˜¶æ®µ: ç”±ç»„ä»¶å†…éƒ¨this.setSate()æˆ–çˆ¶ç»„ä»¶renderè§¦å‘</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                                        1. shouldComponentUpdate()</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                                        2. componentWillUpdate()</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                                        3. render() =====&gt; å¿…é¡»ä½¿ç”¨çš„ä¸€ä¸ª</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                                        4. componentDidUpdate()</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                    3. å¸è½½ç»„ä»¶: ç”±ReactDOM.unmountComponentAtNode()è§¦å‘</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                                        1. componentWillUnmount()  =====&gt; å¸¸ç”¨</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                                                        ä¸€èˆ¬åœ¨è¿™ä¸ªé’©å­ä¸­åšä¸€äº›æ”¶å°¾çš„äº‹ï¼Œä¾‹å¦‚ï¼šå…³é—­å®šæ—¶å™¨ã€å–æ¶ˆè®¢é˜…æ¶ˆæ¯</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            */</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//åˆ›å»ºç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">Count</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//æ„é€ å™¨</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Count---constructor&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">super</span>(props)</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//åˆå§‹åŒ–çŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">state</span> = &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//åŠ 1æŒ‰é’®çš„å›è°ƒ</span></span></span><br><span class="line"><span class="language-javascript">            add = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//è·å–åŸçŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> &#123; count &#125; = <span class="variable language_">this</span>.<span class="property">state</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//æ›´æ–°çŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">count</span>: count + <span class="number">1</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å¸è½½ç»„ä»¶æŒ‰é’®çš„å›è°ƒ</span></span></span><br><span class="line"><span class="language-javascript">            death = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title class_">ReactDOM</span>.<span class="title function_">unmountComponentAtNode</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å¼ºåˆ¶æ›´æ–°æŒ‰é’®çš„å›è°ƒ</span></span></span><br><span class="line"><span class="language-javascript">            force = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">forceUpdate</span>()</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//ç»„ä»¶å°†è¦æŒ‚è½½çš„é’©å­</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">componentWillMount</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Count---componentWillMount&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//ç»„ä»¶æŒ‚è½½å®Œæ¯•çš„é’©å­</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Count---componentDidMount&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//ç»„ä»¶å°†è¦å¸è½½çš„é’©å­</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">componentWillUnmount</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Count---componentWillUnmount&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//æ§åˆ¶ç»„ä»¶æ›´æ–°çš„â€œé˜€é—¨â€</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">shouldComponentUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Count---shouldComponentUpdate&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//ç»„ä»¶å°†è¦æ›´æ–°çš„é’©å­</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">componentWillUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Count---componentWillUpdate&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//ç»„ä»¶æ›´æ–°å®Œæ¯•çš„é’©å­</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">componentDidUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Count---componentDidUpdate&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Count---render&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">const</span> &#123; count &#125; = <span class="variable language_">this</span>.<span class="property">state</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">                    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>å½“å‰æ±‚å’Œä¸ºï¼š&#123;count&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.add&#125;</span>&gt;</span>ç‚¹æˆ‘+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.death&#125;</span>&gt;</span>å¸è½½ç»„ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.force&#125;</span>&gt;</span>ä¸æ›´æ”¹ä»»ä½•çŠ¶æ€ä¸­çš„æ•°æ®ï¼Œå¼ºåˆ¶æ›´æ–°ä¸€ä¸‹<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//çˆ¶ç»„ä»¶A</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">A</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//åˆå§‹åŒ–çŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">            state = &#123; <span class="attr">carName</span>: <span class="string">&#x27;å¥”é©°&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            changeCar = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">carName</span>: <span class="string">&#x27;å¥¥æ‹“&#x27;</span> &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">                    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span>æˆ‘æ˜¯Aç»„ä»¶<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.changeCar&#125;</span>&gt;</span>æ¢è½¦<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        <span class="tag">&lt;<span class="name">B</span> <span class="attr">carName</span>=<span class="string">&#123;this.state.carName&#125;</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//å­ç»„ä»¶B</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//ç»„ä»¶å°†è¦æ¥æ”¶æ–°çš„propsçš„é’©å­</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">componentWillReceiveProps</span>(<span class="params">props</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;B---componentWillReceiveProps&#x27;</span>, props);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//æ§åˆ¶ç»„ä»¶æ›´æ–°çš„â€œé˜€é—¨â€</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">shouldComponentUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;B---shouldComponentUpdate&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//ç»„ä»¶å°†è¦æ›´æ–°çš„é’©å­</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">componentWillUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;B---componentWillUpdate&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//ç»„ä»¶æ›´æ–°å®Œæ¯•çš„é’©å­</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">componentDidUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;B---componentDidUpdate&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;B---render&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">                    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>æˆ‘æ˜¯Bç»„ä»¶ï¼Œæ¥æ”¶åˆ°çš„è½¦æ˜¯:&#123;this.props.carName&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//æ¸²æŸ“ç»„ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Count</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-8-2getSnapShotBeforeUpdateçš„ä½¿ç”¨åœºæ™¯"><a href="#1-8-2getSnapShotBeforeUpdateçš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="1.8.2getSnapShotBeforeUpdateçš„ä½¿ç”¨åœºæ™¯"></a>1.8.2getSnapShotBeforeUpdateçš„ä½¿ç”¨åœºæ™¯</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªâ€œå®¹å™¨â€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥reactæ ¸å¿ƒåº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/17.0.1/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥react-domï¼Œç”¨äºæ”¯æŒreactæ“ä½œDOM --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/17.0.1/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥babelï¼Œç”¨äºå°†jsxè½¬ä¸ºjs --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/17.0.1/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">class</span> <span class="title class_">NewsList</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            state = &#123; <span class="attr">newsArr</span>: [] &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//è·å–åŸçŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> &#123; newsArr &#125; = <span class="variable language_">this</span>.<span class="property">state</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//æ¨¡æ‹Ÿä¸€æ¡æ–°é—»</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">const</span> news = <span class="string">&#x27;æ–°é—»&#x27;</span> + (newsArr.<span class="property">length</span> + <span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">                    <span class="comment">//æ›´æ–°çŠ¶æ€</span></span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">newsArr</span>: [news, ...newsArr] &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">getSnapshotBeforeUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">refs</span>.<span class="property">list</span>.<span class="property">scrollHeight</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">componentDidUpdate</span>(<span class="params">preProps, preState, height</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">refs</span>.<span class="property">list</span>.<span class="property">scrollTop</span> += <span class="variable language_">this</span>.<span class="property">refs</span>.<span class="property">list</span>.<span class="property">scrollHeight</span> - height</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">                    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                            this.state.newsArr.map((n, index) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                                return <span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span> <span class="attr">className</span>=<span class="string">&quot;news&quot;</span>&gt;</span>&#123;n&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                            &#125;)</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                        &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">                )</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">NewsList</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> -å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -React -å‰ç«¯ -æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootå­¦ä¹ æ€»ç»“(3)</title>
      <link href="/2023/01/12/SpringBoot%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93(3)/"/>
      <url>/2023/01/12/SpringBoot%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93(3)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="SpringBoot2æ ¸å¿ƒæŠ€æœ¯-æ ¸å¿ƒåŠŸèƒ½"><a href="#SpringBoot2æ ¸å¿ƒæŠ€æœ¯-æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="SpringBoot2æ ¸å¿ƒæŠ€æœ¯-æ ¸å¿ƒåŠŸèƒ½"></a>SpringBoot2æ ¸å¿ƒæŠ€æœ¯-æ ¸å¿ƒåŠŸèƒ½</h2><h3 id="3-æ•°æ®è®¿é—®"><a href="#3-æ•°æ®è®¿é—®" class="headerlink" title="3.æ•°æ®è®¿é—®"></a>3.æ•°æ®è®¿é—®</h3><h4 id="3-1-SQL"><a href="#3-1-SQL" class="headerlink" title="3.1.SQL"></a>3.1.SQL</h4><h5 id="1-æ•°æ®æºçš„è‡ªåŠ¨é…ç½®-HikariDataSource"><a href="#1-æ•°æ®æºçš„è‡ªåŠ¨é…ç½®-HikariDataSource" class="headerlink" title="1.æ•°æ®æºçš„è‡ªåŠ¨é…ç½®-HikariDataSource"></a>1.æ•°æ®æºçš„è‡ªåŠ¨é…ç½®-HikariDataSource</h5><p><strong>1.1å¯¼å…¥JDBCåœºæ™¯</strong></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">æ•°æ®åº“é©±åŠ¨ï¼Ÿ</span><br><span class="line">ä¸ºä»€ä¹ˆå¯¼å…¥JDBCåœºæ™¯ï¼Œå®˜æ–¹ä¸å¯¼å…¥é©±åŠ¨ï¼Ÿå®˜æ–¹ä¸çŸ¥é“æˆ‘ä»¬æ¥ä¸‹è¦æ“ä½œä»€ä¹ˆæ•°æ®åº“ã€‚</span><br><span class="line">æ•°æ®åº“ç‰ˆæœ¬å’Œé©±åŠ¨ç‰ˆæœ¬å¯¹åº”</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">é»˜è®¤ç‰ˆæœ¬ï¼š<span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>8.0.22<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;version&gt;5.1.49&lt;/version&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">æƒ³è¦ä¿®æ”¹ç‰ˆæœ¬</span><br><span class="line">1ã€ç›´æ¥ä¾èµ–å¼•å…¥å…·ä½“ç‰ˆæœ¬ï¼ˆmavençš„å°±è¿‘ä¾èµ–åŸåˆ™ï¼‰</span><br><span class="line">2ã€é‡æ–°å£°æ˜ç‰ˆæœ¬ï¼ˆmavençš„å±æ€§çš„å°±è¿‘ä¼˜å…ˆåŸåˆ™ï¼‰</span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.49<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-åˆ†æè‡ªåŠ¨é…ç½®"><a href="#2-åˆ†æè‡ªåŠ¨é…ç½®" class="headerlink" title="2.åˆ†æè‡ªåŠ¨é…ç½®"></a>2.åˆ†æè‡ªåŠ¨é…ç½®</h5><h5 id="1ã€è‡ªåŠ¨é…ç½®çš„ç±»"><a href="#1ã€è‡ªåŠ¨é…ç½®çš„ç±»" class="headerlink" title="1ã€è‡ªåŠ¨é…ç½®çš„ç±»"></a>1ã€è‡ªåŠ¨é…ç½®çš„ç±»</h5><ul><li><p>DataSourceAutoConfiguration ï¼š æ•°æ®æºçš„è‡ªåŠ¨é…ç½®</p></li><li><ul><li>ä¿®æ”¹æ•°æ®æºç›¸å…³çš„é…ç½®ï¼š<strong>spring.datasource</strong></li><li><strong>æ•°æ®åº“è¿æ¥æ± çš„é…ç½®ï¼Œæ˜¯è‡ªå·±å®¹å™¨ä¸­æ²¡æœ‰DataSourceæ‰è‡ªåŠ¨é…ç½®çš„</strong></li><li>åº•å±‚é…ç½®å¥½çš„è¿æ¥æ± æ˜¯ï¼š<strong>HikariDataSource</strong></li></ul></li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@Conditional(PooledDataSourceCondition.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(&#123; DataSource.class, XADataSource.class &#125;)</span></span><br><span class="line"><span class="meta">@Import(&#123; DataSourceConfiguration.Hikari.class, DataSourceConfiguration.Tomcat.class,</span></span><br><span class="line"><span class="meta">DataSourceConfiguration.Dbcp2.class, DataSourceConfiguration.OracleUcp.class,</span></span><br><span class="line"><span class="meta">DataSourceConfiguration.Generic.class, DataSourceJmxConfiguration.class &#125;)</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">PooledDataSourceConfiguration</span></span><br></pre></td></tr></table></figure><ul><li><p>DataSourceTransactionManagerAutoConfigurationï¼š äº‹åŠ¡ç®¡ç†å™¨çš„è‡ªåŠ¨é…ç½®</p></li><li><p>JdbcTemplateAutoConfigurationï¼š <strong>JdbcTemplateçš„è‡ªåŠ¨é…ç½®ï¼Œå¯ä»¥æ¥å¯¹æ•°æ®åº“è¿›è¡Œcrud</strong></p></li><li><ul><li>å¯ä»¥ä¿®æ”¹è¿™ä¸ªé…ç½®é¡¹@ConfigurationProperties(prefix &#x3D; <strong>â€œspring.jdbcâ€</strong>) æ¥ä¿®æ”¹JdbcTemplate</li><li>@Bean@Primary    JdbcTemplateï¼›å®¹å™¨ä¸­æœ‰è¿™ä¸ªç»„ä»¶</li></ul></li><li><p>JndiDataSourceAutoConfigurationï¼š jndiçš„è‡ªåŠ¨é…ç½®</p></li><li><p>XADataSourceAutoConfigurationï¼š åˆ†å¸ƒå¼äº‹åŠ¡ç›¸å…³çš„</p></li></ul><h5 id="3-ä¿®æ”¹é…ç½®é¡¹"><a href="#3-ä¿®æ”¹é…ç½®é¡¹" class="headerlink" title="3.ä¿®æ”¹é…ç½®é¡¹"></a>3.ä¿®æ”¹é…ç½®é¡¹</h5><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/db_account</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br></pre></td></tr></table></figure><h5 id="4-æµ‹è¯•"><a href="#4-æµ‹è¯•" class="headerlink" title="4.æµ‹è¯•"></a>4.æµ‹è¯•</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Boot05WebAdminApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        jdbcTemplate.queryForObject(&quot;select * from account_tbl&quot;)</span></span><br><span class="line"><span class="comment">//        jdbcTemplate.queryForList(&quot;select * from account_tbl&quot;,)</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">aLong</span> <span class="operator">=</span> jdbcTemplate.queryForObject(<span class="string">&quot;select count(*) from account_tbl&quot;</span>, Long.class);</span><br><span class="line">        log.info(<span class="string">&quot;è®°å½•æ€»æ•°ï¼š&#123;&#125;&quot;</span>,aLong);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-2ä½¿ç”¨Druidæ•°æ®æº"><a href="#3-2ä½¿ç”¨Druidæ•°æ®æº" class="headerlink" title="3.2ä½¿ç”¨Druidæ•°æ®æº"></a>3.2ä½¿ç”¨Druidæ•°æ®æº</h4><h5 id="1-è‡ªå®šä¹‰æ–¹å¼"><a href="#1-è‡ªå®šä¹‰æ–¹å¼" class="headerlink" title="1.è‡ªå®šä¹‰æ–¹å¼"></a>1.è‡ªå®šä¹‰æ–¹å¼</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxActive&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxWait&quot;</span> <span class="attr">value</span>=<span class="string">&quot;60000&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;timeBetweenEvictionRunsMillis&quot;</span> <span class="attr">value</span>=<span class="string">&quot;60000&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minEvictableIdleTimeMillis&quot;</span> <span class="attr">value</span>=<span class="string">&quot;300000&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;testWhileIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;testOnBorrow&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;testOnReturn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;poolPreparedStatements&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxOpenPreparedStatements&quot;</span> <span class="attr">value</span>=<span class="string">&quot;20&quot;</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-StatViewServlet"><a href="#2-StatViewServlet" class="headerlink" title="2.StatViewServlet"></a>2.StatViewServlet</h5><p>StatViewServletçš„ç”¨é€”åŒ…æ‹¬ï¼š</p><ul><li>æä¾›ç›‘æ§ä¿¡æ¯å±•ç¤ºçš„htmlé¡µé¢</li><li>æä¾›ç›‘æ§ä¿¡æ¯çš„JSON API</li></ul><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DruidStatView<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.alibaba.druid.support.http.StatViewServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DruidStatView<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/druid/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="3-StatFilter"><a href="#3-StatFilter" class="headerlink" title="3.StatFilter"></a>3.StatFilter</h5><p>ç”¨äºç»Ÿè®¡ç›‘æ§ä¿¡æ¯:å¦‚SQLç›‘æ§ã€URIç›‘æ§</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">éœ€è¦ç»™æ•°æ®æºä¸­é…ç½®å¦‚ä¸‹å±æ€§ï¼›å¯ä»¥å…è®¸å¤šä¸ªfilterï¼Œå¤šä¸ªç”¨ï¼Œåˆ†å‰²ï¼›å¦‚ï¼š</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;filters&quot;</span> <span class="attr">value</span>=<span class="string">&quot;stat,slf4j&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>ç³»ç»Ÿä¸­æ‰€æœ‰filterï¼š</p><table><thead><tr><th>åˆ«å</th><th>Filterç±»å</th></tr></thead><tbody><tr><td>default</td><td>com.alibaba.druid.filter.stat.StatFilter</td></tr><tr><td>stat</td><td>com.alibaba.druid.filter.stat.StatFilter</td></tr><tr><td>mergeStat</td><td>com.alibaba.druid.filter.stat.MergeStatFilter</td></tr><tr><td>encoding</td><td>com.alibaba.druid.filter.encoding.EncodingConvertFilter</td></tr><tr><td>log4j</td><td>com.alibaba.druid.filter.logging.Log4jFilter</td></tr><tr><td>log4j2</td><td>com.alibaba.druid.filter.logging.Log4j2Filter</td></tr><tr><td>slf4j</td><td>com.alibaba.druid.filter.logging.Slf4jLogFilter</td></tr><tr><td>commonlogging</td><td>com.alibaba.druid.filter.logging.CommonsLogFilter</td></tr></tbody></table><p><strong>æ…¢SQLè®°å½•</strong></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stat-filter&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.filter.stat.StatFilter&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;slowSqlMillis&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10000&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;logSlowSql&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">ä½¿ç”¨ slowSqlMillis å®šä¹‰æ…¢SQLçš„æ—¶é•¿</span><br></pre></td></tr></table></figure><h5 id="4-ä½¿ç”¨å®˜æ–¹Starteræ–¹æ³•-æ¨è"><a href="#4-ä½¿ç”¨å®˜æ–¹Starteræ–¹æ³•-æ¨è" class="headerlink" title="4.ä½¿ç”¨å®˜æ–¹Starteræ–¹æ³•(æ¨è)"></a>4.ä½¿ç”¨å®˜æ–¹Starteræ–¹æ³•(æ¨è)</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2ã€åˆ†æè‡ªåŠ¨é…ç½®"><a href="#2ã€åˆ†æè‡ªåŠ¨é…ç½®" class="headerlink" title="2ã€åˆ†æè‡ªåŠ¨é…ç½®"></a>2ã€åˆ†æè‡ªåŠ¨é…ç½®</h5><ul><li>æ‰©å±•é…ç½®é¡¹ <strong>spring.datasource.druid</strong></li><li>DruidSpringAopConfiguration.<strong>class</strong>,   ç›‘æ§SpringBeançš„ï¼›é…ç½®é¡¹ï¼š<strong>spring.datasource.druid.aop-patterns</strong></li><li>DruidStatViewServletConfiguration.<strong>class</strong>, ç›‘æ§é¡µçš„é…ç½®ï¼š<strong>spring.datasource.druid.stat-view-servletï¼›é»˜è®¤å¼€å¯</strong></li><li>DruidWebStatFilterConfiguration.<strong>class</strong>, webç›‘æ§é…ç½®ï¼›<strong>spring.datasource.druid.web-stat-filterï¼›é»˜è®¤å¼€å¯</strong></li><li>DruidFilterConfiguration.<strong>class</strong>}) æ‰€æœ‰Druidè‡ªå·±filterçš„é…ç½®</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FILTER_STAT_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;spring.datasource.druid.filter.stat&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FILTER_CONFIG_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;spring.datasource.druid.filter.config&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FILTER_ENCODING_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;spring.datasource.druid.filter.encoding&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FILTER_SLF4J_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;spring.datasource.druid.filter.slf4j&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FILTER_LOG4J_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;spring.datasource.druid.filter.log4j&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FILTER_LOG4J2_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;spring.datasource.druid.filter.log4j2&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FILTER_COMMONS_LOG_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;spring.datasource.druid.filter.commons-log&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">FILTER_WALL_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;spring.datasource.druid.filter.wall&quot;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/db_account</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">aop-patterns:</span> <span class="string">com.atguigu.admin.*</span>  <span class="comment">#ç›‘æ§SpringBean</span></span><br><span class="line">      <span class="attr">filters:</span> <span class="string">stat,wall</span>     <span class="comment"># åº•å±‚å¼€å¯åŠŸèƒ½ï¼Œstatï¼ˆsqlç›‘æ§ï¼‰ï¼Œwallï¼ˆé˜²ç«å¢™ï¼‰</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">stat-view-servlet:</span>   <span class="comment"># é…ç½®ç›‘æ§é¡µåŠŸèƒ½</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">login-username:</span> <span class="string">admin</span></span><br><span class="line">        <span class="attr">login-password:</span> <span class="string">admin</span></span><br><span class="line">        <span class="attr">resetEnable:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">web-stat-filter:</span>  <span class="comment"># ç›‘æ§web</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">urlPattern:</span> <span class="string">/*</span></span><br><span class="line">        <span class="attr">exclusions:</span> <span class="string">&#x27;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="attr">filter:</span></span><br><span class="line">        <span class="attr">stat:</span>    <span class="comment"># å¯¹ä¸Šé¢filtersé‡Œé¢çš„statçš„è¯¦ç»†é…ç½®</span></span><br><span class="line">          <span class="attr">slow-sql-millis:</span> <span class="number">1000</span></span><br><span class="line">          <span class="attr">logSlowSql:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">wall:</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">config:</span></span><br><span class="line">            <span class="attr">drop-table-allow:</span> <span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-3NoSQL"><a href="#3-3NoSQL" class="headerlink" title="3.3NoSQL"></a>3.3NoSQL</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">Redis æ˜¯ä¸€ä¸ªå¼€æºï¼ˆBSDè®¸å¯ï¼‰çš„ï¼Œå†…å­˜ä¸­çš„æ•°æ®ç»“æ„å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒå¯ä»¥ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚ å®ƒæ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œå¦‚ å­—ç¬¦ä¸²ï¼ˆstringsï¼‰ï¼Œ æ•£åˆ—ï¼ˆhashesï¼‰ï¼Œ åˆ—è¡¨ï¼ˆlistsï¼‰ï¼Œ é›†åˆï¼ˆsetsï¼‰ï¼Œ æœ‰åºé›†åˆï¼ˆsorted setsï¼‰ ä¸èŒƒå›´æŸ¥è¯¢ï¼Œ bitmapsï¼Œ hyperloglogs å’Œ åœ°ç†ç©ºé—´ï¼ˆgeospatialï¼‰ ç´¢å¼•åŠå¾„æŸ¥è¯¢ã€‚ Redis å†…ç½®äº† å¤åˆ¶ï¼ˆreplicationï¼‰ï¼ŒLUAè„šæœ¬ï¼ˆLua scriptingï¼‰ï¼Œ LRUé©±åŠ¨äº‹ä»¶ï¼ˆLRU evictionï¼‰ï¼Œäº‹åŠ¡ï¼ˆtransactionsï¼‰ å’Œä¸åŒçº§åˆ«çš„ ç£ç›˜æŒä¹…åŒ–ï¼ˆpersistenceï¼‰ï¼Œ å¹¶é€šè¿‡ Rediså“¨å…µï¼ˆSentinelï¼‰å’Œè‡ªåŠ¨ åˆ†åŒºï¼ˆClusterï¼‰æä¾›é«˜å¯ç”¨æ€§ï¼ˆhigh availabilityï¼‰ã€‚</span><br></pre></td></tr></table></figure><h5 id="3-3-1Redisè‡ªåŠ¨é…ç½®"><a href="#3-3-1Redisè‡ªåŠ¨é…ç½®" class="headerlink" title="3.3.1Redisè‡ªåŠ¨é…ç½®"></a>3.3.1Redisè‡ªåŠ¨é…ç½®</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è‡ªåŠ¨é…ç½®ï¼š</p><ul><li>RedisAutoConfiguration è‡ªåŠ¨é…ç½®ç±»ã€‚RedisProperties å±æ€§ç±» â€“&gt; <strong>spring.redis.xxxæ˜¯å¯¹redisçš„é…ç½®</strong></li><li>è¿æ¥å·¥å‚æ˜¯å‡†å¤‡å¥½çš„ã€‚<strong>Lettuce</strong>ConnectionConfigurationã€<strong>Jedis</strong>ConnectionConfiguration</li><li><strong>è‡ªåŠ¨æ³¨å…¥äº†RedisTemplate</strong>&lt;**Object**, **Object**&gt; ï¼š xxxTemplateï¼›</li><li><strong>è‡ªåŠ¨æ³¨å…¥äº†StringRedisTemplateï¼›kï¼švéƒ½æ˜¯String</strong></li><li><strong>keyï¼švalue</strong></li><li><strong>åº•å±‚åªè¦æˆ‘ä»¬ä½¿ç”¨</strong> <strong>StrinRedisTemplateã€****RedisTemplateå°±å¯ä»¥æ“ä½œredis</strong></li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230112130256961.png" alt="image-20230112130256961"></p><p><strong>redisç¯å¢ƒæ­å»º</strong></p><p><strong>1ã€é˜¿é‡Œäº‘æŒ‰é‡ä»˜è´¹redisã€‚ç»å…¸ç½‘ç»œ</strong></p><p><strong>2ã€ç”³è¯·redisçš„å…¬ç½‘è¿æ¥åœ°å€</strong></p><p><strong>3ã€ä¿®æ”¹ç™½åå•  å…è®¸0.0.0.0&#x2F;0 è®¿é—®</strong></p><h5 id="3-3-2RedisTemplateä¸Lettuce"><a href="#3-3-2RedisTemplateä¸Lettuce" class="headerlink" title="3.3.2RedisTemplateä¸Lettuce"></a>3.3.2RedisTemplateä¸Lettuce</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testRedis</span><span class="params">()</span>&#123;</span><br><span class="line">    ValueOperations&lt;String, String&gt; operations = redisTemplate.opsForValue();</span><br><span class="line"></span><br><span class="line">    operations.set(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;world&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">hello</span> <span class="operator">=</span> operations.get(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    System.out.println(hello);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3-3-3åˆ‡æ¢åˆ°jedis"><a href="#3-3-3åˆ‡æ¢åˆ°jedis" class="headerlink" title="3.3.3åˆ‡æ¢åˆ°jedis"></a>3.3.3åˆ‡æ¢åˆ°jedis</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        å¯¼å…¥jedis--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">r-bp1nc7reqesxisgxpipd.redis.rds.aliyuncs.com</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">lfy:Lfy123456</span></span><br><span class="line">      <span class="attr">client-type:</span> <span class="string">jedis</span></span><br><span class="line">      <span class="attr">jedis:</span></span><br><span class="line">        <span class="attr">pool:</span></span><br><span class="line">          <span class="attr">max-active:</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -SpringBoot -åç«¯ -æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootå­¦ä¹ æ€»ç»“(2)</title>
      <link href="/2023/01/10/SpringBoot%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93(2)/"/>
      <url>/2023/01/10/SpringBoot%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93(2)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="SpringBoot2æ ¸å¿ƒæŠ€æœ¯-æ ¸å¿ƒåŠŸèƒ½"><a href="#SpringBoot2æ ¸å¿ƒæŠ€æœ¯-æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="SpringBoot2æ ¸å¿ƒæŠ€æœ¯-æ ¸å¿ƒåŠŸèƒ½"></a>SpringBoot2æ ¸å¿ƒæŠ€æœ¯-æ ¸å¿ƒåŠŸèƒ½</h2><h3 id="1-é…ç½®æ–‡ä»¶"><a href="#1-é…ç½®æ–‡ä»¶" class="headerlink" title="1.é…ç½®æ–‡ä»¶"></a>1.é…ç½®æ–‡ä»¶</h3><h4 id="1-1Properties"><a href="#1-1Properties" class="headerlink" title="1.1Properties"></a>1.1Properties</h4><h4 id="1-2yaml"><a href="#1-2yaml" class="headerlink" title="1.2yaml"></a>1.2yaml</h4><h5 id="1-2-1ç®€ä»‹"><a href="#1-2-1ç®€ä»‹" class="headerlink" title="1.2.1ç®€ä»‹"></a>1.2.1ç®€ä»‹</h5><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">YAML æ˜¯ &quot;YAML Ain&#x27;t Markup Language&quot;ï¼ˆYAML ä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰çš„é€’å½’ç¼©å†™ã€‚åœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼š&quot;Yet Another Markup Language&quot;ï¼ˆä»æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ã€‚ </span><br><span class="line"></span><br><span class="line">éå¸¸é€‚åˆç”¨æ¥åšä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure><h5 id="1-2-2åŸºæœ¬è¯­æ³•"><a href="#1-2-2åŸºæœ¬è¯­æ³•" class="headerlink" title="1.2.2åŸºæœ¬è¯­æ³•"></a>1.2.2åŸºæœ¬è¯­æ³•</h5><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">â— key: valueï¼›kvä¹‹é—´æœ‰ç©ºæ ¼</span><br><span class="line">â— å¤§å°å†™æ•æ„Ÿ</span><br><span class="line">â— ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»</span><br><span class="line">â— ç¼©è¿›ä¸å…è®¸ä½¿ç”¨tabï¼Œåªå…è®¸ç©ºæ ¼</span><br><span class="line">â— ç¼©è¿›çš„ç©ºæ ¼æ•°ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦å¯¹é½å³å¯</span><br><span class="line">â— &#x27;#&#x27;è¡¨ç¤ºæ³¨é‡Š</span><br><span class="line">â— å­—ç¬¦ä¸²æ— éœ€åŠ å¼•å·ï¼Œå¦‚æœè¦åŠ ï¼Œ&#x27;&#x27;ä¸&quot;&quot;è¡¨ç¤ºå­—ç¬¦ä¸²å†…å®¹ ä¼šè¢« è½¬ä¹‰/ä¸è½¬ä¹‰</span><br></pre></td></tr></table></figure><h5 id="1-2-3æ•°æ®ç±»å‹"><a href="#1-2-3æ•°æ®ç±»å‹" class="headerlink" title="1.2.3æ•°æ®ç±»å‹"></a>1.2.3æ•°æ®ç±»å‹</h5><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">å­—é¢é‡ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼ã€‚dateã€booleanã€stringã€numberã€null</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">k:</span> <span class="string">v</span></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">å¯¹è±¡ï¼šé”®å€¼å¯¹çš„é›†åˆã€‚mapã€hashã€setã€object </span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">è¡Œå†…å†™æ³•ï¼š</span>  <span class="attr">k:</span> &#123;<span class="string">k1:v1</span>,<span class="string">k2:v2</span>,<span class="string">k3:v3</span>&#125;</span><br><span class="line"><span class="comment">#æˆ–</span></span><br><span class="line"><span class="attr">k:</span> </span><br><span class="line"><span class="attr">k1:</span> <span class="string">v1</span></span><br><span class="line">    <span class="attr">k2:</span> <span class="string">v2</span></span><br><span class="line">    <span class="attr">k3:</span> <span class="string">v3</span></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">æ•°ç»„ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ã€‚arrayã€listã€queue</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">è¡Œå†…å†™æ³•ï¼š</span>  <span class="attr">k:</span> [<span class="string">v1</span>,<span class="string">v2</span>,<span class="string">v3</span>]</span><br><span class="line"><span class="comment">#æˆ–è€…</span></span><br><span class="line"><span class="attr">k:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">v1</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">v2</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">v3</span></span><br></pre></td></tr></table></figure><h5 id="1-2-4ç¤ºä¾‹"><a href="#1-2-4ç¤ºä¾‹" class="headerlink" title="1.2.4ç¤ºä¾‹"></a>1.2.4ç¤ºä¾‹</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String userName;</span><br><span class="line"><span class="keyword">private</span> Boolean boss;</span><br><span class="line"><span class="keyword">private</span> Date birth;</span><br><span class="line"><span class="keyword">private</span> Integer age;</span><br><span class="line"><span class="keyword">private</span> Pet pet;</span><br><span class="line"><span class="keyword">private</span> String[] interests;</span><br><span class="line"><span class="keyword">private</span> List&lt;String&gt; animal;</span><br><span class="line"><span class="keyword">private</span> Map&lt;String, Object&gt; score;</span><br><span class="line"><span class="keyword">private</span> Set&lt;Double&gt; salarys;</span><br><span class="line"><span class="keyword">private</span> Map&lt;String, List&lt;Pet&gt;&gt; allPets;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pet</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> Double weight;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># yamlè¡¨ç¤ºä»¥ä¸Šå¯¹è±¡</span></span><br><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">userName:</span> <span class="string">zhangsan</span></span><br><span class="line">  <span class="attr">boss:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">birth:</span> <span class="number">2019</span><span class="string">/12/12</span> <span class="number">20</span><span class="string">:12:33</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">  <span class="attr">pet:</span> </span><br><span class="line">    <span class="attr">name:</span> <span class="string">tomcat</span></span><br><span class="line">    <span class="attr">weight:</span> <span class="number">23.4</span></span><br><span class="line">  <span class="attr">interests:</span> [<span class="string">ç¯®çƒ</span>,<span class="string">æ¸¸æ³³</span>]</span><br><span class="line">  <span class="attr">animal:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">jerry</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mario</span></span><br><span class="line">  <span class="attr">score:</span></span><br><span class="line">    <span class="attr">english:</span> </span><br><span class="line">      <span class="attr">first:</span> <span class="number">30</span></span><br><span class="line">      <span class="attr">second:</span> <span class="number">40</span></span><br><span class="line">      <span class="attr">third:</span> <span class="number">50</span></span><br><span class="line">    <span class="attr">math:</span> [<span class="number">131</span>,<span class="number">140</span>,<span class="number">148</span>]</span><br><span class="line">    <span class="attr">chinese:</span> &#123;<span class="attr">first:</span> <span class="number">128</span>,<span class="attr">second:</span> <span class="number">136</span>&#125;</span><br><span class="line">  <span class="attr">salarys:</span> [<span class="number">3999</span>,<span class="number">4999.98</span>,<span class="number">5999.99</span>]</span><br><span class="line">  <span class="attr">allPets:</span></span><br><span class="line">    <span class="attr">sick:</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">name:</span> <span class="string">tom</span>&#125;</span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">name:</span> <span class="string">jerry</span>,<span class="attr">weight:</span> <span class="number">47</span>&#125;</span><br><span class="line">    <span class="attr">health:</span> [&#123;<span class="attr">name:</span> <span class="string">mario</span>,<span class="attr">weight:</span> <span class="number">47</span>&#125;]</span><br></pre></td></tr></table></figure><h4 id="1-3é…ç½®æç¤º"><a href="#1-3é…ç½®æç¤º" class="headerlink" title="1.3é…ç½®æç¤º"></a>1.3é…ç½®æç¤º</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">è‡ªå®šä¹‰çš„ç±»å’Œé…ç½®æ–‡ä»¶ç»‘å®šä¸€èˆ¬æ²¡æœ‰æç¤ºã€‚</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-Webå¼€å‘"><a href="#2-Webå¼€å‘" class="headerlink" title="2.Webå¼€å‘"></a>2.Webå¼€å‘</h3><h4 id="2-1SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ"><a href="#2-1SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ" class="headerlink" title="2.1SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ"></a>2.1SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">Spring Boot provides auto-configuration for Spring MVC that works well with most applications.(å¤§å¤šåœºæ™¯æˆ‘ä»¬éƒ½æ— éœ€è‡ªå®šä¹‰é…ç½®)</span><br><span class="line">The auto-configuration adds the following features on top of Springâ€™s defaults:</span><br><span class="line">â— Inclusion of ContentNegotiatingViewResolver and BeanNameViewResolver beans.</span><br><span class="line">  â—‹ å†…å®¹åå•†è§†å›¾è§£æå™¨å’ŒBeanNameè§†å›¾è§£æå™¨</span><br><span class="line">â— Support for serving static resources, including support for WebJars (covered later in this document)).</span><br><span class="line">  â—‹ é™æ€èµ„æºï¼ˆåŒ…æ‹¬webjarsï¼‰</span><br><span class="line">â— Automatic registration of Converter, GenericConverter, and Formatter beans.</span><br><span class="line">  â—‹ è‡ªåŠ¨æ³¨å†Œ Converterï¼ŒGenericConverterï¼ŒFormatter </span><br><span class="line">â— Support for HttpMessageConverters (covered later in this document).</span><br><span class="line">  â—‹ æ”¯æŒ HttpMessageConverters ï¼ˆåæ¥æˆ‘ä»¬é…åˆå†…å®¹åå•†ç†è§£åŸç†ï¼‰</span><br><span class="line">â— Automatic registration of MessageCodesResolver (covered later in this document).</span><br><span class="line">  â—‹ è‡ªåŠ¨æ³¨å†Œ MessageCodesResolver ï¼ˆå›½é™…åŒ–ç”¨ï¼‰</span><br><span class="line">â— Static index.html support.</span><br><span class="line">  â—‹ é™æ€index.html é¡µæ”¯æŒ</span><br><span class="line">â— Custom Favicon support (covered later in this document).</span><br><span class="line">  â—‹ è‡ªå®šä¹‰ Favicon  </span><br><span class="line">â— Automatic use of a ConfigurableWebBindingInitializer bean (covered later in this document).</span><br><span class="line">  â—‹ è‡ªåŠ¨ä½¿ç”¨ ConfigurableWebBindingInitializer ï¼Œï¼ˆDataBinderè´Ÿè´£å°†è¯·æ±‚æ•°æ®ç»‘å®šåˆ°JavaBeanä¸Šï¼‰</span><br></pre></td></tr></table></figure><h4 id="2-2é™æ€èµ„æºè®¿é—®"><a href="#2-2é™æ€èµ„æºè®¿é—®" class="headerlink" title="2.2é™æ€èµ„æºè®¿é—®"></a>2.2é™æ€èµ„æºè®¿é—®</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">åªè¦é™æ€èµ„æºæ”¾åœ¨ç±»è·¯å¾„ä¸‹ï¼š called /static (or /public or /resources or /META-INF/resources</span><br><span class="line">è®¿é—® ï¼š å½“å‰é¡¹ç›®æ ¹è·¯å¾„/ + é™æ€èµ„æºå </span><br><span class="line"></span><br><span class="line">åŸç†ï¼š é™æ€æ˜ å°„/<span class="strong">**ã€‚</span></span><br><span class="line"><span class="strong">è¯·æ±‚è¿›æ¥ï¼Œå…ˆå»æ‰¾Controllerçœ‹èƒ½ä¸èƒ½å¤„ç†ã€‚ä¸èƒ½å¤„ç†çš„æ‰€æœ‰è¯·æ±‚åˆéƒ½äº¤ç»™é™æ€èµ„æºå¤„ç†å™¨ã€‚é™æ€èµ„æºä¹Ÿæ‰¾ä¸åˆ°åˆ™å“åº”404é¡µé¢</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">æ”¹å˜é»˜è®¤çš„é™æ€èµ„æºè·¯å¾„</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">static-path-pattern:</span> <span class="string">/res/**</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">static-locations:</span> [<span class="string">classpath:/haha/</span>]</span><br></pre></td></tr></table></figure><h4 id="2-3é™æ€èµ„æºè®¿é—®å‰ç¼€"><a href="#2-3é™æ€èµ„æºè®¿é—®å‰ç¼€" class="headerlink" title="2.3é™æ€èµ„æºè®¿é—®å‰ç¼€"></a>2.3é™æ€èµ„æºè®¿é—®å‰ç¼€</h4><p><strong>é»˜è®¤æ— å‰ç¼€</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">static-path-pattern:</span> <span class="string">/res/**</span></span><br></pre></td></tr></table></figure><h4 id="2-4æ¬¢è¿é¡µæ”¯æŒ"><a href="#2-4æ¬¢è¿é¡µæ”¯æŒ" class="headerlink" title="2.4æ¬¢è¿é¡µæ”¯æŒ"></a>2.4æ¬¢è¿é¡µæ”¯æŒ</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">â— é™æ€èµ„æºè·¯å¾„ä¸‹  index.html</span><br><span class="line">  â—‹ å¯ä»¥é…ç½®é™æ€èµ„æºè·¯å¾„</span><br><span class="line">  â—‹ ä½†æ˜¯ä¸å¯ä»¥é…ç½®é™æ€èµ„æºçš„è®¿é—®å‰ç¼€ã€‚å¦åˆ™å¯¼è‡´ index.htmlä¸èƒ½è¢«é»˜è®¤è®¿é—®</span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">spring:</span><br><span class="line"><span class="section">#  mvc:</span></span><br><span class="line"><span class="section">#    static-path-pattern: /res/**   è¿™ä¸ªä¼šå¯¼è‡´welcome pageåŠŸèƒ½å¤±æ•ˆ</span></span><br><span class="line"></span><br><span class="line">  resources:</span><br><span class="line"><span class="code">    static-locations: [classpath:/haha/]</span></span><br></pre></td></tr></table></figure><h4 id="2-5é™æ€èµ„æºé…ç½®åŸç†"><a href="#2-5é™æ€èµ„æºé…ç½®åŸç†" class="headerlink" title="2.5é™æ€èµ„æºé…ç½®åŸç†"></a>2.5é™æ€èµ„æºé…ç½®åŸç†</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">â— SpringBootå¯åŠ¨é»˜è®¤åŠ è½½  xxxAutoConfiguration ç±»ï¼ˆè‡ªåŠ¨é…ç½®ç±»ï¼‰</span><br><span class="line">â— SpringMVCåŠŸèƒ½çš„è‡ªåŠ¨é…ç½®ç±» WebMvcAutoConfigurationï¼Œç”Ÿæ•ˆ</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class &#125;)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter(&#123; DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,</span></span><br><span class="line"><span class="meta">ValidationAutoConfiguration.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcAutoConfiguration</span> &#123;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@Import(EnableWebMvcConfiguration.class)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123; WebMvcProperties.class, ResourceProperties.class &#125;)</span></span><br><span class="line"><span class="meta">@Order(0)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">WebMvcAutoConfigurationAdapter</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">é…ç½®æ–‡ä»¶çš„ç›¸å…³å±æ€§å’Œxxxè¿›è¡Œäº†ç»‘å®šã€‚WebMvcProperties==spring.mvcã€ResourceProperties==spring.resources</span><br></pre></td></tr></table></figure><h5 id="2-5-1é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨"><a href="#2-5-1é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨" class="headerlink" title="2.5.1é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨"></a>2.5.1é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æœ‰å‚æ„é€ å™¨æ‰€æœ‰å‚æ•°çš„å€¼éƒ½ä¼šä»å®¹å™¨ä¸­ç¡®å®š</span></span><br><span class="line"><span class="comment">//ResourceProperties resourcePropertiesï¼›è·å–å’Œspring.resourcesç»‘å®šçš„æ‰€æœ‰çš„å€¼çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">//WebMvcProperties mvcProperties è·å–å’Œspring.mvcç»‘å®šçš„æ‰€æœ‰çš„å€¼çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">//ListableBeanFactory beanFactory Springçš„beanFactory</span></span><br><span class="line"><span class="comment">//HttpMessageConverters æ‰¾åˆ°æ‰€æœ‰çš„HttpMessageConverters</span></span><br><span class="line"><span class="comment">//ResourceHandlerRegistrationCustomizer æ‰¾åˆ° èµ„æºå¤„ç†å™¨çš„è‡ªå®šä¹‰å™¨ã€‚=========</span></span><br><span class="line"><span class="comment">//DispatcherServletPath  </span></span><br><span class="line"><span class="comment">//ServletRegistrationBean   ç»™åº”ç”¨æ³¨å†ŒServletã€Filter....</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">WebMvcAutoConfigurationAdapter</span><span class="params">(ResourceProperties resourceProperties, WebMvcProperties mvcProperties,</span></span><br><span class="line"><span class="params">ListableBeanFactory beanFactory, ObjectProvider&lt;HttpMessageConverters&gt; messageConvertersProvider,</span></span><br><span class="line"><span class="params">ObjectProvider&lt;ResourceHandlerRegistrationCustomizer&gt; resourceHandlerRegistrationCustomizerProvider,</span></span><br><span class="line"><span class="params">ObjectProvider&lt;DispatcherServletPath&gt; dispatcherServletPath,</span></span><br><span class="line"><span class="params">ObjectProvider&lt;ServletRegistrationBean&lt;?&gt;&gt; servletRegistrations)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.resourceProperties = resourceProperties;</span><br><span class="line"><span class="built_in">this</span>.mvcProperties = mvcProperties;</span><br><span class="line"><span class="built_in">this</span>.beanFactory = beanFactory;</span><br><span class="line"><span class="built_in">this</span>.messageConvertersProvider = messageConvertersProvider;</span><br><span class="line"><span class="built_in">this</span>.resourceHandlerRegistrationCustomizer = resourceHandlerRegistrationCustomizerProvider.getIfAvailable();</span><br><span class="line"><span class="built_in">this</span>.dispatcherServletPath = dispatcherServletPath;</span><br><span class="line"><span class="built_in">this</span>.servletRegistrations = servletRegistrations;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-5-2èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™"><a href="#2-5-2èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™" class="headerlink" title="2.5.2èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™"></a>2.5.2èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">this</span>.resourceProperties.isAddMappings()) &#123;</span><br><span class="line">logger.debug(<span class="string">&quot;Default resource handling disabled&quot;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Duration</span> <span class="variable">cachePeriod</span> <span class="operator">=</span> <span class="built_in">this</span>.resourceProperties.getCache().getPeriod();</span><br><span class="line"><span class="type">CacheControl</span> <span class="variable">cacheControl</span> <span class="operator">=</span> <span class="built_in">this</span>.resourceProperties.getCache().getCachecontrol().toHttpCacheControl();</span><br><span class="line"><span class="comment">//webjarsçš„è§„åˆ™</span></span><br><span class="line">            <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">&quot;/webjars/**&quot;</span>)) &#123;</span><br><span class="line">customizeResourceHandlerRegistration(registry.addResourceHandler(<span class="string">&quot;/webjars/**&quot;</span>)</span><br><span class="line">.addResourceLocations(<span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>)</span><br><span class="line">.setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br><span class="line">&#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//</span></span><br><span class="line"><span class="type">String</span> <span class="variable">staticPathPattern</span> <span class="operator">=</span> <span class="built_in">this</span>.mvcProperties.getStaticPathPattern();</span><br><span class="line"><span class="keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) &#123;</span><br><span class="line">customizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern)</span><br><span class="line">.addResourceLocations(getResourceLocations(<span class="built_in">this</span>.resourceProperties.getStaticLocations()))</span><br><span class="line">.setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="comment">#  mvc:</span></span><br><span class="line"><span class="comment">#    static-path-pattern: /res/**</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">add-mappings:</span> <span class="literal">false</span>   <span class="string">ç¦ç”¨æ‰€æœ‰é™æ€èµ„æºè§„åˆ™</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;spring.resources&quot;, ignoreUnknownFields = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResourceProperties</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] CLASSPATH_RESOURCE_LOCATIONS = &#123; <span class="string">&quot;classpath:/META-INF/resources/&quot;</span>,</span><br><span class="line"><span class="string">&quot;classpath:/resources/&quot;</span>, <span class="string">&quot;classpath:/static/&quot;</span>, <span class="string">&quot;classpath:/public/&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Locations of static resources. Defaults to classpath:[/META-INF/resources/,</span></span><br><span class="line"><span class="comment"> * /resources/, /static/, /public/].</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> String[] staticLocations = CLASSPATH_RESOURCE_LOCATIONS;</span><br></pre></td></tr></table></figure><h5 id="2-5-3æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™"><a href="#2-5-3æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™" class="headerlink" title="2.5.3æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™"></a>2.5.3æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„ã€‚ä¿å­˜äº†æ¯ä¸€ä¸ªHandlerèƒ½å¤„ç†å“ªäº›è¯·æ±‚ã€‚</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> WelcomePageHandlerMapping <span class="title function_">welcomePageHandlerMapping</span><span class="params">(ApplicationContext applicationContext,</span></span><br><span class="line"><span class="params">FormattingConversionService mvcConversionService, ResourceUrlProvider mvcResourceUrlProvider)</span> &#123;</span><br><span class="line"><span class="type">WelcomePageHandlerMapping</span> <span class="variable">welcomePageHandlerMapping</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WelcomePageHandlerMapping</span>(</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">TemplateAvailabilityProviders</span>(applicationContext), applicationContext, getWelcomePage(),</span><br><span class="line"><span class="built_in">this</span>.mvcProperties.getStaticPathPattern());</span><br><span class="line">welcomePageHandlerMapping.setInterceptors(getInterceptors(mvcConversionService, mvcResourceUrlProvider));</span><br><span class="line">welcomePageHandlerMapping.setCorsConfigurations(getCorsConfigurations());</span><br><span class="line"><span class="keyword">return</span> welcomePageHandlerMapping;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">WelcomePageHandlerMapping(TemplateAvailabilityProviders templateAvailabilityProviders,</span><br><span class="line">ApplicationContext applicationContext, Optional&lt;Resource&gt; welcomePage, String staticPathPattern) &#123;</span><br><span class="line"><span class="keyword">if</span> (welcomePage.isPresent() &amp;&amp; <span class="string">&quot;/**&quot;</span>.equals(staticPathPattern)) &#123;</span><br><span class="line">           <span class="comment">//è¦ç”¨æ¬¢è¿é¡µåŠŸèƒ½ï¼Œå¿…é¡»æ˜¯/**</span></span><br><span class="line">logger.info(<span class="string">&quot;Adding welcome page: &quot;</span> + welcomePage.get());</span><br><span class="line">setRootViewName(<span class="string">&quot;forward:index.html&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (welcomeTemplateExists(templateAvailabilityProviders, applicationContext)) &#123;</span><br><span class="line">           <span class="comment">// è°ƒç”¨Controller  /index</span></span><br><span class="line">logger.info(<span class="string">&quot;Adding welcome page template: index&quot;</span>);</span><br><span class="line">setRootViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-6è¯·æ±‚å‚æ•°å¤„ç†"><a href="#2-6è¯·æ±‚å‚æ•°å¤„ç†" class="headerlink" title="2.6è¯·æ±‚å‚æ•°å¤„ç†"></a>2.6è¯·æ±‚å‚æ•°å¤„ç†</h4><h5 id="2-6-1restä½¿ç”¨ä¸åŸç†"><a href="#2-6-1restä½¿ç”¨ä¸åŸç†" class="headerlink" title="2.6.1restä½¿ç”¨ä¸åŸç†"></a>2.6.1restä½¿ç”¨ä¸åŸç†</h5><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">â— Resté£æ ¼æ”¯æŒï¼ˆä½¿ç”¨HTTPè¯·æ±‚æ–¹å¼åŠ¨è¯æ¥è¡¨ç¤ºå¯¹èµ„æºçš„æ“ä½œï¼‰</span><br><span class="line">  â—‹ ä»¥å‰ï¼š/getUser   è·å–ç”¨æˆ·     /deleteUser åˆ é™¤ç”¨æˆ·    /editUser  ä¿®æ”¹ç”¨æˆ·       /saveUser ä¿å­˜ç”¨æˆ·</span><br><span class="line">  â—‹ ç°åœ¨ï¼š /user    GET-è·å–ç”¨æˆ·    DELETE-åˆ é™¤ç”¨æˆ·     PUT-ä¿®æ”¹ç”¨æˆ·      POST-ä¿å­˜ç”¨æˆ·</span><br><span class="line">  â—‹ æ ¸å¿ƒFilterï¼›HiddenHttpMethodFilter</span><br><span class="line"><span class="code">    â–  ç”¨æ³•ï¼š è¡¨å•method=postï¼Œéšè—åŸŸ _method=put</span></span><br><span class="line"><span class="code">    â–  SpringBootä¸­æ‰‹åŠ¨å¼€å¯</span></span><br><span class="line"><span class="code">  â—‹ æ‰©å±•ï¼šå¦‚ä½•æŠŠ_method è¿™ä¸ªåå­—æ¢æˆæˆ‘ä»¬è‡ªå·±å–œæ¬¢çš„ã€‚</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    <span class="meta">@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;GET-å¼ ä¸‰&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">saveUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;POST-å¼ ä¸‰&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.PUT)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">putUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;PUT-å¼ ä¸‰&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;DELETE-å¼ ä¸‰&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(HiddenHttpMethodFilter.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;spring.mvc.hiddenmethod.filter&quot;, name = &quot;enabled&quot;, matchIfMissing = false)</span></span><br><span class="line"><span class="keyword">public</span> OrderedHiddenHttpMethodFilter <span class="title function_">hiddenHttpMethodFilter</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OrderedHiddenHttpMethodFilter</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰filter</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> HiddenHttpMethodFilter <span class="title function_">hiddenHttpMethodFilter</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">HiddenHttpMethodFilter</span> <span class="variable">methodFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HiddenHttpMethodFilter</span>();</span><br><span class="line">        methodFilter.setMethodParam(<span class="string">&quot;_m&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> methodFilter;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">ReståŸç†ï¼ˆè¡¨å•æäº¤è¦ä½¿ç”¨RESTçš„æ—¶å€™ï¼‰</span><br><span class="line">â— è¡¨å•æäº¤ä¼šå¸¦ä¸Š<span class="emphasis">_method=PUT</span></span><br><span class="line"><span class="emphasis">â— è¯·æ±‚è¿‡æ¥è¢«HiddenHttpMethodFilteræ‹¦æˆª</span></span><br><span class="line"><span class="emphasis">  â—‹ è¯·æ±‚æ˜¯å¦æ­£å¸¸ï¼Œå¹¶ä¸”æ˜¯POST</span></span><br><span class="line"><span class="emphasis">    â–  è·å–åˆ°_</span>methodçš„å€¼ã€‚</span><br><span class="line"><span class="code">    â–  å…¼å®¹ä»¥ä¸‹è¯·æ±‚ï¼›PUT.DELETE.PATCH</span></span><br><span class="line"><span class="code">    â–  åŸç”Ÿrequestï¼ˆpostï¼‰ï¼ŒåŒ…è£…æ¨¡å¼requesWrapperé‡å†™äº†getMethodæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¼ å…¥çš„å€¼ã€‚</span></span><br><span class="line"><span class="code">    â–  è¿‡æ»¤å™¨é“¾æ”¾è¡Œçš„æ—¶å€™ç”¨wrapperã€‚ä»¥åçš„æ–¹æ³•è°ƒç”¨getMethodæ˜¯è°ƒç”¨requesWrapperçš„ã€‚</span></span><br></pre></td></tr></table></figure><p><strong>Restä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·</strong></p><ul><li>å¦‚PostManç›´æ¥å‘é€Putã€deleteç­‰æ–¹å¼è¯·æ±‚ï¼Œæ— éœ€Filterã€‚</li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">hiddenmethod:</span></span><br><span class="line">      <span class="attr">filter:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span>   <span class="comment">#å¼€å¯é¡µé¢è¡¨å•çš„ReståŠŸèƒ½</span></span><br></pre></td></tr></table></figure><h5 id="2-6-2è¯·æ±‚æ˜ å°„åŸç†"><a href="#2-6-2è¯·æ±‚æ˜ å°„åŸç†" class="headerlink" title="2.6.2è¯·æ±‚æ˜ å°„åŸç†"></a>2.6.2è¯·æ±‚æ˜ å°„åŸç†</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230110122239076.png" alt="image-20230110122239076"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doDispatch</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"><span class="type">HttpServletRequest</span> <span class="variable">processedRequest</span> <span class="operator">=</span> request;</span><br><span class="line"><span class="type">HandlerExecutionChain</span> <span class="variable">mappedHandler</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">multipartRequestParsed</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">WebAsyncManager</span> <span class="variable">asyncManager</span> <span class="operator">=</span> WebAsyncUtils.getAsyncManager(request);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">Exception</span> <span class="variable">dispatchException</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">processedRequest = checkMultipart(request);</span><br><span class="line">multipartRequestParsed = (processedRequest != request);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾åˆ°å½“å‰è¯·æ±‚ä½¿ç”¨å“ªä¸ªHandlerï¼ˆControllerçš„æ–¹æ³•ï¼‰å¤„ç†</span></span><br><span class="line">mappedHandler = getHandler(processedRequest);</span><br><span class="line">                </span><br><span class="line">                <span class="comment">//HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„ã€‚/xxx-&gt;&gt;xxxx</span></span><br></pre></td></tr></table></figure><h4 id="2-7æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£"><a href="#2-7æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£" class="headerlink" title="2.7æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£"></a>2.7æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.1ã€æ³¨è§£ï¼š</span><br><span class="line">@PathVariableã€@RequestHeaderã€@ModelAttributeã€@RequestParamã€@MatrixVariableã€@CookieValueã€@RequestBody</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ParameterTestController</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//  car/2/owner/zhangsan</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/car/&#123;id&#125;/owner/&#123;username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title function_">getCar</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span><br><span class="line"><span class="params">                                     <span class="meta">@PathVariable(&quot;username&quot;)</span> String name,</span></span><br><span class="line"><span class="params">                                     <span class="meta">@PathVariable</span> Map&lt;String,String&gt; pv,</span></span><br><span class="line"><span class="params">                                     <span class="meta">@RequestHeader(&quot;User-Agent&quot;)</span> String userAgent,</span></span><br><span class="line"><span class="params">                                     <span class="meta">@RequestHeader</span> Map&lt;String,String&gt; header,</span></span><br><span class="line"><span class="params">                                     <span class="meta">@RequestParam(&quot;age&quot;)</span> Integer age,</span></span><br><span class="line"><span class="params">                                     <span class="meta">@RequestParam(&quot;inters&quot;)</span> List&lt;String&gt; inters,</span></span><br><span class="line"><span class="params">                                     <span class="meta">@RequestParam</span> Map&lt;String,String&gt; params,</span></span><br><span class="line"><span class="params">                                     <span class="meta">@CookieValue(&quot;_ga&quot;)</span> String _ga,</span></span><br><span class="line"><span class="params">                                     <span class="meta">@CookieValue(&quot;_ga&quot;)</span> Cookie cookie)</span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//        map.put(&quot;id&quot;,id);</span></span><br><span class="line"><span class="comment">//        map.put(&quot;name&quot;,name);</span></span><br><span class="line"><span class="comment">//        map.put(&quot;pv&quot;,pv);</span></span><br><span class="line"><span class="comment">//        map.put(&quot;userAgent&quot;,userAgent);</span></span><br><span class="line"><span class="comment">//        map.put(&quot;headers&quot;,header);</span></span><br><span class="line">        map.put(<span class="string">&quot;age&quot;</span>,age);</span><br><span class="line">        map.put(<span class="string">&quot;inters&quot;</span>,inters);</span><br><span class="line">        map.put(<span class="string">&quot;params&quot;</span>,params);</span><br><span class="line">        map.put(<span class="string">&quot;_ga&quot;</span>,_ga);</span><br><span class="line">        System.out.println(cookie.getName()+<span class="string">&quot;===&gt;&quot;</span>+cookie.getValue());</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Map <span class="title function_">postMethod</span><span class="params">(<span class="meta">@RequestBody</span> String content)</span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;content&quot;</span>,content);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//1ã€è¯­æ³•ï¼š è¯·æ±‚è·¯å¾„ï¼š/cars/sell;low=34;brand=byd,audi,yd</span></span><br><span class="line">    <span class="comment">//2ã€SpringBooté»˜è®¤æ˜¯ç¦ç”¨äº†çŸ©é˜µå˜é‡çš„åŠŸèƒ½</span></span><br><span class="line">    <span class="comment">//      æ‰‹åŠ¨å¼€å¯ï¼šåŸç†ã€‚å¯¹äºè·¯å¾„çš„å¤„ç†ã€‚UrlPathHelperè¿›è¡Œè§£æã€‚</span></span><br><span class="line">    <span class="comment">//              removeSemicolonContentï¼ˆç§»é™¤åˆ†å·å†…å®¹ï¼‰æ”¯æŒçŸ©é˜µå˜é‡çš„</span></span><br><span class="line">    <span class="comment">//3ã€çŸ©é˜µå˜é‡å¿…é¡»æœ‰urlè·¯å¾„å˜é‡æ‰èƒ½è¢«è§£æ</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/cars/&#123;path&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Map <span class="title function_">carsSell</span><span class="params">(<span class="meta">@MatrixVariable(&quot;low&quot;)</span> Integer low,</span></span><br><span class="line"><span class="params">                        <span class="meta">@MatrixVariable(&quot;brand&quot;)</span> List&lt;String&gt; brand,</span></span><br><span class="line"><span class="params">                        <span class="meta">@PathVariable(&quot;path&quot;)</span> String path)</span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        map.put(<span class="string">&quot;low&quot;</span>,low);</span><br><span class="line">        map.put(<span class="string">&quot;brand&quot;</span>,brand);</span><br><span class="line">        map.put(<span class="string">&quot;path&quot;</span>,path);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// /boss/1;age=20/2;age=10</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/boss/&#123;bossId&#125;/&#123;empId&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Map <span class="title function_">boss</span><span class="params">(<span class="meta">@MatrixVariable(value = &quot;age&quot;,pathVar = &quot;bossId&quot;)</span> Integer bossAge,</span></span><br><span class="line"><span class="params">                    <span class="meta">@MatrixVariable(value = &quot;age&quot;,pathVar = &quot;empId&quot;)</span> Integer empAge)</span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        map.put(<span class="string">&quot;bossAge&quot;</span>,bossAge);</span><br><span class="line">        map.put(<span class="string">&quot;empAge&quot;</span>,empAge);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-8æ•°æ®å“åº”ä¸å†…å®¹åå•†"><a href="#2-8æ•°æ®å“åº”ä¸å†…å®¹åå•†" class="headerlink" title="2.8æ•°æ®å“åº”ä¸å†…å®¹åå•†"></a>2.8æ•°æ®å“åº”ä¸å†…å®¹åå•†</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230111110510663.png" alt="image-20230111110510663"></p><h5 id="2-8-1å“åº”JSON"><a href="#2-8-1å“åº”JSON" class="headerlink" title="2.8.1å“åº”JSON"></a>2.8.1å“åº”JSON</h5><p><strong>1.jackson.jar+@ResponseBody</strong></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">webåœºæ™¯è‡ªåŠ¨å¼•å…¥äº†jsonåœºæ™¯</span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230111111123609.png" alt="image-20230111111123609"></p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">2.è¿”å›å€¼è§£æå™¨åŸç†</span><br><span class="line">â— 1ã€è¿”å›å€¼å¤„ç†å™¨åˆ¤æ–­æ˜¯å¦æ”¯æŒè¿™ç§ç±»å‹è¿”å›å€¼ supportsReturnType</span><br><span class="line">â— 2ã€è¿”å›å€¼å¤„ç†å™¨è°ƒç”¨ handleReturnValue è¿›è¡Œå¤„ç†</span><br><span class="line">â— 3ã€RequestResponseBodyMethodProcessor å¯ä»¥å¤„ç†è¿”å›å€¼æ ‡äº†@ResponseBody æ³¨è§£çš„ã€‚</span><br><span class="line">  â—‹ 1.  åˆ©ç”¨ MessageConverters è¿›è¡Œå¤„ç† å°†æ•°æ®å†™ä¸ºjson</span><br><span class="line"><span class="code">    â–  1ã€å†…å®¹åå•†ï¼ˆæµè§ˆå™¨é»˜è®¤ä¼šä»¥è¯·æ±‚å¤´çš„æ–¹å¼å‘Šè¯‰æœåŠ¡å™¨ä»–èƒ½æ¥å—ä»€ä¹ˆæ ·çš„å†…å®¹ç±»å‹ï¼‰</span></span><br><span class="line"><span class="code">    â–  2ã€æœåŠ¡å™¨æœ€ç»ˆæ ¹æ®è‡ªå·±è‡ªèº«çš„èƒ½åŠ›ï¼Œå†³å®šæœåŠ¡å™¨èƒ½ç”Ÿäº§å‡ºä»€ä¹ˆæ ·å†…å®¹ç±»å‹çš„æ•°æ®ï¼Œ</span></span><br><span class="line"><span class="code">    â–  3ã€SpringMVCä¼šæŒ¨ä¸ªéå†æ‰€æœ‰å®¹å™¨åº•å±‚çš„ HttpMessageConverter ï¼Œçœ‹è°èƒ½å¤„ç†ï¼Ÿ</span></span><br><span class="line"><span class="code">      â— 1ã€å¾—åˆ°MappingJackson2HttpMessageConverterå¯ä»¥å°†å¯¹è±¡å†™ä¸ºjson</span></span><br><span class="line"><span class="code">      â— 2ã€åˆ©ç”¨MappingJackson2HttpMessageConverterå°†å¯¹è±¡è½¬ä¸ºjsonå†å†™å‡ºå»ã€‚</span></span><br></pre></td></tr></table></figure><h5 id="2-8-2SpringMVCæ”¯æŒå“ªäº›è¿”å›å€¼"><a href="#2-8-2SpringMVCæ”¯æŒå“ªäº›è¿”å›å€¼" class="headerlink" title="2.8.2SpringMVCæ”¯æŒå“ªäº›è¿”å›å€¼"></a>2.8.2SpringMVCæ”¯æŒå“ªäº›è¿”å›å€¼</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ModelAndView</span><br><span class="line">Model</span><br><span class="line">View</span><br><span class="line">ResponseEntity </span><br><span class="line">ResponseBodyEmitter</span><br><span class="line">StreamingResponseBody</span><br><span class="line">HttpEntity</span><br><span class="line">HttpHeaders</span><br><span class="line">Callable</span><br><span class="line">DeferredResult</span><br><span class="line">ListenableFuture</span><br><span class="line">CompletionStage</span><br><span class="line">WebAsyncTask</span><br><span class="line">æœ‰ <span class="meta">@ModelAttribute</span> ä¸”ä¸ºå¯¹è±¡ç±»å‹çš„</span><br><span class="line"><span class="meta">@ResponseBody</span> æ³¨è§£ ---&gt; RequestResponseBodyMethodProcessorï¼›</span><br></pre></td></tr></table></figure><h5 id="2-8-3å†…å®¹åå•†"><a href="#2-8-3å†…å®¹åå•†" class="headerlink" title="2.8.3å†…å®¹åå•†"></a>2.8.3å†…å®¹åå•†</h5><p><strong>æ ¹æ®å®¢æˆ·ç«¯æ¥å—èƒ½åŠ›ä¸åŒ,è¿”å›ä¸åŒåª’ä½“ç±»å‹çš„æ•°æ®</strong></p><p><strong>1.å¼•å…¥xmlä¾èµ–</strong></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230111113735624.png" alt="image-20230111113735624"></p><p><strong>3.å¼€å¯æµè§ˆå™¨å‚æ•°æ–¹å¼å†…å®¹åå•†åŠŸèƒ½</strong></p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">    <span class="attr">contentnegotiation:</span></span><br><span class="line">      <span class="attr">favor-parameter:</span> <span class="literal">true</span>  <span class="comment">#å¼€å¯è¯·æ±‚å‚æ•°å†…å®¹åå•†æ¨¡å¼</span></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">å‘è¯·æ±‚ï¼š http://localhost:8080/test/person?format=json</span><br><span class="line">http://localhost:8080/test/person?format=xml</span><br></pre></td></tr></table></figure><h4 id="2-9è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“"><a href="#2-9è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“" class="headerlink" title="2.9è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“"></a>2.9è§†å›¾è§£æä¸æ¨¡æ¿å¼•æ“</h4><p>è§†å›¾è§£æï¼š<strong>SpringBooté»˜è®¤ä¸æ”¯æŒ JSPï¼Œéœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹æ¨¡æ¿å¼•æ“æŠ€æœ¯å®ç°é¡µé¢æ¸²æŸ“ã€‚</strong></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230111114154670.png" alt="image-20230111114154670"></p><h5 id="2-9-1æ¨¡æ¿å¼•æ“-Thymeleaf"><a href="#2-9-1æ¨¡æ¿å¼•æ“-Thymeleaf" class="headerlink" title="2.9.1æ¨¡æ¿å¼•æ“-Thymeleaf"></a>2.9.1æ¨¡æ¿å¼•æ“-Thymeleaf</h5><p>1.<strong>åŸºæœ¬è¯­æ³•</strong></p><table><thead><tr><th>è¡¨è¾¾å¼åå­—</th><th>è¯­æ³•</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>å˜é‡å–å€¼</td><td>${â€¦}</td><td>è·å–è¯·æ±‚åŸŸã€sessionåŸŸã€å¯¹è±¡ç­‰å€¼</td></tr><tr><td>é€‰æ‹©å˜é‡</td><td>*{â€¦}</td><td>è·å–ä¸Šä¸‹æ–‡å¯¹è±¡å€¼</td></tr><tr><td>æ¶ˆæ¯</td><td>#{â€¦}</td><td>è·å–å›½é™…åŒ–ç­‰å€¼</td></tr><tr><td>é“¾æ¥</td><td>@{â€¦}</td><td>ç”Ÿæˆé“¾æ¥</td></tr><tr><td>ç‰‡æ®µè¡¨è¾¾å¼</td><td>~{â€¦}</td><td>jsp:include ä½œç”¨ï¼Œå¼•å…¥å…¬å…±é¡µé¢ç‰‡æ®µ</td></tr></tbody></table><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230111114416108.png" alt="image-20230111114416108"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230111114542890.png" alt="image-20230111114542890"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230111114553687.png" alt="image-20230111114553687"></p><h5 id="2-9-2Thymeleafä½¿ç”¨"><a href="#2-9-2Thymeleafä½¿ç”¨" class="headerlink" title="2.9.2Thymeleafä½¿ç”¨"></a>2.9.2Thymeleafä½¿ç”¨</h5><p><strong>1.å¼•å…¥Starter</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p><strong>2.è‡ªåŠ¨é…ç½®å¥½äº†Themeleaf</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(ThymeleafProperties.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123; TemplateMode.class, SpringTemplateEngine.class &#125;)</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter(&#123; WebMvcAutoConfiguration.class, WebFluxAutoConfiguration.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThymeleafAutoConfiguration</span> &#123; &#125;</span><br></pre></td></tr></table></figure><p>è‡ªåŠ¨é…å¥½çš„ç­–ç•¥</p><ul><li>1ã€æ‰€æœ‰thymeleafçš„é…ç½®å€¼éƒ½åœ¨ ThymeleafProperties</li><li>2ã€é…ç½®å¥½äº† <strong>SpringTemplateEngine</strong> </li><li><strong>3ã€é…å¥½äº†</strong> <strong>ThymeleafViewResolver</strong> </li><li>4ã€æˆ‘ä»¬åªéœ€è¦ç›´æ¥å¼€å‘é¡µé¢</li></ul><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;classpath:/templates/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_SUFFIX</span> <span class="operator">=</span> <span class="string">&quot;.html&quot;</span>;  <span class="comment">//xxx.html</span></span><br></pre></td></tr></table></figure><h4 id="2-10æ‹¦æˆªå™¨"><a href="#2-10æ‹¦æˆªå™¨" class="headerlink" title="2.10æ‹¦æˆªå™¨"></a>2.10æ‹¦æˆªå™¨</h4><h5 id="2-10-1HandlerInterceptoræ¥å£"><a href="#2-10-1HandlerInterceptoræ¥å£" class="headerlink" title="2.10.1HandlerInterceptoræ¥å£"></a><strong>2.10.1HandlerInterceptoræ¥å£</strong></h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç™»å½•æ£€æŸ¥</span></span><br><span class="line"><span class="comment"> * 1ã€é…ç½®å¥½æ‹¦æˆªå™¨è¦æ‹¦æˆªå“ªäº›è¯·æ±‚</span></span><br><span class="line"><span class="comment"> * 2ã€æŠŠè¿™äº›é…ç½®æ”¾åœ¨å®¹å™¨ä¸­</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">requestURI</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        log.info(<span class="string">&quot;preHandleæ‹¦æˆªçš„è¯·æ±‚è·¯å¾„æ˜¯&#123;&#125;&quot;</span>,requestURI);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç™»å½•æ£€æŸ¥é€»è¾‘</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line"></span><br><span class="line">        <span class="type">Object</span> <span class="variable">loginUser</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;loginUser&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(loginUser != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//æ”¾è¡Œ</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‹¦æˆªä½ã€‚æœªç™»å½•ã€‚è·³è½¬åˆ°ç™»å½•é¡µ</span></span><br><span class="line">        request.setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;è¯·å…ˆç™»å½•&quot;</span>);</span><br><span class="line"><span class="comment">//        re.sendRedirect(&quot;/&quot;);</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/&quot;</span>).forward(request,response);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆä»¥å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> modelAndView</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        log.info(<span class="string">&quot;postHandleæ‰§è¡Œ&#123;&#125;&quot;</span>,modelAndView);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¡µé¢æ¸²æŸ“ä»¥å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        log.info(<span class="string">&quot;afterCompletionæ‰§è¡Œå¼‚å¸¸&#123;&#125;&quot;</span>,ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-10-2é…ç½®æ‹¦æˆªå™¨"><a href="#2-10-2é…ç½®æ‹¦æˆªå™¨" class="headerlink" title="2.10.2é…ç½®æ‹¦æˆªå™¨"></a>2.10.2é…ç½®æ‹¦æˆªå™¨</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1ã€ç¼–å†™ä¸€ä¸ªæ‹¦æˆªå™¨å®ç°HandlerInterceptoræ¥å£</span></span><br><span class="line"><span class="comment"> * 2ã€æ‹¦æˆªå™¨æ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼ˆå®ç°WebMvcConfigurerçš„addInterceptorsï¼‰</span></span><br><span class="line"><span class="comment"> * 3ã€æŒ‡å®šæ‹¦æˆªè§„åˆ™ã€å¦‚æœæ˜¯æ‹¦æˆªæ‰€æœ‰ï¼Œé™æ€èµ„æºä¹Ÿä¼šè¢«æ‹¦æˆªã€‘</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminWebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">LoginInterceptor</span>())</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>)  <span class="comment">//æ‰€æœ‰è¯·æ±‚éƒ½è¢«æ‹¦æˆªåŒ…æ‹¬é™æ€èµ„æº</span></span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/&quot;</span>,<span class="string">&quot;/login&quot;</span>,<span class="string">&quot;/css/**&quot;</span>,<span class="string">&quot;/fonts/**&quot;</span>,<span class="string">&quot;/images/**&quot;</span>,<span class="string">&quot;/js/**&quot;</span>); <span class="comment">//æ”¾è¡Œçš„è¯·æ±‚</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-10-3-æ‹¦æˆªå™¨åŸç†"><a href="#2-10-3-æ‹¦æˆªå™¨åŸç†" class="headerlink" title="2.10.3.æ‹¦æˆªå™¨åŸç†"></a>2.10.3.æ‹¦æˆªå™¨åŸç†</h5><p>1ã€æ ¹æ®å½“å‰è¯·æ±‚ï¼Œæ‰¾åˆ°<strong>HandlerExecutionChainã€</strong>å¯ä»¥å¤„ç†è¯·æ±‚çš„handlerä»¥åŠhandlerçš„æ‰€æœ‰ æ‹¦æˆªå™¨ã€‘</p><p>2ã€å…ˆæ¥<strong>é¡ºåºæ‰§è¡Œ</strong> æ‰€æœ‰æ‹¦æˆªå™¨çš„ preHandleæ–¹æ³•</p><ul><li>1ã€å¦‚æœå½“å‰æ‹¦æˆªå™¨prehandlerè¿”å›ä¸ºtrueã€‚åˆ™æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨çš„preHandle</li><li>2ã€å¦‚æœå½“å‰æ‹¦æˆªå™¨è¿”å›ä¸ºfalseã€‚ç›´æ¥    å€’åºæ‰§è¡Œæ‰€æœ‰å·²ç»æ‰§è¡Œäº†çš„æ‹¦æˆªå™¨çš„  afterCompletionï¼›</li></ul><p><strong>3ã€å¦‚æœä»»ä½•ä¸€ä¸ªæ‹¦æˆªå™¨è¿”å›falseã€‚ç›´æ¥è·³å‡ºä¸æ‰§è¡Œç›®æ ‡æ–¹æ³•</strong></p><p><strong>4ã€æ‰€æœ‰æ‹¦æˆªå™¨éƒ½è¿”å›Trueã€‚æ‰§è¡Œç›®æ ‡æ–¹æ³•</strong></p><p><strong>5ã€å€’åºæ‰§è¡Œæ‰€æœ‰æ‹¦æˆªå™¨çš„postHandleæ–¹æ³•ã€‚</strong></p><p><strong>6ã€å‰é¢çš„æ­¥éª¤æœ‰ä»»ä½•å¼‚å¸¸éƒ½ä¼šç›´æ¥å€’åºè§¦å‘</strong> afterCompletion</p><p>7ã€é¡µé¢æˆåŠŸæ¸²æŸ“å®Œæˆä»¥åï¼Œä¹Ÿä¼šå€’åºè§¦å‘ afterCompletion</p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230111122025979.png" alt="image-20230111122025979"></p><h4 id="2-11æ–‡ä»¶ä¸Šä¼ "><a href="#2-11æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="2.11æ–‡ä»¶ä¸Šä¼ "></a>2.11æ–‡ä»¶ä¸Šä¼ </h4><h5 id="1-é¡µé¢è¡¨å•"><a href="#1-é¡µé¢è¡¨å•" class="headerlink" title="1.é¡µé¢è¡¨å•"></a>1.é¡µé¢è¡¨å•</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/upload&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="2-æ–‡ä»¶ä¸Šä¼ ä»£ç "><a href="#2-æ–‡ä»¶ä¸Šä¼ ä»£ç " class="headerlink" title="2.æ–‡ä»¶ä¸Šä¼ ä»£ç "></a>2.æ–‡ä»¶ä¸Šä¼ ä»£ç </h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MultipartFile è‡ªåŠ¨å°è£…ä¸Šä¼ è¿‡æ¥çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> email</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> headerImg</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> photos</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(<span class="meta">@RequestParam(&quot;email&quot;)</span> String email,</span></span><br><span class="line"><span class="params">                     <span class="meta">@RequestParam(&quot;username&quot;)</span> String username,</span></span><br><span class="line"><span class="params">                     <span class="meta">@RequestPart(&quot;headerImg&quot;)</span> MultipartFile headerImg,</span></span><br><span class="line"><span class="params">                     <span class="meta">@RequestPart(&quot;photos&quot;)</span> MultipartFile[] photos)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">    log.info(<span class="string">&quot;ä¸Šä¼ çš„ä¿¡æ¯ï¼šemail=&#123;&#125;ï¼Œusername=&#123;&#125;ï¼ŒheaderImg=&#123;&#125;ï¼Œphotos=&#123;&#125;&quot;</span>,</span><br><span class="line">            email,username,headerImg.getSize(),photos.length);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!headerImg.isEmpty())&#123;</span><br><span class="line">        <span class="comment">//ä¿å­˜åˆ°æ–‡ä»¶æœåŠ¡å™¨ï¼ŒOSSæœåŠ¡å™¨</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> headerImg.getOriginalFilename();</span><br><span class="line">        headerImg.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;H:\\cache\\&quot;</span>+originalFilename));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(photos.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span> (MultipartFile photo : photos) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!photo.isEmpty())&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> photo.getOriginalFilename();</span><br><span class="line">                photo.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;H:\\cache\\&quot;</span>+originalFilename));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;main&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-è‡ªåŠ¨é…ç½®åŸç†"><a href="#3-è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="3.è‡ªåŠ¨é…ç½®åŸç†"></a>3.è‡ªåŠ¨é…ç½®åŸç†</h5><p>**æ–‡ä»¶ä¸Šä¼ è‡ªåŠ¨é…ç½®ç±»-MultipartAutoConfiguration-**<strong>MultipartProperties</strong></p><ul><li><p>è‡ªåŠ¨é…ç½®å¥½äº† <strong>StandardServletMultipartResolver   ã€æ–‡ä»¶ä¸Šä¼ è§£æå™¨ã€‘</strong></p></li><li><p><strong>åŸç†æ­¥éª¤</strong></p></li><li><ul><li><strong>1ã€è¯·æ±‚è¿›æ¥ä½¿ç”¨æ–‡ä»¶ä¸Šä¼ è§£æå™¨åˆ¤æ–­ï¼ˆ</strong>isMultipart<strong>ï¼‰å¹¶å°è£…ï¼ˆ</strong>resolveMultipartï¼Œ<strong>è¿”å›</strong>MultipartHttpServletRequest<strong>ï¼‰æ–‡ä»¶ä¸Šä¼ è¯·æ±‚</strong></li><li><strong>2ã€å‚æ•°è§£æå™¨æ¥è§£æè¯·æ±‚ä¸­çš„æ–‡ä»¶å†…å®¹å°è£…æˆMultipartFile</strong></li><li><strong>3ã€å°†requestä¸­æ–‡ä»¶ä¿¡æ¯å°è£…ä¸ºä¸€ä¸ªMapï¼›</strong>MultiValueMap&lt;String, MultipartFile&gt;</li></ul></li></ul><p><strong>FileCopyUtils</strong>ã€‚å®ç°æ–‡ä»¶æµçš„æ‹·è´</p><h4 id="2-12å¼‚å¸¸å¤„ç†"><a href="#2-12å¼‚å¸¸å¤„ç†" class="headerlink" title="2.12å¼‚å¸¸å¤„ç†"></a>2.12å¼‚å¸¸å¤„ç†</h4><h5 id="1-é”™è¯¯å¤„ç†"><a href="#1-é”™è¯¯å¤„ç†" class="headerlink" title="1.é”™è¯¯å¤„ç†"></a>1.é”™è¯¯å¤„ç†</h5><ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring Bootæä¾›<code>/error</code>å¤„ç†æ‰€æœ‰é”™è¯¯çš„æ˜ å°„</li><li>å¯¹äºæœºå™¨å®¢æˆ·ç«¯ï¼Œå®ƒå°†ç”ŸæˆJSONå“åº”ï¼Œå…¶ä¸­åŒ…å«é”™è¯¯ï¼ŒHTTPçŠ¶æ€å’Œå¼‚å¸¸æ¶ˆæ¯çš„è¯¦ç»†ä¿¡æ¯ã€‚å¯¹äºæµè§ˆå™¨å®¢æˆ·ç«¯ï¼Œå“åº”ä¸€ä¸ªâ€œ whitelabelâ€é”™è¯¯è§†å›¾ï¼Œä»¥HTMLæ ¼å¼å‘ˆç°ç›¸åŒçš„æ•°æ®</li></ul><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230111122257821.png" alt="image-20230111122257821"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230111122336010.png" alt="image-20230111122336010"></p>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -SpringBoot -åç«¯ -æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootå­¦ä¹ æ€»ç»“(1)</title>
      <link href="/2023/01/09/SpringBoot%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"/>
      <url>/2023/01/09/SpringBoot%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="SpringBootå­¦ä¹ æ€»ç»“"><a href="#SpringBootå­¦ä¹ æ€»ç»“" class="headerlink" title="SpringBootå­¦ä¹ æ€»ç»“"></a>SpringBootå­¦ä¹ æ€»ç»“</h2><h3 id="1-SpringBootä¼˜ç‚¹"><a href="#1-SpringBootä¼˜ç‚¹" class="headerlink" title="1.SpringBootä¼˜ç‚¹"></a>1.SpringBootä¼˜ç‚¹</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">â— Create stand-alone Spring applications</span><br><span class="line">  â—‹ åˆ›å»ºç‹¬ç«‹Springåº”ç”¨</span><br><span class="line">â— Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</span><br><span class="line">  â—‹ å†…åµŒwebæœåŠ¡å™¨</span><br><span class="line">â— Provide opinionated &#x27;starter&#x27; dependencies to simplify your build configuration</span><br><span class="line">  â—‹ è‡ªåŠ¨starterä¾èµ–ï¼Œç®€åŒ–æ„å»ºé…ç½®</span><br><span class="line">â— Automatically configure Spring and 3rd party libraries whenever possible</span><br><span class="line">  â—‹ è‡ªåŠ¨é…ç½®Springä»¥åŠç¬¬ä¸‰æ–¹åŠŸèƒ½</span><br><span class="line">â— Provide production-ready features such as metrics, health checks, and externalized configuration</span><br><span class="line">  â—‹ æä¾›ç”Ÿäº§çº§åˆ«çš„ç›‘æ§ã€å¥åº·æ£€æŸ¥åŠå¤–éƒ¨åŒ–é…ç½®</span><br><span class="line">â— Absolutely no code generation and no requirement for XML configuration</span><br><span class="line">  â—‹ æ— ä»£ç ç”Ÿæˆã€æ— éœ€ç¼–å†™XML</span><br><span class="line">SpringBootæ˜¯æ•´åˆSpringæŠ€æœ¯æ ˆçš„ä¸€ç«™å¼æ¡†æ¶</span><br><span class="line">SpringBootæ˜¯ç®€åŒ–SpringæŠ€æœ¯æ ˆçš„å¿«é€Ÿå¼€å‘è„šæ‰‹æ¶</span><br></pre></td></tr></table></figure><h3 id="2-SpringBootå…¥é—¨æ¡ˆä¾‹"><a href="#2-SpringBootå…¥é—¨æ¡ˆä¾‹" class="headerlink" title="2.SpringBootå…¥é—¨æ¡ˆä¾‹"></a>2.SpringBootå…¥é—¨æ¡ˆä¾‹</h3><h4 id="2-1mavené…ç½®é˜¿é‡Œäº‘é•œåƒ-ä¾èµ–ä¸‹è½½åŠ é€Ÿ"><a href="#2-1mavené…ç½®é˜¿é‡Œäº‘é•œåƒ-ä¾èµ–ä¸‹è½½åŠ é€Ÿ" class="headerlink" title="2.1mavené…ç½®é˜¿é‡Œäº‘é•œåƒ(ä¾èµ–ä¸‹è½½åŠ é€Ÿ)"></a>2.1mavené…ç½®é˜¿é‡Œäº‘é•œåƒ(ä¾èµ–ä¸‹è½½åŠ é€Ÿ)</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">  <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">id</span>&gt;</span>jdk-1.8<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">jdk</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maven.compiler.compilerVersion</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.compilerVersion</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-2å¼•å…¥ä¾èµ–"><a href="#2-2å¼•å…¥ä¾èµ–" class="headerlink" title="2.2å¼•å…¥ä¾èµ–"></a>2.2å¼•å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-3åˆ›å»ºä¸»ç¨‹åº"><a href="#2-3åˆ›å»ºä¸»ç¨‹åº" class="headerlink" title="2.3åˆ›å»ºä¸»ç¨‹åº"></a>2.3åˆ›å»ºä¸»ç¨‹åº</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸»ç¨‹åºç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@SpringBootApplication</span>ï¼šè¿™æ˜¯ä¸€ä¸ªSpringBootåº”ç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MainApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-4ç¼–å†™ä¸šåŠ¡"><a href="#2-4ç¼–å†™ä¸šåŠ¡" class="headerlink" title="2.4ç¼–å†™ä¸šåŠ¡"></a>2.4ç¼–å†™ä¸šåŠ¡</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">handle01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, Spring Boot 2!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-5é…ç½®æ–‡ä»¶"><a href="#2-5é…ç½®æ–‡ä»¶" class="headerlink" title="2.5é…ç½®æ–‡ä»¶"></a>2.5é…ç½®æ–‡ä»¶</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">//æŒ‡å®šSpringBootè¿è¡Œçš„åå°ç«¯å£</span><br><span class="line">server.port=8888 </span><br></pre></td></tr></table></figure><h4 id="2-6é¡¹ç›®æ‰“åŒ…éƒ¨ç½²"><a href="#2-6é¡¹ç›®æ‰“åŒ…éƒ¨ç½²" class="headerlink" title="2.6é¡¹ç›®æ‰“åŒ…éƒ¨ç½²"></a>2.6é¡¹ç›®æ‰“åŒ…éƒ¨ç½²</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">æŠŠé¡¹ç›®æ‰“æˆjaråŒ…ï¼Œåœ¨ç›®æ ‡æœåŠ¡å™¨è¿è¡Œï¼Œjava -jar xxxx.jar</span><br></pre></td></tr></table></figure><h3 id="3-äº†è§£SpringBootè‡ªåŠ¨é…ç½®åŸç†"><a href="#3-äº†è§£SpringBootè‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="3.äº†è§£SpringBootè‡ªåŠ¨é…ç½®åŸç†"></a>3.äº†è§£SpringBootè‡ªåŠ¨é…ç½®åŸç†</h3><h4 id="3-1ä¾èµ–ç®¡ç†"><a href="#3-1ä¾èµ–ç®¡ç†" class="headerlink" title="3.1ä¾èµ–ç®¡ç†"></a>3.1ä¾èµ–ç®¡ç†</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">çˆ¶é¡¹ç›®åšä¾èµ–ç®¡ç†    </span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">ä»–çš„çˆ¶é¡¹ç›®</span><br><span class="line"> <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">å‡ ä¹å£°æ˜äº†æ‰€æœ‰å¼€å‘ä¸­å¸¸ç”¨çš„ä¾èµ–çš„ç‰ˆæœ¬å·,è‡ªåŠ¨ç‰ˆæœ¬ä»²è£æœºåˆ¶</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">å¼€å‘å¯¼å…¥starteråœºæ™¯å¯åŠ¨å™¨</span><br><span class="line">1ã€è§åˆ°å¾ˆå¤š spring-boot-starter-* ï¼š *å°±æŸç§åœºæ™¯</span><br><span class="line">2ã€åªè¦å¼•å…¥starterï¼Œè¿™ä¸ªåœºæ™¯çš„æ‰€æœ‰å¸¸è§„éœ€è¦çš„ä¾èµ–æˆ‘ä»¬éƒ½è‡ªåŠ¨å¼•å…¥</span><br><span class="line">3ã€SpringBootæ‰€æœ‰æ”¯æŒçš„åœºæ™¯</span><br><span class="line">https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter</span><br><span class="line">4ã€è§åˆ°çš„  *-spring-boot-starterï¼š ç¬¬ä¸‰æ–¹ä¸ºæˆ‘ä»¬æä¾›çš„ç®€åŒ–å¼€å‘çš„åœºæ™¯å¯åŠ¨å™¨ã€‚</span><br><span class="line">5ã€æ‰€æœ‰åœºæ™¯å¯åŠ¨å™¨æœ€åº•å±‚çš„ä¾èµ–</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">1ã€å¼•å…¥ä¾èµ–é»˜è®¤éƒ½å¯ä»¥ä¸å†™ç‰ˆæœ¬</span><br><span class="line">2ã€å¼•å…¥éç‰ˆæœ¬ä»²è£çš„jarï¼Œè¦å†™ç‰ˆæœ¬å·ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">å¯ä»¥ä¿®æ”¹é»˜è®¤ç‰ˆæœ¬å·</span><br><span class="line">1ã€æŸ¥çœ‹spring-boot-dependenciesé‡Œé¢è§„å®šå½“å‰ä¾èµ–çš„ç‰ˆæœ¬ ç”¨çš„ keyã€‚</span><br><span class="line">2ã€åœ¨å½“å‰é¡¹ç›®é‡Œé¢é‡å†™é…ç½®</span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.43<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-2è‡ªåŠ¨é…ç½®"><a href="#3-2è‡ªåŠ¨é…ç½®" class="headerlink" title="3.2è‡ªåŠ¨é…ç½®"></a>3.2è‡ªåŠ¨é…ç½®</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">â— è‡ªåŠ¨é…å¥½Tomcat</span><br><span class="line">  â—‹ å¼•å…¥Tomcatä¾èµ–ã€‚</span><br><span class="line">  â—‹ é…ç½®Tomcat</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">â— è‡ªåŠ¨é…å¥½SpringMVC</span><br><span class="line">  â—‹ å¼•å…¥SpringMVCå…¨å¥—ç»„ä»¶</span><br><span class="line">  â—‹ è‡ªåŠ¨é…å¥½SpringMVCå¸¸ç”¨ç»„ä»¶ï¼ˆåŠŸèƒ½ï¼‰</span><br><span class="line">â— è‡ªåŠ¨é…å¥½Webå¸¸è§åŠŸèƒ½ï¼Œå¦‚ï¼šå­—ç¬¦ç¼–ç é—®é¢˜</span><br><span class="line">  â—‹ SpringBootå¸®æˆ‘ä»¬é…ç½®å¥½äº†æ‰€æœ‰webå¼€å‘çš„å¸¸è§åœºæ™¯</span><br><span class="line">â— é»˜è®¤çš„åŒ…ç»“æ„</span><br><span class="line">  â—‹ ä¸»ç¨‹åºæ‰€åœ¨åŒ…åŠå…¶ä¸‹é¢çš„æ‰€æœ‰å­åŒ…é‡Œé¢çš„ç»„ä»¶éƒ½ä¼šè¢«é»˜è®¤æ‰«æè¿›æ¥</span><br><span class="line">  â—‹ æ— éœ€ä»¥å‰çš„åŒ…æ‰«æé…ç½®</span><br><span class="line">  â—‹ æƒ³è¦æ”¹å˜æ‰«æè·¯å¾„ï¼Œ@SpringBootApplication(scanBasePackages=&quot;com.atguigu&quot;)</span><br><span class="line">    â–  æˆ–è€…@ComponentScan æŒ‡å®šæ‰«æè·¯å¾„</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line">ç­‰åŒäº</span><br><span class="line"><span class="meta">@SpringBootConfiguration</span> <span class="comment">//SpringBooté…ç½®ç±»</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span> <span class="comment">//å¼€å¯è‡ªåŠ¨é…ç½®</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.atguigu.boot&quot;)</span></span><br></pre></td></tr></table></figure><h3 id="4-å®¹å™¨åŠŸèƒ½"><a href="#4-å®¹å™¨åŠŸèƒ½" class="headerlink" title="4.å®¹å™¨åŠŸèƒ½"></a>4.å®¹å™¨åŠŸèƒ½</h3><h4 id="4-1ç»„ä»¶æ·»åŠ "><a href="#4-1ç»„ä»¶æ·»åŠ " class="headerlink" title="4.1ç»„ä»¶æ·»åŠ "></a>4.1ç»„ä»¶æ·»åŠ </h4><h5 id="4-1-1-Configuration"><a href="#4-1-1-Configuration" class="headerlink" title="4.1.1@Configuration"></a>4.1.1@Configuration</h5><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">â— åŸºæœ¬ä½¿ç”¨</span><br><span class="line">â— Fullæ¨¡å¼ä¸Liteæ¨¡å¼</span><br><span class="line">  â—‹ ç¤ºä¾‹</span><br><span class="line">  â—‹ æœ€ä½³å®æˆ˜</span><br><span class="line"><span class="code">    â–  é…ç½® ç±»ç»„ä»¶ä¹‹é—´æ— ä¾èµ–å…³ç³»ç”¨Liteæ¨¡å¼åŠ é€Ÿå®¹å™¨å¯åŠ¨è¿‡ç¨‹ï¼Œå‡å°‘åˆ¤æ–­</span></span><br><span class="line"><span class="code">    â–  é…ç½®ç±»ç»„ä»¶ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼Œæ–¹æ³•ä¼šè¢«è°ƒç”¨å¾—åˆ°ä¹‹å‰å•å®ä¾‹ç»„ä»¶ï¼Œç”¨Fullæ¨¡å¼</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">#############################Configurationä½¿ç”¨ç¤ºä¾‹######################################################</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1ã€é…ç½®ç±»é‡Œé¢ä½¿ç”¨<span class="doctag">@Bean</span>æ ‡æ³¨åœ¨æ–¹æ³•ä¸Šç»™å®¹å™¨æ³¨å†Œç»„ä»¶ï¼Œé»˜è®¤ä¹Ÿæ˜¯å•å®ä¾‹çš„</span></span><br><span class="line"><span class="comment"> * 2ã€é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯ç»„ä»¶</span></span><br><span class="line"><span class="comment"> * 3ã€proxyBeanMethodsï¼šä»£ç†beançš„æ–¹æ³•</span></span><br><span class="line"><span class="comment"> *      Full(proxyBeanMethods = true)ã€ã€ä¿è¯æ¯ä¸ª<span class="doctag">@Bean</span>æ–¹æ³•è¢«è°ƒç”¨å¤šå°‘æ¬¡è¿”å›çš„ç»„ä»¶éƒ½æ˜¯å•å®ä¾‹çš„ã€‘</span></span><br><span class="line"><span class="comment"> *      Lite(proxyBeanMethods = false)ã€æ¯ä¸ª<span class="doctag">@Bean</span>æ–¹æ³•è¢«è°ƒç”¨å¤šå°‘æ¬¡è¿”å›çš„ç»„ä»¶éƒ½æ˜¯æ–°åˆ›å»ºçš„ã€‘</span></span><br><span class="line"><span class="comment"> *      ç»„ä»¶ä¾èµ–å¿…é¡»ä½¿ç”¨Fullæ¨¡å¼é»˜è®¤ã€‚å…¶ä»–é»˜è®¤æ˜¯å¦Liteæ¨¡å¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span> <span class="comment">//å‘Šè¯‰SpringBootè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±» == é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Full:å¤–éƒ¨æ— è®ºå¯¹é…ç½®ç±»ä¸­çš„è¿™ä¸ªç»„ä»¶æ³¨å†Œæ–¹æ³•è°ƒç”¨å¤šå°‘æ¬¡è·å–çš„éƒ½æ˜¯ä¹‹å‰æ³¨å†Œå®¹å™¨ä¸­çš„å•å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ã€‚ä»¥æ–¹æ³•åä½œä¸ºç»„ä»¶çš„idã€‚è¿”å›ç±»å‹å°±æ˜¯ç»„ä»¶ç±»å‹ã€‚è¿”å›çš„å€¼ï¼Œå°±æ˜¯ç»„ä»¶åœ¨å®¹å™¨ä¸­çš„å®ä¾‹</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">zhangsan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;zhangsan&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        <span class="comment">//userç»„ä»¶ä¾èµ–äº†Petç»„ä»¶</span></span><br><span class="line">        zhangsan.setPet(tomcatPet());</span><br><span class="line">        <span class="keyword">return</span> zhangsan;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(&quot;tom&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Pet <span class="title function_">tomcatPet</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Pet</span>(<span class="string">&quot;tomcat&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">################################<span class="meta">@Configuration</span>æµ‹è¯•ä»£ç å¦‚ä¸‹########################################</span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.atguigu.boot&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1ã€è¿”å›æˆ‘ä»¬IOCå®¹å™¨</span></span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">run</span> <span class="operator">=</span> SpringApplication.run(MainApplication.class, args);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2ã€æŸ¥çœ‹å®¹å™¨é‡Œé¢çš„ç»„ä»¶</span></span><br><span class="line">        String[] names = run.getBeanDefinitionNames();</span><br><span class="line">        <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3ã€ä»å®¹å™¨ä¸­è·å–ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Pet</span> <span class="variable">tom01</span> <span class="operator">=</span> run.getBean(<span class="string">&quot;tom&quot;</span>, Pet.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">Pet</span> <span class="variable">tom02</span> <span class="operator">=</span> run.getBean(<span class="string">&quot;tom&quot;</span>, Pet.class);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç»„ä»¶ï¼š&quot;</span>+(tom01 == tom02));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//4ã€com.atguigu.boot.config.MyConfig$$EnhancerBySpringCGLIB$$51f1e1ca@1654a892</span></span><br><span class="line">        <span class="type">MyConfig</span> <span class="variable">bean</span> <span class="operator">=</span> run.getBean(MyConfig.class);</span><br><span class="line">        System.out.println(bean);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœ@Configuration(proxyBeanMethods = true)ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•ã€‚SpringBootæ€»ä¼šæ£€æŸ¥è¿™ä¸ªç»„ä»¶æ˜¯å¦åœ¨å®¹å™¨ä¸­æœ‰ã€‚</span></span><br><span class="line">        <span class="comment">//ä¿æŒç»„ä»¶å•å®ä¾‹</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> bean.user01();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> bean.user01();</span><br><span class="line">        System.out.println(user == user1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user01</span> <span class="operator">=</span> run.getBean(<span class="string">&quot;user01&quot;</span>, User.class);</span><br><span class="line">        <span class="type">Pet</span> <span class="variable">tom</span> <span class="operator">=</span> run.getBean(<span class="string">&quot;tom&quot;</span>, Pet.class);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç”¨æˆ·çš„å® ç‰©ï¼š&quot;</span>+(user01.getPet() == tom));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="4-1-2å¸¸ç”¨æ³¨è§£"><a href="#4-1-2å¸¸ç”¨æ³¨è§£" class="headerlink" title="4.1.2å¸¸ç”¨æ³¨è§£"></a>4.1.2å¸¸ç”¨æ³¨è§£</h5><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">@Beanç”¨äºåœ¨é…ç½®ç±»ä¸­æ·»åŠ ç»„ä»¶,ä¾‹å¦‚åˆ†é¡µæ’ä»¶</span><br><span class="line">@Componentã€@Controllerã€@Serviceã€@Repositoryå‘å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ï¼Œæ•ˆæœç›¸åŒï¼Œåœ¨å„ä¸ªæ¶æ„å±‚ä¸­è¡¨è¿°ä¸åŒã€‚</span><br><span class="line">@Importç»™å®¹å™¨ä¸­åˆ›å»ºæŒ‡å®šç±»å‹çš„ç»„ä»¶,é»˜è®¤ç»„ä»¶çš„åå­—å°±æ˜¯å…¨ç±»å</span><br></pre></td></tr></table></figure><h5 id="4-1-3-Conditional"><a href="#4-1-3-Conditional" class="headerlink" title="4.1.3@Conditional"></a>4.1.3@Conditional</h5><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">æ¡ä»¶è£…é…ï¼šæ»¡è¶³ConditionalæŒ‡å®šçš„æ¡ä»¶ï¼Œåˆ™è¿›è¡Œç»„ä»¶æ³¨å…¥</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">=====================æµ‹è¯•æ¡ä»¶è£…é…==========================</span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span> <span class="comment">//å‘Šè¯‰SpringBootè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±» == é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment">//@ConditionalOnBean(name = &quot;tom&quot;)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(name = &quot;tom&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Full:å¤–éƒ¨æ— è®ºå¯¹é…ç½®ç±»ä¸­çš„è¿™ä¸ªç»„ä»¶æ³¨å†Œæ–¹æ³•è°ƒç”¨å¤šå°‘æ¬¡è·å–çš„éƒ½æ˜¯ä¹‹å‰æ³¨å†Œå®¹å™¨ä¸­çš„å•å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ã€‚ä»¥æ–¹æ³•åä½œä¸ºç»„ä»¶çš„idã€‚è¿”å›ç±»å‹å°±æ˜¯ç»„ä»¶ç±»å‹ã€‚è¿”å›çš„å€¼ï¼Œå°±æ˜¯ç»„ä»¶åœ¨å®¹å™¨ä¸­çš„å®ä¾‹</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">zhangsan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;zhangsan&quot;</span>, <span class="number">18</span>);</span><br><span class="line">        <span class="comment">//userç»„ä»¶ä¾èµ–äº†Petç»„ä»¶</span></span><br><span class="line">        zhangsan.setPet(tomcatPet());</span><br><span class="line">        <span class="keyword">return</span> zhangsan;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(&quot;tom22&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Pet <span class="title function_">tomcatPet</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Pet</span>(<span class="string">&quot;tomcat&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1ã€è¿”å›æˆ‘ä»¬IOCå®¹å™¨</span></span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">run</span> <span class="operator">=</span> SpringApplication.run(MainApplication.class, args);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2ã€æŸ¥çœ‹å®¹å™¨é‡Œé¢çš„ç»„ä»¶</span></span><br><span class="line">        String[] names = run.getBeanDefinitionNames();</span><br><span class="line">        <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">tom</span> <span class="operator">=</span> run.containsBean(<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å®¹å™¨ä¸­Tomç»„ä»¶ï¼š&quot;</span>+tom);</span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">user01</span> <span class="operator">=</span> run.containsBean(<span class="string">&quot;user01&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å®¹å™¨ä¸­user01ç»„ä»¶ï¼š&quot;</span>+user01);</span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">tom22</span> <span class="operator">=</span> run.containsBean(<span class="string">&quot;tom22&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å®¹å™¨ä¸­tom22ç»„ä»¶ï¼š&quot;</span>+tom22);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h5 id="4-1-4-ImportResource"><a href="#4-1-4-ImportResource" class="headerlink" title="4.1.4@ImportResource"></a>4.1.4@ImportResource</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">======================beans.xml=========================</span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;haha&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.boot.bean.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;18&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hehe&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.boot.bean.Pet&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;tomcat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ImportResource(&quot;classpath:beans.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">======================æµ‹è¯•=================</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">haha</span> <span class="operator">=</span> run.containsBean(<span class="string">&quot;haha&quot;</span>);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">hehe</span> <span class="operator">=</span> run.containsBean(<span class="string">&quot;hehe&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;hahaï¼š&quot;</span>+haha);<span class="comment">//true</span></span><br><span class="line">        System.out.println(<span class="string">&quot;heheï¼š&quot;</span>+hehe);<span class="comment">//true</span></span><br></pre></td></tr></table></figure><h5 id="4-1-5é…ç½®ç»‘å®š"><a href="#4-1-5é…ç½®ç»‘å®š" class="headerlink" title="4.1.5é…ç½®ç»‘å®š"></a>4.1.5é…ç½®ç»‘å®š</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">getProperties</span> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException, IOException &#123;</span><br><span class="line">         <span class="type">Properties</span> <span class="variable">pps</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">         pps.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;a.properties&quot;</span>));</span><br><span class="line">         <span class="type">Enumeration</span> <span class="variable">enum1</span> <span class="operator">=</span> pps.propertyNames();<span class="comment">//å¾—åˆ°é…ç½®æ–‡ä»¶çš„åå­—</span></span><br><span class="line">         <span class="keyword">while</span>(enum1.hasMoreElements()) &#123;</span><br><span class="line">             <span class="type">String</span> <span class="variable">strKey</span> <span class="operator">=</span> (String) enum1.nextElement();</span><br><span class="line">             <span class="type">String</span> <span class="variable">strValue</span> <span class="operator">=</span> pps.getProperty(strKey);</span><br><span class="line">             System.out.println(strKey + <span class="string">&quot;=&quot;</span> + strValue);</span><br><span class="line">             <span class="comment">//å°è£…åˆ°JavaBeanã€‚</span></span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line">ä½¿ç”¨javaè¯»å–propertiesæ–‡ä»¶çš„å†…å®¹å¹¶æŠŠå®ƒå°è£…åˆ°JavaBeanä¸­ï¼Œä»¥ä¾›éšæ—¶ä½¿ç”¨ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åªæœ‰åœ¨å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰ä¼šæ‹¥æœ‰SpringBootæä¾›çš„å¼ºå¤§åŠŸèƒ½</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;mycar&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getBrand</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBrand</span><span class="params">(String brand)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(Integer price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Car&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;brand=&#x27;&quot;</span> + brand + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, price=&quot;</span> + price +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ç¬¬ä¸€ç§æ–¹æ³•:<span class="meta">@Component</span>+ConfigurationProperties</span><br><span class="line">ç¬¬äºŒç§æ–¹æ³•:<span class="meta">@EnableConfigurationProperties</span>+<span class="meta">@ConfigurationProperties</span></span><br></pre></td></tr></table></figure><h4 id="4-2-EnableAutoConfigurationæºç "><a href="#4-2-EnableAutoConfigurationæºç " class="headerlink" title="4.2@EnableAutoConfigurationæºç "></a>4.2@EnableAutoConfigurationæºç </h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@AutoConfigurationPackage</span></span><br><span class="line"><span class="meta">@Import(AutoConfigurationImportSelector.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableAutoConfiguration &#123;&#125;</span><br></pre></td></tr></table></figure><h5 id="4-2-1-AutoConfigurationPackage"><a href="#4-2-1-AutoConfigurationPackage" class="headerlink" title="4.2.1@AutoConfigurationPackage"></a>4.2.1@AutoConfigurationPackage</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Import(AutoConfigurationPackages.Registrar.class)</span>  <span class="comment">//ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AutoConfigurationPackage &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨Registrarç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ç³»åˆ—ç»„ä»¶</span></span><br><span class="line"><span class="comment">//å°†æŒ‡å®šçš„ä¸€ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶å¯¼å…¥è¿›æ¥ï¼ŸMainApplication æ‰€åœ¨åŒ…ä¸‹ã€‚</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>ã€åˆ©ç”¨getAutoConfigurationEntry(annotationMetadata);ç»™å®¹å™¨ä¸­æ‰¹é‡å¯¼å…¥ä¸€äº›ç»„ä»¶</span><br><span class="line"><span class="number">2</span>ã€è°ƒç”¨List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes)è·å–åˆ°æ‰€æœ‰éœ€è¦å¯¼å…¥åˆ°å®¹å™¨ä¸­çš„é…ç½®ç±»</span><br><span class="line"><span class="number">3</span>ã€åˆ©ç”¨å·¥å‚åŠ è½½ Map&lt;String, List&lt;String&gt;&gt; <span class="title function_">loadSpringFactories</span><span class="params">(<span class="meta">@Nullable</span> ClassLoader classLoader)</span>ï¼›å¾—åˆ°æ‰€æœ‰çš„ç»„ä»¶</span><br><span class="line"><span class="number">4</span>ã€ä»META-INF/spring.factoriesä½ç½®æ¥åŠ è½½ä¸€ä¸ªæ–‡ä»¶ã€‚</span><br><span class="line">é»˜è®¤æ‰«ææˆ‘ä»¬å½“å‰ç³»ç»Ÿé‡Œé¢æ‰€æœ‰META-INF/spring.factoriesä½ç½®çš„æ–‡ä»¶</span><br><span class="line">    spring-boot-autoconfigure-<span class="number">2.3</span><span class="number">.4</span>.RELEASE.jaråŒ…é‡Œé¢ä¹Ÿæœ‰META-INF/spring.factories</span><br></pre></td></tr></table></figure><h3 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5.æ€»ç»“"></a>5.æ€»ç»“</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">â— SpringBootå…ˆåŠ è½½æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»  xxxxxAutoConfiguration</span><br><span class="line">â— æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»æŒ‰ç…§æ¡ä»¶è¿›è¡Œç”Ÿæ•ˆï¼Œé»˜è®¤éƒ½ä¼šç»‘å®šé…ç½®æ–‡ä»¶æŒ‡å®šçš„å€¼ã€‚xxxxPropertiesé‡Œé¢æ‹¿ã€‚xxxPropertieså’Œé…ç½®æ–‡ä»¶è¿›è¡Œäº†ç»‘å®š</span><br><span class="line">â— ç”Ÿæ•ˆçš„é…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­è£…é…å¾ˆå¤šç»„ä»¶</span><br><span class="line">â— åªè¦å®¹å™¨ä¸­æœ‰è¿™äº›ç»„ä»¶ï¼Œç›¸å½“äºè¿™äº›åŠŸèƒ½å°±æœ‰äº†</span><br><span class="line">â— å®šåˆ¶åŒ–é…ç½®</span><br><span class="line">  â—‹ ç”¨æˆ·ç›´æ¥è‡ªå·±@Beanæ›¿æ¢åº•å±‚çš„ç»„ä»¶</span><br><span class="line">  â—‹ ç”¨æˆ·å»çœ‹è¿™ä¸ªç»„ä»¶æ˜¯è·å–çš„é…ç½®æ–‡ä»¶ä»€ä¹ˆå€¼å°±å»ä¿®æ”¹ã€‚</span><br><span class="line">xxxxxAutoConfiguration ---&gt; ç»„ä»¶  ---&gt; xxxxPropertiesé‡Œé¢æ‹¿å€¼  ----&gt; application.properties</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -SpringBoot -åç«¯ -æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisPluså­¦ä¹ æ€»ç»“(2)</title>
      <link href="/2023/01/08/MyBatisPlus%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93(2)/"/>
      <url>/2023/01/08/MyBatisPlus%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93(2)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="3-æ¡ä»¶æ„é€ å™¨å’Œå¸¸ç”¨æ¥å£"><a href="#3-æ¡ä»¶æ„é€ å™¨å’Œå¸¸ç”¨æ¥å£" class="headerlink" title="3.æ¡ä»¶æ„é€ å™¨å’Œå¸¸ç”¨æ¥å£"></a>3.æ¡ä»¶æ„é€ å™¨å’Œå¸¸ç”¨æ¥å£</h2><h3 id="3-1wapperä»‹ç»"><a href="#3-1wapperä»‹ç»" class="headerlink" title="3.1wapperä»‹ç»"></a>3.1wapperä»‹ç»<img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230108113934622.png" alt="image-20230108113934622"></h3><h3 id="3-2QueryWrapper"><a href="#3-2QueryWrapper" class="headerlink" title="3.2QueryWrapper"></a>3.2QueryWrapper</h3><h4 id="3-2-1ç»„è£…æŸ¥è¯¢æ¡ä»¶"><a href="#3-2-1ç»„è£…æŸ¥è¯¢æ¡ä»¶" class="headerlink" title="3.2.1ç»„è£…æŸ¥è¯¢æ¡ä»¶"></a>3.2.1ç»„è£…æŸ¥è¯¢æ¡ä»¶</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//æŸ¥è¯¢ç”¨æˆ·ååŒ…å«aï¼Œå¹´é¾„åœ¨20åˆ°30ä¹‹é—´ï¼Œå¹¶ä¸”é‚®ç®±ä¸ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">//SELECT id,username AS name,age,email,is_deleted FROM t_user WHERE</span></span><br><span class="line"><span class="comment">//is_deleted=0 AND (username LIKE ? AND age BETWEEN ? AND ? AND email IS NOT NULL)</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.like(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">    .between(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>, <span class="number">30</span>)</span><br><span class="line">    .isNotNull(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-2-2ç»„è£…æ’åºæ¡ä»¶"><a href="#3-2-2ç»„è£…æ’åºæ¡ä»¶" class="headerlink" title="3.2.2ç»„è£…æ’åºæ¡ä»¶"></a>3.2.2ç»„è£…æ’åºæ¡ä»¶</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//æŒ‰å¹´é¾„é™åºæŸ¥è¯¢ç”¨æˆ·ï¼Œå¦‚æœå¹´é¾„ç›¸åŒåˆ™æŒ‰idå‡åºæ’åˆ—</span></span><br><span class="line"><span class="comment">//SELECT id,username AS name,age,email,is_deleted FROM t_user WHERE</span></span><br><span class="line"><span class="comment">//is_deleted=0 ORDER BY age DESC,id ASC</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper</span><br><span class="line">    .orderByDesc(<span class="string">&quot;age&quot;</span>)</span><br><span class="line">    .orderByAsc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-2-3ç»„è£…åˆ é™¤æ¡ä»¶"><a href="#3-2-3ç»„è£…åˆ é™¤æ¡ä»¶" class="headerlink" title="3.2.3ç»„è£…åˆ é™¤æ¡ä»¶"></a>3.2.3ç»„è£…åˆ é™¤æ¡ä»¶</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test03</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//åˆ é™¤emailä¸ºç©ºçš„ç”¨æˆ·</span></span><br><span class="line">    <span class="comment">//DELETE FROM t_user WHERE (email IS NULL)</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.isNull(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">    <span class="comment">//æ¡ä»¶æ„é€ å™¨ä¹Ÿå¯ä»¥æ„å»ºåˆ é™¤è¯­å¥çš„æ¡ä»¶</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.delete(queryWrapper);</span><br><span class="line">    System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-2-4æ¡ä»¶çš„ä¼˜å…ˆçº§"><a href="#3-2-4æ¡ä»¶çš„ä¼˜å…ˆçº§" class="headerlink" title="3.2.4æ¡ä»¶çš„ä¼˜å…ˆçº§"></a>3.2.4æ¡ä»¶çš„ä¼˜å…ˆçº§</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test04</span><span class="params">()</span> &#123;</span><br><span class="line">QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//å°†ï¼ˆå¹´é¾„å¤§äº20å¹¶ä¸”ç”¨æˆ·åä¸­åŒ…å«æœ‰aï¼‰æˆ–é‚®ç®±ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹</span></span><br><span class="line"><span class="comment">//UPDATE t_user SET age=?, email=? WHERE (username LIKE ? AND age &gt; ? OR email IS NULL)</span></span><br><span class="line">    queryWrapper</span><br><span class="line">    .like(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">    .gt(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>)</span><br><span class="line">    .or()</span><br><span class="line">    .isNull(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setAge(<span class="number">18</span>);</span><br><span class="line">        user.setEmail(<span class="string">&quot;user@atguigu.com&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(user, queryWrapper);</span><br><span class="line">        System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test04</span><span class="params">()</span> &#123;</span><br><span class="line">QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//å°†ç”¨æˆ·åä¸­åŒ…å«æœ‰aå¹¶ä¸”ï¼ˆå¹´é¾„å¤§äº20æˆ–é‚®ç®±ä¸ºnullï¼‰çš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹</span></span><br><span class="line"><span class="comment">//UPDATE t_user SET age=?, email=? WHERE (username LIKE ? AND (age &gt; ? OR email IS NULL))</span></span><br><span class="line"><span class="comment">//lambdaè¡¨è¾¾å¼å†…çš„é€»è¾‘ä¼˜å…ˆè¿ç®—</span></span><br><span class="line">    queryWrapper.like(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">    .and(i -&gt; i.gt(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>).or().isNull(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;user@atguigu.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(user, queryWrapper);</span><br><span class="line">    System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-2-5ç»„è£…selectå­å¥"><a href="#3-2-5ç»„è£…selectå­å¥" class="headerlink" title="3.2.5ç»„è£…selectå­å¥"></a>3.2.5ç»„è£…selectå­å¥</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test05</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„usernameå’Œageå­—æ®µ</span></span><br><span class="line">    <span class="comment">//SELECT username,age FROM t_user</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.select(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;age&quot;</span>);</span><br><span class="line">    <span class="comment">//selectMaps()è¿”å›Mapé›†åˆåˆ—è¡¨ï¼Œé€šå¸¸é…åˆselect()ä½¿ç”¨ï¼Œé¿å…Userå¯¹è±¡ä¸­æ²¡æœ‰è¢«æŸ¥è¯¢åˆ°çš„åˆ—å€¼</span></span><br><span class="line">    ä¸º<span class="literal">null</span></span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(queryWrapper);</span><br><span class="line">    maps.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-2-6å®ç°å­æŸ¥è¯¢"><a href="#3-2-6å®ç°å­æŸ¥è¯¢" class="headerlink" title="3.2.6å®ç°å­æŸ¥è¯¢"></a>3.2.6å®ç°å­æŸ¥è¯¢</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test06</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//æŸ¥è¯¢idå°äºç­‰äº3çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="comment">//SELECT id,username AS name,age,email,is_deleted FROM t_user WHERE (id IN (select id from t_user where id &lt;= 3))</span></span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    queryWrapper.inSql(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;select id from t_user where id &lt;= 3&quot;</span>);</span><br><span class="line">    List&lt;User&gt; list = userMapper.selectList(queryWrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-3UpdateWrapper"><a href="#3-3UpdateWrapper" class="headerlink" title="3.3UpdateWrapper"></a>3.3UpdateWrapper</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test07</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//å°†ï¼ˆå¹´é¾„å¤§äº20æˆ–é‚®ç®±ä¸ºnullï¼‰å¹¶ä¸”ç”¨æˆ·åä¸­åŒ…å«æœ‰açš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹</span></span><br><span class="line">    <span class="comment">//ç»„è£…setå­å¥ä»¥åŠä¿®æ”¹æ¡ä»¶</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//lambdaè¡¨è¾¾å¼å†…çš„é€»è¾‘ä¼˜å…ˆè¿ç®—</span></span><br><span class="line">    updateWrapper</span><br><span class="line">    .set(<span class="string">&quot;age&quot;</span>, <span class="number">18</span>)</span><br><span class="line">    .set(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;user@atguigu.com&quot;</span>)</span><br><span class="line">    .like(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">    .and(i -&gt; i.gt(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>).or().isNull(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">    <span class="comment">//è¿™é‡Œå¿…é¡»è¦åˆ›å»ºUserå¯¹è±¡ï¼Œå¦åˆ™æ— æ³•åº”ç”¨è‡ªåŠ¨å¡«å……ã€‚å¦‚æœæ²¡æœ‰è‡ªåŠ¨å¡«å……ï¼Œå¯ä»¥è®¾ç½®ä¸ºnull</span></span><br><span class="line">    <span class="comment">//UPDATE t_user SET username=?, age=?,email=? WHERE (username LIKE ? AND(age &gt; ? OR email IS NULL))</span></span><br><span class="line">    <span class="comment">//User user = new User();</span></span><br><span class="line">    <span class="comment">//user.setName(&quot;å¼ ä¸‰&quot;);</span></span><br><span class="line">    <span class="comment">//int result = userMapper.update(user, updateWrapper);</span></span><br><span class="line">    <span class="comment">//UPDATE t_user SET age=?,email=? WHERE (username LIKE ? AND (age &gt; ? ORemail IS NULL))</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(<span class="literal">null</span>, updateWrapper);</span><br><span class="line">    System.out.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4condition"><a href="#3-4condition" class="headerlink" title="3.4condition"></a>3.4condition</h3><h4 id="3-4-1æ€è·¯ä¸€"><a href="#3-4-1æ€è·¯ä¸€" class="headerlink" title="3.4.1æ€è·¯ä¸€"></a>3.4.1æ€è·¯ä¸€</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test08</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//å®šä¹‰æŸ¥è¯¢æ¡ä»¶ï¼Œæœ‰å¯èƒ½ä¸ºnullï¼ˆç”¨æˆ·æœªè¾“å…¥æˆ–æœªé€‰æ‹©ï¼‰</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">ageBegin</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">ageEnd</span> <span class="operator">=</span> <span class="number">24</span>;</span><br><span class="line">        QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//StringUtils.isNotBlank()åˆ¤æ–­æŸå­—ç¬¦ä¸²æ˜¯å¦ä¸ä¸ºç©ºä¸”é•¿åº¦ä¸ä¸º0ä¸”ä¸ç”±ç©ºç™½ç¬¦(whitespace)æ„æˆ</span></span><br><span class="line">        <span class="keyword">if</span>(StringUtils.isNotBlank(username))&#123;</span><br><span class="line">        queryWrapper.like(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ageBegin != <span class="literal">null</span>)&#123;</span><br><span class="line">        queryWrapper.ge(<span class="string">&quot;age&quot;</span>, ageBegin);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ageEnd != <span class="literal">null</span>)&#123;</span><br><span class="line">        queryWrapper.le(<span class="string">&quot;age&quot;</span>, ageEnd);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//SELECT id,username AS name,age,email,is_deleted FROM t_user WHERE (age &gt;=? AND age &lt;= ?)</span></span><br><span class="line">        List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">        users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-4-2æ€è·¯äºŒ"><a href="#3-4-2æ€è·¯äºŒ" class="headerlink" title="3.4.2æ€è·¯äºŒ"></a>3.4.2æ€è·¯äºŒ</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test08UseCondition</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//å®šä¹‰æŸ¥è¯¢æ¡ä»¶ï¼Œæœ‰å¯èƒ½ä¸ºnullï¼ˆç”¨æˆ·æœªè¾“å…¥æˆ–æœªé€‰æ‹©ï¼‰</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">ageBegin</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">ageEnd</span> <span class="operator">=</span> <span class="number">24</span>;</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//StringUtils.isNotBlank()åˆ¤æ–­æŸå­—ç¬¦ä¸²æ˜¯å¦ä¸ä¸ºç©ºä¸”é•¿åº¦ä¸ä¸º0ä¸”ä¸ç”±ç©ºç™½ç¬¦(whitespace)æ„æˆ</span></span><br><span class="line">    queryWrapper</span><br><span class="line">    .like(StringUtils.isNotBlank(username), <span class="string">&quot;username&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">        .ge(ageBegin != <span class="literal">null</span>, <span class="string">&quot;age&quot;</span>, ageBegin)</span><br><span class="line">    .le(ageEnd != <span class="literal">null</span>, <span class="string">&quot;age&quot;</span>, ageEnd);</span><br><span class="line"><span class="comment">//SELECT id,username AS name,age,email,is_deleted FROM t_user WHERE (age &gt;=? AND age &lt;= ?)</span></span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-5LambdaQueryWrapper"><a href="#3-5LambdaQueryWrapper" class="headerlink" title="3.5LambdaQueryWrapper"></a>3.5LambdaQueryWrapper</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test09</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//å®šä¹‰æŸ¥è¯¢æ¡ä»¶ï¼Œæœ‰å¯èƒ½ä¸ºnullï¼ˆç”¨æˆ·æœªè¾“å…¥ï¼‰</span></span><br><span class="line"><span class="comment">//LambdaQueryWrapperå¯ä»¥ç”¨å‡½æ•°å¼æ¥å£::,ç”¨getæ–¹æ³•æ¥è·å–å±æ€§åï¼Œé˜²æ­¢è‡ªå·±æ‰‹åŠ¨è¾“å…¥å±æ€§åï¼Œç„¶åå‡ºç°é”™è¯¯ã€‚User::getIdå¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;a&quot;</span>;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">ageBegin</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">ageEnd</span> <span class="operator">=</span> <span class="number">24</span>;</span><br><span class="line">LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//é¿å…ä½¿ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºå­—æ®µï¼Œé˜²æ­¢è¿è¡Œæ—¶é”™è¯¯</span></span><br><span class="line">    queryWrapper</span><br><span class="line">    .like(StringUtils.isNotBlank(username), User::getName, username)</span><br><span class="line">    .ge(ageBegin != <span class="literal">null</span>, User::getAge, ageBegin)</span><br><span class="line">    .le(ageEnd != <span class="literal">null</span>, User::getAge, ageEnd);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectList(queryWrapper);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-6LambdaUpdateWrapper"><a href="#3-6LambdaUpdateWrapper" class="headerlink" title="3.6LambdaUpdateWrapper"></a>3.6LambdaUpdateWrapper</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test10</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//ç»„è£…setå­å¥</span></span><br><span class="line">LambdaUpdateWrapper&lt;User&gt; updateWrapper = <span class="keyword">new</span> <span class="title class_">LambdaUpdateWrapper</span>&lt;&gt;();</span><br><span class="line">updateWrapper</span><br><span class="line">.set(User::getAge, <span class="number">18</span>)</span><br><span class="line">.set(User::getEmail, <span class="string">&quot;user@atguigu.com&quot;</span>)</span><br><span class="line">.like(User::getName, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">.and(i -&gt; i.lt(User::getAge, <span class="number">24</span>).or().isNull(User::getEmail)); <span class="comment">//lambdaè¡¨è¾¾å¼å†…çš„é€»è¾‘ä¼˜å…ˆè¿ç®—</span></span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.update(user, updateWrapper);</span><br><span class="line">System.out.println(<span class="string">&quot;å—å½±å“çš„è¡Œæ•°ï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-æ’ä»¶"><a href="#4-æ’ä»¶" class="headerlink" title="4.æ’ä»¶"></a>4.æ’ä»¶</h2><h3 id="4-1åˆ†é¡µæ’ä»¶"><a href="#4-1åˆ†é¡µæ’ä»¶" class="headerlink" title="4.1åˆ†é¡µæ’ä»¶"></a>4.1åˆ†é¡µæ’ä»¶</h3><h4 id="4-1-1æ·»åŠ é…ç½®ç±»"><a href="#4-1-1æ·»åŠ é…ç½®ç±»" class="headerlink" title="4.1.1æ·»åŠ é…ç½®ç±»"></a>4.1.1æ·»åŠ é…ç½®ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.mybatisplus.mapper&quot;)</span> <span class="comment">//å¯ä»¥å°†ä¸»ç±»ä¸­çš„æ³¨è§£ç§»åˆ°æ­¤å¤„</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">    interceptor.addInnerInterceptor(<span class="keyword">new</span></span><br><span class="line">    <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">    <span class="keyword">return</span> interceptor;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-1-2æµ‹è¯•"><a href="#4-1-2æµ‹è¯•" class="headerlink" title="4.1.2æµ‹è¯•"></a>4.1.2æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPage</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®åˆ†é¡µå‚æ•°</span></span><br><span class="line">    Page&lt;User&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">1</span>, <span class="number">5</span>);</span><br><span class="line">    userMapper.selectPage(page, <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">//è·å–åˆ†é¡µæ•°æ®</span></span><br><span class="line">    List&lt;User&gt; list = page.getRecords();</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">    System.out.println(<span class="string">&quot;å½“å‰é¡µï¼š&quot;</span>+page.getCurrent());</span><br><span class="line">    System.out.println(<span class="string">&quot;æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°ï¼š&quot;</span>+page.getSize());</span><br><span class="line">    System.out.println(<span class="string">&quot;æ€»è®°å½•æ•°ï¼š&quot;</span>+page.getTotal());</span><br><span class="line">    System.out.println(<span class="string">&quot;æ€»é¡µæ•°ï¼š&quot;</span>+page.getPages());</span><br><span class="line">    System.out.println(<span class="string">&quot;æ˜¯å¦æœ‰ä¸Šä¸€é¡µï¼š&quot;</span>+page.hasPrevious());</span><br><span class="line">    System.out.println(<span class="string">&quot;æ˜¯å¦æœ‰ä¸‹ä¸€é¡µï¼š&quot;</span>+page.hasNext());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-2ä¹è§‚é”"><a href="#4-2ä¹è§‚é”" class="headerlink" title="4.2ä¹è§‚é”"></a>4.2ä¹è§‚é”</h3><h4 id="4-2-1ä¿®æ”¹å®ä½“ç±»"><a href="#4-2-1ä¿®æ”¹å®ä½“ç±»" class="headerlink" title="4.2.1ä¿®æ”¹å®ä½“ç±»"></a>4.2.1ä¿®æ”¹å®ä½“ç±»</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mybatisplus.entity;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.Version;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="meta">@Version</span></span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-2æ·»åŠ ä¹è§‚é”æ’ä»¶é…ç½®"><a href="#4-2-2æ·»åŠ ä¹è§‚é”æ’ä»¶é…ç½®" class="headerlink" title="4.2.2æ·»åŠ ä¹è§‚é”æ’ä»¶é…ç½®"></a>4.2.2æ·»åŠ ä¹è§‚é”æ’ä»¶é…ç½®</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line"><span class="comment">//æ·»åŠ åˆ†é¡µæ’ä»¶</span></span><br><span class="line">interceptor.addInnerInterceptor(<span class="keyword">new</span></span><br><span class="line"><span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line"><span class="comment">//æ·»åŠ ä¹è§‚é”æ’ä»¶</span></span><br><span class="line">interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">OptimisticLockerInnerInterceptor</span>());</span><br><span class="line"><span class="keyword">return</span> interceptor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-2-3ä¼˜åŒ–æµç¨‹"><a href="#4-2-3ä¼˜åŒ–æµç¨‹" class="headerlink" title="4.2.3ä¼˜åŒ–æµç¨‹"></a>4.2.3ä¼˜åŒ–æµç¨‹</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testConcurrentVersionUpdate</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//å°æå–æ•°æ®</span></span><br><span class="line"><span class="type">Product</span> <span class="variable">p1</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line"><span class="comment">//å°ç‹å–æ•°æ®</span></span><br><span class="line"><span class="type">Product</span> <span class="variable">p2</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line"><span class="comment">//å°æä¿®æ”¹ + 50</span></span><br><span class="line">p1.setPrice(p1.getPrice() + <span class="number">50</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">result1</span> <span class="operator">=</span> productMapper.updateById(p1);</span><br><span class="line">System.out.println(<span class="string">&quot;å°æä¿®æ”¹çš„ç»“æœï¼š&quot;</span> + result1);</span><br><span class="line"><span class="comment">//å°ç‹ä¿®æ”¹ - 30</span></span><br><span class="line">p2.setPrice(p2.getPrice() - <span class="number">30</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">result2</span> <span class="operator">=</span> productMapper.updateById(p2);</span><br><span class="line">System.out.println(<span class="string">&quot;å°ç‹ä¿®æ”¹çš„ç»“æœï¼š&quot;</span> + result2);</span><br><span class="line"><span class="keyword">if</span>(result2 == <span class="number">0</span>)&#123;</span><br><span class="line"><span class="comment">//å¤±è´¥é‡è¯•ï¼Œé‡æ–°è·å–versionå¹¶æ›´æ–°</span></span><br><span class="line">p2 = productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    p2.setPrice(p2.getPrice() - <span class="number">30</span>);</span><br><span class="line">result2 = productMapper.updateById(p2);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;å°ç‹ä¿®æ”¹é‡è¯•çš„ç»“æœï¼š&quot;</span> + result2);</span><br><span class="line"><span class="comment">//è€æ¿çœ‹ä»·æ ¼</span></span><br><span class="line"><span class="type">Product</span> <span class="variable">p3</span> <span class="operator">=</span> productMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;è€æ¿çœ‹ä»·æ ¼ï¼š&quot;</span> + p3.getPrice());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-é€šç”¨æšä¸¾"><a href="#5-é€šç”¨æšä¸¾" class="headerlink" title="5.é€šç”¨æšä¸¾"></a>5.é€šç”¨æšä¸¾</h2><h3 id="5-1åˆ›å»ºé€šç”¨æšä¸¾ç±»å‹"><a href="#5-1åˆ›å»ºé€šç”¨æšä¸¾ç±»å‹" class="headerlink" title="5.1åˆ›å»ºé€šç”¨æšä¸¾ç±»å‹"></a>5.1åˆ›å»ºé€šç”¨æšä¸¾ç±»å‹</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.mp.enums;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.EnumValue;</span><br><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">SexEnum</span> &#123;</span><br><span class="line">        MALE(<span class="number">1</span>, <span class="string">&quot;ç”·&quot;</span>),</span><br><span class="line">        FEMALE(<span class="number">2</span>, <span class="string">&quot;å¥³&quot;</span>);</span><br><span class="line">        <span class="meta">@EnumValue</span></span><br><span class="line">        <span class="keyword">private</span> Integer sex;</span><br><span class="line">        <span class="keyword">private</span> String sexName;</span><br><span class="line">    SexEnum(Integer sex, String sexName) &#123;</span><br><span class="line">    <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    <span class="built_in">this</span>.sexName = sexName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-2é…ç½®æ‰«æé€šè¿‡æšä¸¾"><a href="#5-2é…ç½®æ‰«æé€šè¿‡æšä¸¾" class="headerlink" title="5.2é…ç½®æ‰«æé€šè¿‡æšä¸¾"></a>5.2é…ç½®æ‰«æé€šè¿‡æšä¸¾</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">    <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment"># é…ç½®MyBatisæ—¥å¿—</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">    <span class="attr">global-config:</span></span><br><span class="line">        <span class="attr">db-config:</span></span><br><span class="line">            <span class="comment"># é…ç½®MyBatis-Plusæ“ä½œè¡¨çš„é»˜è®¤å‰ç¼€</span></span><br><span class="line">            <span class="attr">table-prefix:</span> <span class="string">t_</span></span><br><span class="line">            <span class="comment"># é…ç½®MyBatis-Plusçš„ä¸»é”®ç­–ç•¥</span></span><br><span class="line">            <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line">    <span class="comment"># é…ç½®æ‰«æé€šç”¨æšä¸¾</span></span><br><span class="line">    <span class="attr">type-enums-package:</span> <span class="string">com.atguigu.mybatisplus.enums</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-3æµ‹è¯•"><a href="#5-3æµ‹è¯•" class="headerlink" title="5.3æµ‹è¯•"></a>5.3æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSexEnum</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setName(<span class="string">&quot;Enum&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">20</span>);</span><br><span class="line">    <span class="comment">//è®¾ç½®æ€§åˆ«ä¿¡æ¯ä¸ºæšä¸¾é¡¹ï¼Œä¼šå°†@EnumValueæ³¨è§£æ‰€æ ‡è¯†çš„å±æ€§å€¼å­˜å‚¨åˆ°æ•°æ®åº“</span></span><br><span class="line">    user.setSex(SexEnum.MALE);</span><br><span class="line">    <span class="comment">//INSERT INTO t_user ( username, age, sex ) VALUES ( ?, ?, ? )</span></span><br><span class="line">    <span class="comment">//Parameters: Enum(String), 20(Integer), 1(Integer)</span></span><br><span class="line">    userMapper.insert(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="6-å¤šæ•°æ®æº"><a href="#6-å¤šæ•°æ®æº" class="headerlink" title="6.å¤šæ•°æ®æº"></a>6.å¤šæ•°æ®æº</h2><h3 id="6-1å¼•å…¥ä¾èµ–"><a href="#6-1å¼•å…¥ä¾èµ–" class="headerlink" title="6.1å¼•å…¥ä¾èµ–"></a>6.1å¼•å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dynamic-datasource-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="6-2é…ç½®å¤šæ•°æ®æº"><a href="#6-2é…ç½®å¤šæ•°æ®æº" class="headerlink" title="6.2é…ç½®å¤šæ•°æ®æº"></a>6.2é…ç½®å¤šæ•°æ®æº</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="comment"># é…ç½®æ•°æ®æºä¿¡æ¯</span></span><br><span class="line">    <span class="attr">datasource:</span></span><br><span class="line">        <span class="attr">dynamic:</span></span><br><span class="line">            <span class="comment"># è®¾ç½®é»˜è®¤çš„æ•°æ®æºæˆ–è€…æ•°æ®æºç»„,é»˜è®¤å€¼å³ä¸ºmaster</span></span><br><span class="line">            <span class="attr">primary:</span> <span class="string">master</span></span><br><span class="line"><span class="comment"># ä¸¥æ ¼åŒ¹é…æ•°æ®æº,é»˜è®¤false.trueæœªåŒ¹é…åˆ°æŒ‡å®šæ•°æ®æºæ—¶æŠ›å¼‚å¸¸,falseä½¿ç”¨é»˜è®¤æ•°æ®æº</span></span><br><span class="line">            <span class="attr">strict:</span> <span class="literal">false</span></span><br><span class="line">            <span class="attr">datasource:</span></span><br><span class="line">                <span class="attr">master:</span></span><br><span class="line">                <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf8&amp;useSSL=false</span></span><br><span class="line">                <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">                <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">                <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">                <span class="attr">slave_1:</span></span><br><span class="line">                <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus_1?characterEncoding=utf8&amp;useSSL=false</span></span><br><span class="line">                <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">                <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">                <span class="attr">password:</span> <span class="number">123456</span></span><br></pre></td></tr></table></figure><h3 id="6-3åˆ›å»ºç”¨æˆ·Serviceå’Œå•†å“Service"><a href="#6-3åˆ›å»ºç”¨æˆ·Serviceå’Œå•†å“Service" class="headerlink" title="6.3åˆ›å»ºç”¨æˆ·Serviceå’Œå•†å“Service"></a>6.3åˆ›å»ºç”¨æˆ·Serviceå’Œå•†å“Service</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@DS(&quot;master&quot;)</span> <span class="comment">//æŒ‡å®šæ‰€æ“ä½œçš„æ•°æ®æº</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span></span><br><span class="line"><span class="title class_">UserService</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å•†å“Service</span></span><br><span class="line"><span class="meta">@DS(&quot;slave_1&quot;)</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;ProductMapper, Product&gt;</span><br><span class="line"><span class="keyword">implements</span> <span class="title class_">ProductService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-4æµ‹è¯•"><a href="#6-4æµ‹è¯•" class="headerlink" title="6.4æµ‹è¯•"></a>6.4æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserService userService;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ProductService productService;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDynamicDataSource</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(userService.getById(<span class="number">1L</span>));</span><br><span class="line">System.out.println(productService.getById(<span class="number">1L</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">ç»“æœï¼š</span><br><span class="line">1ã€éƒ½èƒ½é¡ºåˆ©è·å–å¯¹è±¡ï¼Œåˆ™æµ‹è¯•æˆåŠŸ</span><br><span class="line">2ã€å¦‚æœæˆ‘ä»¬å®ç°è¯»å†™åˆ†ç¦»ï¼Œå°†å†™æ“ä½œæ–¹æ³•åŠ ä¸Šä¸»åº“æ•°æ®æºï¼Œè¯»æ“ä½œæ–¹æ³•åŠ ä¸Šä»åº“æ•°æ®æºï¼Œè‡ªåŠ¨åˆ‡æ¢ï¼Œæ˜¯ä¸æ˜¯å°±èƒ½å®ç°è¯»å†™åˆ†ç¦»ï¼Ÿ</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -åç«¯ -MyBatisPlus -æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisPluså­¦ä¹ æ€»ç»“(1)</title>
      <link href="/2023/01/07/MyBatisPlus%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93(1)/"/>
      <url>/2023/01/07/MyBatisPlus%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93(1)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="MyBatisPluså­¦ä¹ æ€»ç»“"><a href="#MyBatisPluså­¦ä¹ æ€»ç»“" class="headerlink" title="MyBatisPluså­¦ä¹ æ€»ç»“"></a>MyBatisPluså­¦ä¹ æ€»ç»“</h1><h2 id="1-å…¥é—¨æ¡ˆä¾‹"><a href="#1-å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="1.å…¥é—¨æ¡ˆä¾‹"></a>1.å…¥é—¨æ¡ˆä¾‹</h2><h3 id="1-1å¼€å‘ç¯å¢ƒ"><a href="#1-1å¼€å‘ç¯å¢ƒ" class="headerlink" title="1.1å¼€å‘ç¯å¢ƒ"></a>1.1å¼€å‘ç¯å¢ƒ</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">IDEï¼šidea 2019.2</span><br><span class="line">JDKï¼šJDK8+</span><br><span class="line">æ„å»ºå·¥å…·ï¼šmaven 3.5.4</span><br><span class="line">MySQLç‰ˆæœ¬ï¼šMySQL 5.7</span><br><span class="line">Spring Bootï¼š2.6.3</span><br><span class="line">MyBatis-Plusï¼š3.5.1</span><br></pre></td></tr></table></figure><h3 id="1-2åˆå§‹åŒ–SpringBootå·¥ç¨‹"><a href="#1-2åˆå§‹åŒ–SpringBootå·¥ç¨‹" class="headerlink" title="1.2åˆå§‹åŒ–SpringBootå·¥ç¨‹"></a>1.2åˆå§‹åŒ–SpringBootå·¥ç¨‹</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">ä½¿ç”¨ Spring Initializr å¿«é€Ÿåˆå§‹åŒ–ä¸€ä¸ª Spring Boot å·¥ç¨‹</span><br></pre></td></tr></table></figure><h3 id="1-3å¼•å…¥ä¾èµ–"><a href="#1-3å¼•å…¥ä¾èµ–" class="headerlink" title="1.3å¼•å…¥ä¾èµ–"></a>1.3å¼•å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--optinal:trueç”¨äºé˜»æ–­ä¼ é€’ä¾èµ– excludeæ‰“åŒ…è‡ªåŠ¨ä¼šæ’é™¤lombokæ’ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-4ç¼–å†™ä»£ç "><a href="#1-4ç¼–å†™ä»£ç " class="headerlink" title="1.4ç¼–å†™ä»£ç "></a>1.4ç¼–å†™ä»£ç </h3><h4 id="1-4-1é…ç½®application-yml"><a href="#1-4-1é…ç½®application-yml" class="headerlink" title="1.4.1é…ç½®application.yml"></a>1.4.1é…ç½®application.yml</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="comment"># é…ç½®æ•°æ®æºä¿¡æ¯</span></span><br><span class="line">    <span class="attr">datasource:</span></span><br><span class="line"><span class="comment"># é…ç½®æ•°æ®æºç±»å‹</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line"><span class="comment"># é…ç½®è¿æ¥æ•°æ®åº“ä¿¡æ¯</span></span><br><span class="line">        <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf8&amp;useSSL=false</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">password:</span> <span class="number">123456</span></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">1ã€é©±åŠ¨ç±»driver-class-name</span><br><span class="line">spring boot 2.0ï¼ˆå†…ç½®jdbc5é©±åŠ¨ï¼‰ï¼Œé©±åŠ¨ç±»ä½¿ç”¨ï¼š</span><br><span class="line">driver-class-name: com.mysql.jdbc.Driver</span><br><span class="line">spring boot 2.1åŠä»¥ä¸Šï¼ˆå†…ç½®jdbc8é©±åŠ¨ï¼‰ï¼Œé©±åŠ¨ç±»ä½¿ç”¨ï¼š</span><br><span class="line">driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">å¦åˆ™è¿è¡Œæµ‹è¯•ç”¨ä¾‹çš„æ—¶å€™ä¼šæœ‰ WARN ä¿¡æ¯</span><br><span class="line">2ã€è¿æ¥åœ°å€url</span><br><span class="line">MySQL5.7ç‰ˆæœ¬çš„urlï¼š</span><br><span class="line">jdbc:mysql://localhost:3306/mybatis<span class="emphasis">_plus?characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line"><span class="emphasis">MySQL8.0ç‰ˆæœ¬çš„urlï¼š</span></span><br><span class="line"><span class="emphasis">jdbc:mysql://localhost:3306/mybatis_</span>plus?</span><br><span class="line">serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false</span><br><span class="line">å¦åˆ™è¿è¡Œæµ‹è¯•ç”¨ä¾‹æŠ¥å‘Šå¦‚ä¸‹é”™è¯¯ï¼š</span><br><span class="line">java.sql.SQLException: The server time zone value &#x27;Ã–ÃÂ¹ÃºÂ±ÃªÃ—Â¼ÃŠÂ±Â¼Ã¤&#x27; is unrecognized or represents more</span><br></pre></td></tr></table></figure><h4 id="1-4-2SpringBootå¯åŠ¨ç±»æ·»åŠ -MapperScanæ³¨è§£"><a href="#1-4-2SpringBootå¯åŠ¨ç±»æ·»åŠ -MapperScanæ³¨è§£" class="headerlink" title="1.4.2SpringBootå¯åŠ¨ç±»æ·»åŠ @MapperScanæ³¨è§£"></a>1.4.2SpringBootå¯åŠ¨ç±»æ·»åŠ @MapperScanæ³¨è§£</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atguigu.mybatisplus.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisplusApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    SpringApplication.run(MybatisplusApplication.class, args);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-4-3æµ‹è¯•"><a href="#1-4-3æµ‹è¯•" class="headerlink" title="1.4.3æµ‹è¯•"></a>1.4.3æµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusTest</span> &#123;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectList</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//selectList()æ ¹æ®MPå†…ç½®çš„æ¡ä»¶æ„é€ å™¨æŸ¥è¯¢ä¸€ä¸ªlisté›†åˆï¼Œnullè¡¨ç¤ºæ²¡æœ‰æ¡ä»¶ï¼Œå³æŸ¥è¯¢æ‰€æœ‰,åˆ©ç”¨Java8çš„æ–°ç‰¹æ€§4ä¸ªå‡½æ•°å¼æ¥å£æˆ–è€…Streamæµ,forEach(System.out::println)</span></span><br><span class="line">userMapper.selectList(<span class="literal">null</span>).forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">IDEAåœ¨ userMapper å¤„æŠ¥é”™ï¼Œå› ä¸ºæ‰¾ä¸åˆ°æ³¨å…¥çš„å¯¹è±¡ï¼Œå› ä¸ºç±»æ˜¯åŠ¨æ€åˆ›å»ºçš„ï¼Œä½†æ˜¯ç¨‹åºå¯ä»¥æ­£ç¡®</span><br><span class="line">çš„æ‰§è¡Œã€‚</span><br><span class="line">ä¸ºäº†é¿å…æŠ¥é”™ï¼Œå¯ä»¥åœ¨mapperæ¥å£ä¸Šæ·»åŠ  @Repository æ³¨è§£ ç”¨äºè§£å†³@Autowiredæ³¨å…¥æ—¶çˆ†çº¢ï¼Œä½†æ˜¯å¯ä»¥è¿è¡Œã€‚mapperä¸Šæ·»åŠ @mapperæ˜¯ä¸ºäº†è®©MyBatisæ‰¾åˆ°mapperå®ç°åˆ›å»ºæ•°æ®åŠ¨æ€ä»£ç†å¯¹è±¡ï¼ŒæŸ¥è¯¢æ•°æ®åº“,å¯ä»¥åœ¨springbootå¯åŠ¨ç±»ä¸Šæ·»åŠ mapperscanæ¥ä»£æ›¿mapperçš„ç¹çã€‚</span><br></pre></td></tr></table></figure><h4 id="1-4-4æ·»åŠ æ—¥å¿—"><a href="#1-4-4æ·»åŠ æ—¥å¿—" class="headerlink" title="1.4.4æ·»åŠ æ—¥å¿—"></a>1.4.4æ·»åŠ æ—¥å¿—</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é…ç½®MyBatisæ—¥å¿—</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">    <span class="attr">configuration:</span></span><br><span class="line">        <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure><h2 id="2-å¸¸ç”¨æ³¨è§£"><a href="#2-å¸¸ç”¨æ³¨è§£" class="headerlink" title="2.å¸¸ç”¨æ³¨è§£"></a>2.å¸¸ç”¨æ³¨è§£</h2><h3 id="2-1-TableName"><a href="#2-1-TableName" class="headerlink" title="2.1@TableName"></a>2.1@TableName</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">ç»è¿‡ä»¥ä¸Šçš„æµ‹è¯•ï¼Œåœ¨ä½¿ç”¨MyBatis-Pluså®ç°åŸºæœ¬çš„CRUDæ—¶ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æŒ‡å®šè¦æ“ä½œçš„è¡¨ï¼Œåªæ˜¯åœ¨</span><br><span class="line">Mapperæ¥å£ç»§æ‰¿BaseMapperæ—¶ï¼Œè®¾ç½®äº†æ³›å‹Userï¼Œè€Œæ“ä½œçš„è¡¨ä¸ºuserè¡¨</span><br><span class="line">ç”±æ­¤å¾—å‡ºç»“è®ºï¼ŒMyBatis-Plusåœ¨ç¡®å®šæ“ä½œçš„è¡¨æ—¶ï¼Œç”±BaseMapperçš„æ³›å‹å†³å®šï¼Œå³å®ä½“ç±»å‹å†³</span><br><span class="line">å®šï¼Œä¸”é»˜è®¤æ“ä½œçš„è¡¨åå’Œå®ä½“ç±»å‹çš„ç±»åä¸€è‡´</span><br></pre></td></tr></table></figure><h4 id="2-1-1å®ä½“ç±»çš„ç±»åå’Œæ“ä½œè¡¨çš„è¡¨åä¸ä¸€è‡´äº§ç”Ÿé—®é¢˜"><a href="#2-1-1å®ä½“ç±»çš„ç±»åå’Œæ“ä½œè¡¨çš„è¡¨åä¸ä¸€è‡´äº§ç”Ÿé—®é¢˜" class="headerlink" title="2.1.1å®ä½“ç±»çš„ç±»åå’Œæ“ä½œè¡¨çš„è¡¨åä¸ä¸€è‡´äº§ç”Ÿé—®é¢˜"></a>2.1.1å®ä½“ç±»çš„ç±»åå’Œæ“ä½œè¡¨çš„è¡¨åä¸ä¸€è‡´äº§ç”Ÿé—®é¢˜</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230107122242069.png" alt="image-20230107122242069"></p><h4 id="2-1-2é€šè¿‡æ·»åŠ -TableNameè§£å†³é—®é¢˜"><a href="#2-1-2é€šè¿‡æ·»åŠ -TableNameè§£å†³é—®é¢˜" class="headerlink" title="2.1.2é€šè¿‡æ·»åŠ @TableNameè§£å†³é—®é¢˜"></a>2.1.2é€šè¿‡æ·»åŠ @TableNameè§£å†³é—®é¢˜</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230107122421711.png" alt="image-20230107122421711"></p><h4 id="2-1-3é€šè¿‡å…¨å±€é…ç½®è§£å†³é—®é¢˜"><a href="#2-1-3é€šè¿‡å…¨å±€é…ç½®è§£å†³é—®é¢˜" class="headerlink" title="2.1.3é€šè¿‡å…¨å±€é…ç½®è§£å†³é—®é¢˜"></a>2.1.3é€šè¿‡å…¨å±€é…ç½®è§£å†³é—®é¢˜</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">    <span class="attr">configuration:</span></span><br><span class="line">        <span class="comment"># é…ç½®MyBatisæ—¥å¿—</span></span><br><span class="line">        <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">    <span class="attr">global-config:</span></span><br><span class="line">        <span class="attr">db-config:</span></span><br><span class="line">            <span class="comment"># é…ç½®MyBatis-Plusæ“ä½œè¡¨çš„é»˜è®¤å‰ç¼€</span></span><br><span class="line">            <span class="attr">table-prefix:</span> <span class="string">t_</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä»¥ä¸Šçš„é—®é¢˜ï¼Œå³å®ä½“ç±»æ‰€å¯¹åº”çš„è¡¨éƒ½æœ‰å›ºå®šçš„å‰ç¼€ï¼Œä¾‹å¦‚t<span class="emphasis">_æˆ–tbl_</span></span><br><span class="line">æ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨MyBatis-Plusæä¾›çš„å…¨å±€é…ç½®ï¼Œä¸ºå®ä½“ç±»æ‰€å¯¹åº”çš„è¡¨åè®¾ç½®é»˜è®¤çš„å‰ç¼€ï¼Œé‚£ä¹ˆå°±</span><br><span class="line">ä¸éœ€è¦åœ¨æ¯ä¸ªå®ä½“ç±»ä¸Šé€šè¿‡@TableNameæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨ã€‚åæ–‡:åˆ©ç”¨MyBatisXæ’ä»¶è‡ªåŠ¨é€†å‘å·¥ç¨‹ï¼Œç”Ÿæˆè¡¨çš„æ—¶å€™å°±å¯ä»¥æŒ‡å®šçœç•¥å‰ç¼€t<span class="emphasis">_æˆ–è€…åç¼€,suffixåç¼€,prefixå‰ç¼€ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="2-2-TableId"><a href="#2-2-TableId" class="headerlink" title="2.2@TableId"></a>2.2@TableId</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">ç»è¿‡ä»¥ä¸Šçš„æµ‹è¯•ï¼ŒMyBatis-Plusåœ¨å®ç°CRUDæ—¶ï¼Œä¼šé»˜è®¤å°†idä½œä¸ºä¸»é”®åˆ—ï¼Œå¹¶åœ¨æ’å…¥æ•°æ®æ—¶ï¼Œé»˜è®¤</span><br><span class="line">åŸºäºé›ªèŠ±ç®—æ³•çš„ç­–ç•¥ç”Ÿæˆid</span><br><span class="line">è‹¥å®ä½“ç±»å’Œè¡¨ä¸­è¡¨ç¤ºä¸»é”®çš„ä¸æ˜¯idï¼Œè€Œæ˜¯å…¶ä»–å­—æ®µï¼Œä¾‹å¦‚uidï¼ŒMyBatis-Plusä¼šè‡ªåŠ¨è¯†åˆ«uidä¸ºä¸»</span><br><span class="line">é”®åˆ—å—ï¼Ÿ</span><br><span class="line">æˆ‘ä»¬å®ä½“ç±»ä¸­çš„å±æ€§idæ”¹ä¸ºuidï¼Œå°†è¡¨ä¸­çš„å­—æ®µidä¹Ÿæ”¹ä¸ºuidï¼Œæµ‹è¯•æ·»åŠ åŠŸèƒ½</span><br></pre></td></tr></table></figure><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230107122950563.png" alt="image-20230107122950563"></p><h4 id="2-2-1é€šè¿‡-TableIdè§£å†³é—®é¢˜"><a href="#2-2-1é€šè¿‡-TableIdè§£å†³é—®é¢˜" class="headerlink" title="2.2.1é€šè¿‡@TableIdè§£å†³é—®é¢˜"></a>2.2.1é€šè¿‡@TableIdè§£å†³é—®é¢˜</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230107123311609.png" alt="image-20230107123311609"></p><h4 id="2-2-2-TableIdçš„valueå±æ€§"><a href="#2-2-2-TableIdçš„valueå±æ€§" class="headerlink" title="2.2.2@TableIdçš„valueå±æ€§"></a>2.2.2@TableIdçš„valueå±æ€§</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">åœºæ™¯:è‹¥å®ä½“ç±»ä¸­ä¸»é”®å¯¹åº”çš„å±æ€§ä¸ºidï¼Œè€Œè¡¨ä¸­è¡¨ç¤ºä¸»é”®çš„å­—æ®µä¸ºuidï¼Œæ­¤æ—¶è‹¥åªåœ¨å±æ€§idä¸Šæ·»åŠ æ³¨è§£</span><br><span class="line">@TableIdï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸Unknown column &#x27;id&#x27; in &#x27;field list&#x27;ï¼Œå³MyBatis-Plusä»ç„¶ä¼šå°†idä½œä¸ºè¡¨çš„ä¸»é”®æ“ä½œï¼Œè€Œè¡¨ä¸­è¡¨ç¤ºä¸»é”®çš„æ˜¯å­—æ®µuid</span><br><span class="line">æ­¤æ—¶éœ€è¦é€šè¿‡@TableIdæ³¨è§£çš„valueå±æ€§ï¼ŒæŒ‡å®šè¡¨ä¸­çš„ä¸»é”®å­—æ®µï¼Œ@TableId(&quot;uid&quot;)æˆ–</span><br><span class="line">@TableId(value=&quot;uid&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-2-3-TableIdçš„typeå±æ€§"><a href="#2-2-3-TableIdçš„typeå±æ€§" class="headerlink" title="2.2.3@TableIdçš„typeå±æ€§"></a>2.2.3@TableIdçš„typeå±æ€§</h4><h5 id="1-å¸¸ç”¨çš„ä¸»é”®ç­–ç•¥"><a href="#1-å¸¸ç”¨çš„ä¸»é”®ç­–ç•¥" class="headerlink" title="1.å¸¸ç”¨çš„ä¸»é”®ç­–ç•¥"></a>1.å¸¸ç”¨çš„ä¸»é”®ç­–ç•¥</h5><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230107123520147.png" alt="image-20230107123520147"></p><h5 id="2-é…ç½®å…¨å±€ä¸»é”®ç­–ç•¥"><a href="#2-é…ç½®å…¨å±€ä¸»é”®ç­–ç•¥" class="headerlink" title="2.é…ç½®å…¨å±€ä¸»é”®ç­–ç•¥"></a>2.é…ç½®å…¨å±€ä¸»é”®ç­–ç•¥</h5><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">    <span class="attr">configuration:</span></span><br><span class="line">        <span class="comment"># é…ç½®MyBatisæ—¥å¿—</span></span><br><span class="line">        <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">    <span class="attr">global-config:</span></span><br><span class="line">        <span class="attr">db-config:</span></span><br><span class="line">            <span class="comment"># é…ç½®MyBatis-Plusæ“ä½œè¡¨çš„é»˜è®¤å‰ç¼€</span></span><br><span class="line">            <span class="attr">table-prefix:</span> <span class="string">t_</span></span><br><span class="line">            <span class="comment"># é…ç½®MyBatis-Plusçš„ä¸»é”®ç­–ç•¥</span></span><br><span class="line">            <span class="attr">id-type:</span> <span class="string">auto</span></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">xé›ªèŠ±ç®—æ³•:</span><br><span class="line">é•¿åº¦å…±64bitï¼ˆä¸€ä¸ªlongå‹ï¼‰ã€‚</span><br><span class="line">é¦–å…ˆæ˜¯ä¸€ä¸ªç¬¦å·ä½ï¼Œ1bitæ ‡è¯†ï¼Œç”±äºlongåŸºæœ¬ç±»å‹åœ¨Javaä¸­æ˜¯å¸¦ç¬¦å·çš„ï¼Œæœ€é«˜ä½æ˜¯ç¬¦å·ä½ï¼Œæ­£æ•°æ˜¯0ï¼Œè´Ÿ</span><br><span class="line">æ•°æ˜¯1ï¼Œæ‰€ä»¥idä¸€èˆ¬æ˜¯æ­£æ•°ï¼Œæœ€é«˜ä½æ˜¯0ã€‚</span><br><span class="line">41bitæ—¶é—´æˆª(æ¯«ç§’çº§)ï¼Œå­˜å‚¨çš„æ˜¯æ—¶é—´æˆªçš„å·®å€¼ï¼ˆå½“å‰æ—¶é—´æˆª - å¼€å§‹æ—¶é—´æˆª)ï¼Œç»“æœçº¦ç­‰äº69.73å¹´ã€‚</span><br><span class="line">10bitä½œä¸ºæœºå™¨çš„IDï¼ˆ5ä¸ªbitæ˜¯æ•°æ®ä¸­å¿ƒï¼Œ5ä¸ªbitçš„æœºå™¨IDï¼Œå¯ä»¥éƒ¨ç½²åœ¨1024ä¸ªèŠ‚ç‚¹ï¼‰ã€‚</span><br><span class="line">12bitä½œä¸ºæ¯«ç§’å†…çš„æµæ°´å·ï¼ˆæ„å‘³ç€æ¯ä¸ªèŠ‚ç‚¹åœ¨æ¯æ¯«ç§’å¯ä»¥äº§ç”Ÿ 4096 ä¸ª IDï¼‰ã€‚</span><br></pre></td></tr></table></figure><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230107124355296.png" alt="image-20230107124355296"></p><h3 id="2-3-TableField"><a href="#2-3-TableField" class="headerlink" title="2.3@TableField"></a>2.3@TableField</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">ç»è¿‡ä»¥ä¸Šçš„æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒMyBatis-Plusåœ¨æ‰§è¡ŒSQLè¯­å¥æ—¶ï¼Œè¦ä¿è¯å®ä½“ç±»ä¸­çš„å±æ€§åå’Œ</span><br><span class="line">è¡¨ä¸­çš„å­—æ®µåä¸€è‡´</span><br><span class="line">å¦‚æœå®ä½“ç±»ä¸­çš„å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„æƒ…å†µï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</span><br></pre></td></tr></table></figure><h4 id="2-3-1ä¸‹åˆ’çº¿å’Œé©¼å³°æƒ…å†µ"><a href="#2-3-1ä¸‹åˆ’çº¿å’Œé©¼å³°æƒ…å†µ" class="headerlink" title="2.3.1ä¸‹åˆ’çº¿å’Œé©¼å³°æƒ…å†µ"></a>2.3.1ä¸‹åˆ’çº¿å’Œé©¼å³°æƒ…å†µ</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">è‹¥å®ä½“ç±»ä¸­çš„å±æ€§ä½¿ç”¨çš„æ˜¯é©¼å³°å‘½åé£æ ¼ï¼Œè€Œè¡¨ä¸­çš„å­—æ®µä½¿ç”¨çš„æ˜¯ä¸‹åˆ’çº¿å‘½åé£æ ¼</span><br><span class="line">ä¾‹å¦‚å®ä½“ç±»å±æ€§userNameï¼Œè¡¨ä¸­å­—æ®µuser<span class="emphasis">_name</span></span><br><span class="line"><span class="emphasis">æ­¤æ—¶MyBatis-Plusä¼šè‡ªåŠ¨å°†ä¸‹åˆ’çº¿å‘½åé£æ ¼è½¬åŒ–ä¸ºé©¼å³°å‘½åé£æ ¼</span></span><br><span class="line"><span class="emphasis">ç›¸å½“äºåœ¨MyBatisä¸­é…ç½®</span></span><br></pre></td></tr></table></figure><h4 id="2-3-2å®ä½“ç±»å±æ€§åå’Œè¡¨ä¸­å±æ€§åä¸ä¸€è‡´-ä¸å±äºç¬¬ä¸€ç§æƒ…å†µ"><a href="#2-3-2å®ä½“ç±»å±æ€§åå’Œè¡¨ä¸­å±æ€§åä¸ä¸€è‡´-ä¸å±äºç¬¬ä¸€ç§æƒ…å†µ" class="headerlink" title="2.3.2å®ä½“ç±»å±æ€§åå’Œè¡¨ä¸­å±æ€§åä¸ä¸€è‡´(ä¸å±äºç¬¬ä¸€ç§æƒ…å†µ)"></a>2.3.2å®ä½“ç±»å±æ€§åå’Œè¡¨ä¸­å±æ€§åä¸ä¸€è‡´(ä¸å±äºç¬¬ä¸€ç§æƒ…å†µ)</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">è‹¥å®ä½“ç±»ä¸­çš„å±æ€§å’Œè¡¨ä¸­çš„å­—æ®µä¸æ»¡è¶³æƒ…å†µ1</span><br><span class="line">ä¾‹å¦‚å®ä½“ç±»å±æ€§nameï¼Œè¡¨ä¸­å­—æ®µusername</span><br><span class="line">æ­¤æ—¶éœ€è¦åœ¨å®ä½“ç±»å±æ€§ä¸Šä½¿ç”¨@TableField(&quot;username&quot;)è®¾ç½®å±æ€§æ‰€å¯¹åº”çš„å­—æ®µå</span><br></pre></td></tr></table></figure><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230107124833373.png" alt="image-20230107124833373"></p><h3 id="2-4-TableLogic"><a href="#2-4-TableLogic" class="headerlink" title="2.4@TableLogic"></a>2.4@TableLogic</h3><h4 id="2-4-1é€»è¾‘åˆ é™¤"><a href="#2-4-1é€»è¾‘åˆ é™¤" class="headerlink" title="2.4.1é€»è¾‘åˆ é™¤"></a>2.4.1é€»è¾‘åˆ é™¤</h4><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">ç‰©ç†åˆ é™¤ï¼šçœŸå®åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä»æ•°æ®åº“ä¸­åˆ é™¤ï¼Œä¹‹åæŸ¥è¯¢ä¸åˆ°æ­¤æ¡è¢«åˆ é™¤çš„æ•°æ®</span><br><span class="line">é€»è¾‘åˆ é™¤ï¼šå‡åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä¸­ä»£è¡¨æ˜¯å¦è¢«åˆ é™¤å­—æ®µçš„çŠ¶æ€ä¿®æ”¹ä¸ºâ€œè¢«åˆ é™¤çŠ¶æ€â€ï¼Œä¹‹ååœ¨æ•°æ®åº“</span><br><span class="line">ä¸­ä»æ—§èƒ½çœ‹åˆ°æ­¤æ¡æ•°æ®è®°å½•</span><br><span class="line">ä½¿ç”¨åœºæ™¯ï¼šå¯ä»¥è¿›è¡Œæ•°æ®æ¢å¤</span><br></pre></td></tr></table></figure><h4 id="2-4-2å®ç°é€»è¾‘åˆ é™¤"><a href="#2-4-2å®ç°é€»è¾‘åˆ é™¤" class="headerlink" title="2.4.2å®ç°é€»è¾‘åˆ é™¤"></a>2.4.2å®ç°é€»è¾‘åˆ é™¤</h4><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230107124936568.png" alt="image-20230107124936568"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230107124958784.png" alt="image-20230107124958784"></p><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/5563/image-20230107125009396.png" alt="image-20230107125009396"></p><p>å¦‚æœè¿™ç¯‡åšå®¢å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå¯ä»¥ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹åšä¸»ï¼Œæ„Ÿè°¢!</p>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -åç«¯ -MyBatisPlus -æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatiså­¦ä¹ æ€»ç»“(2)</title>
      <link href="/2023/01/07/MyBatis%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93(2)/"/>
      <url>/2023/01/07/MyBatis%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93(2)/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1-6åŠ¨æ€SQL"><a href="#1-6åŠ¨æ€SQL" class="headerlink" title="1.6åŠ¨æ€SQL"></a>1.6åŠ¨æ€SQL</h2><h3 id="1-if"><a href="#1-if" class="headerlink" title="1.if"></a>1.if</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ifæ ‡ç­¾å¯é€šè¿‡testå±æ€§çš„è¡¨è¾¾å¼è¿›è¡Œåˆ¤æ–­ï¼Œè‹¥è¡¨è¾¾å¼çš„ç»“æœä¸ºtrueï¼Œåˆ™æ ‡ç­¾ä¸­çš„å†…å®¹ä¼šæ‰§è¡Œï¼›åä¹‹æ ‡ç­¾ä¸­çš„å†…å®¹ä¸ä¼šæ‰§è¡Œ--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--List&lt;Emp&gt; getEmpListByMoreTJ(Emp emp);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpListByMoreTJ&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">select * from t_emp where 1=1</span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;ename != &#x27;&#x27; and ename != null&quot;</span>&gt;</span></span><br><span class="line">and ename = #&#123;ename&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != &#x27;&#x27; and age != null&quot;</span>&gt;</span></span><br><span class="line">and age = #&#123;age&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != &#x27;&#x27; and sex != null&quot;</span>&gt;</span></span><br><span class="line">and sex = #&#123;sex&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-where"><a href="#2-where" class="headerlink" title="2.where"></a>2.where</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpListByMoreTJ2&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">select * from t_emp</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;ename != &#x27;&#x27; and ename != null&quot;</span>&gt;</span></span><br><span class="line">    ename = #&#123;ename&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != &#x27;&#x27; and age != null&quot;</span>&gt;</span></span><br><span class="line">    and age = #&#123;age&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != &#x27;&#x27; and sex != null&quot;</span>&gt;</span></span><br><span class="line">    and sex = #&#123;sex&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">whereå’Œifä¸€èˆ¬ç»“åˆä½¿ç”¨ï¼š</span><br><span class="line">a&gt;è‹¥whereæ ‡ç­¾ä¸­çš„ifæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œåˆ™whereæ ‡ç­¾æ²¡æœ‰ä»»ä½•åŠŸèƒ½ï¼Œå³ä¸ä¼šæ·»åŠ whereå…³é”®å­—</span><br><span class="line">b&gt;è‹¥whereæ ‡ç­¾ä¸­çš„ifæ¡ä»¶æ»¡è¶³ï¼Œåˆ™whereæ ‡ç­¾ä¼šè‡ªåŠ¨æ·»åŠ whereå…³é”®å­—ï¼Œå¹¶å°†æ¡ä»¶æœ€å‰æ–¹å¤šä½™çš„andå»æ‰</span><br><span class="line">æ³¨æ„ï¼šwhereæ ‡ç­¾ä¸èƒ½å»æ‰æ¡ä»¶æœ€åå¤šä½™çš„and</span><br></pre></td></tr></table></figure><h3 id="3-trim"><a href="#3-trim" class="headerlink" title="3.trim"></a>3.trim</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpListByMoreTJ&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">select * from t_emp</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;and&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;ename != &#x27;&#x27; and ename != null&quot;</span>&gt;</span></span><br><span class="line">        ename = #&#123;ename&#125; and</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != &#x27;&#x27; and age != null&quot;</span>&gt;</span></span><br><span class="line">        age = #&#123;age&#125; and</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex != &#x27;&#x27; and sex != null&quot;</span>&gt;</span></span><br><span class="line">        sex = #&#123;sex&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">trimç”¨äºå»æ‰æˆ–æ·»åŠ æ ‡ç­¾ä¸­çš„å†…å®¹</span><br><span class="line">å¸¸ç”¨å±æ€§ï¼š</span><br><span class="line">prefixï¼šåœ¨trimæ ‡ç­¾ä¸­çš„å†…å®¹çš„å‰é¢æ·»åŠ æŸäº›å†…å®¹</span><br><span class="line">prefixOverridesï¼šåœ¨trimæ ‡ç­¾ä¸­çš„å†…å®¹çš„å‰é¢å»æ‰æŸäº›å†…å®¹</span><br><span class="line">suffixï¼šåœ¨trimæ ‡ç­¾ä¸­çš„å†…å®¹çš„åé¢æ·»åŠ æŸäº›å†…å®¹</span><br><span class="line">suffixOverridesï¼šåœ¨trimæ ‡ç­¾ä¸­çš„å†…å®¹çš„åé¢å»æ‰æŸäº›å†…å®¹</span><br></pre></td></tr></table></figure><h3 id="4-chooseã€whenã€otherwise"><a href="#4-chooseã€whenã€otherwise" class="headerlink" title="4.chooseã€whenã€otherwise"></a>4.chooseã€whenã€otherwise</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--List&lt;Emp&gt; getEmpListByChoose(Emp emp);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpListByChoose&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;empColumns&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span> from t_emp</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;ename != &#x27;&#x27; and ename != null&quot;</span>&gt;</span></span><br><span class="line">            ename = #&#123;ename&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;age != &#x27;&#x27; and age != null&quot;</span>&gt;</span></span><br><span class="line">            age = #&#123;age&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;sex != &#x27;&#x27; and sex != null&quot;</span>&gt;</span></span><br><span class="line">            sex = #&#123;sex&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;email != &#x27;&#x27; and email != null&quot;</span>&gt;</span></span><br><span class="line">            email = #&#123;email&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-foreach"><a href="#5-foreach" class="headerlink" title="5.foreach"></a>5.foreach</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--int insertMoreEmp(List&lt;Emp&gt; emps);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertMoreEmp&quot;</span>&gt;</span></span><br><span class="line">insert into t_emp values</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">item</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">    (null,#&#123;emp.ename&#125;,#&#123;emp.age&#125;,#&#123;emp.sex&#125;,#&#123;emp.email&#125;,null)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--int deleteMoreByArray(int[] eids);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteMoreByArray&quot;</span>&gt;</span></span><br><span class="line">delete from t_emp where</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;eids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;or&quot;</span>&gt;</span></span><br><span class="line">    eid = #&#123;eid&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--int deleteMoreByArray(int[] eids);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteMoreByArray&quot;</span>&gt;</span></span><br><span class="line">delete from t_emp where eid in</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;eids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;eid&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">    #&#123;eid&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">å±æ€§ï¼š</span><br><span class="line">collectionï¼šè®¾ç½®è¦å¾ªç¯çš„æ•°ç»„æˆ–é›†åˆ</span><br><span class="line">itemï¼šè¡¨ç¤ºé›†åˆæˆ–æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ•°æ®</span><br><span class="line">separatorï¼šè®¾ç½®å¾ªç¯ä½“ä¹‹é—´çš„åˆ†éš”ç¬¦</span><br><span class="line">openï¼šè®¾ç½®foreachæ ‡ç­¾ä¸­çš„å†…å®¹çš„å¼€å§‹ç¬¦</span><br><span class="line">closeï¼šè®¾ç½®foreachæ ‡ç­¾ä¸­çš„å†…å®¹çš„ç»“æŸç¬¦</span><br></pre></td></tr></table></figure><h3 id="6-SQLç‰‡æ®µ"><a href="#6-SQLç‰‡æ®µ" class="headerlink" title="6.SQLç‰‡æ®µ"></a>6.SQLç‰‡æ®µ</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--sqlç‰‡æ®µï¼Œå¯ä»¥è®°å½•ä¸€æ®µå…¬å…±sqlç‰‡æ®µï¼Œåœ¨ä½¿ç”¨çš„åœ°æ–¹é€šè¿‡includeæ ‡ç­¾è¿›è¡Œå¼•å…¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;empColumns&quot;</span>&gt;</span></span><br><span class="line">eid,ename,age,sex,did</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;empColumns&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span> from t_emp</span><br></pre></td></tr></table></figure><h2 id="1-7MyBatisçš„ç¼“å­˜"><a href="#1-7MyBatisçš„ç¼“å­˜" class="headerlink" title="1.7MyBatisçš„ç¼“å­˜"></a>1.7MyBatisçš„ç¼“å­˜</h2><h3 id="1-7-1MyBatisçš„ä¸€çº§ç¼“å­˜"><a href="#1-7-1MyBatisçš„ä¸€çº§ç¼“å­˜" class="headerlink" title="1.7.1MyBatisçš„ä¸€çº§ç¼“å­˜"></a>1.7.1MyBatisçš„ä¸€çº§ç¼“å­˜</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">ä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«çš„ï¼Œé€šè¿‡åŒä¸€ä¸ªSqlSessionæŸ¥è¯¢çš„æ•°æ®ä¼šè¢«ç¼“å­˜ï¼Œä¸‹æ¬¡æŸ¥è¯¢ç›¸åŒçš„æ•°æ®ï¼Œå°±</span><br><span class="line">ä¼šä»ç¼“å­˜ä¸­ç›´æ¥è·å–ï¼Œä¸ä¼šä»æ•°æ®åº“é‡æ–°è®¿é—®</span><br><span class="line">ä½¿ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µï¼š</span><br><span class="line">1) ä¸åŒçš„SqlSessionå¯¹åº”ä¸åŒçš„ä¸€çº§ç¼“å­˜</span><br><span class="line">2) åŒä¸€ä¸ªSqlSessionä½†æ˜¯æŸ¥è¯¢æ¡ä»¶ä¸åŒ</span><br><span class="line">3) åŒä¸€ä¸ªSqlSessionä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰§è¡Œäº†ä»»ä½•ä¸€æ¬¡å¢åˆ æ”¹æ“ä½œ</span><br><span class="line">4) åŒä¸€ä¸ªSqlSessionä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰‹åŠ¨æ¸…ç©ºäº†ç¼“å­˜</span><br></pre></td></tr></table></figure><h3 id="1-7-2MyBatisçš„äºŒçº§ç¼“å­˜"><a href="#1-7-2MyBatisçš„äºŒçº§ç¼“å­˜" class="headerlink" title="1.7.2MyBatisçš„äºŒçº§ç¼“å­˜"></a>1.7.2MyBatisçš„äºŒçº§ç¼“å­˜</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">äºŒçº§ç¼“å­˜æ˜¯SqlSessionFactoryçº§åˆ«ï¼Œé€šè¿‡åŒä¸€ä¸ªSqlSessionFactoryåˆ›å»ºçš„SqlSessionæŸ¥è¯¢çš„ç»“æœä¼šè¢«</span><br><span class="line">ç¼“å­˜ï¼›æ­¤åè‹¥å†æ¬¡æ‰§è¡Œç›¸åŒçš„æŸ¥è¯¢è¯­å¥ï¼Œç»“æœå°±ä¼šä»ç¼“å­˜ä¸­è·å–</span><br><span class="line">äºŒçº§ç¼“å­˜å¼€å¯çš„æ¡ä»¶ï¼š</span><br><span class="line">a&gt;åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼Œè®¾ç½®å…¨å±€é…ç½®å±æ€§cacheEnabled=&quot;true&quot;ï¼Œé»˜è®¤ä¸ºtrueï¼Œä¸éœ€è¦è®¾ç½®</span><br><span class="line">b&gt;åœ¨æ˜ å°„æ–‡ä»¶ä¸­è®¾ç½®æ ‡ç­¾&lt;cache /&gt;</span><br><span class="line">c&gt;äºŒçº§ç¼“å­˜å¿…é¡»åœ¨SqlSessionå…³é—­æˆ–æäº¤ä¹‹åæœ‰æ•ˆ</span><br><span class="line">d&gt;æŸ¥è¯¢çš„æ•°æ®æ‰€è½¬æ¢çš„å®ä½“ç±»ç±»å‹å¿…é¡»å®ç°åºåˆ—åŒ–çš„æ¥å£</span><br><span class="line">ä½¿äºŒçº§ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µï¼š</span><br><span class="line">ä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´æ‰§è¡Œäº†ä»»æ„çš„å¢åˆ æ”¹ï¼Œä¼šä½¿ä¸€çº§å’ŒäºŒçº§ç¼“å­˜åŒæ—¶å¤±æ•ˆ</span><br></pre></td></tr></table></figure><h3 id="1-7-3äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®"><a href="#1-7-3äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®" class="headerlink" title="1.7.3äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®"></a>1.7.3äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">åœ¨mapperé…ç½®æ–‡ä»¶ä¸­æ·»åŠ çš„cacheæ ‡ç­¾å¯ä»¥è®¾ç½®ä¸€äº›å±æ€§ï¼š</span><br><span class="line">evictionå±æ€§ï¼šç¼“å­˜å›æ”¶ç­–ç•¥</span><br><span class="line">LRUï¼ˆLeast Recently Usedï¼‰ â€“ æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ï¼šç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚</span><br><span class="line">FIFOï¼ˆFirst in First outï¼‰ â€“ å…ˆè¿›å…ˆå‡ºï¼šæŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬ã€‚</span><br><span class="line">SOFT â€“ è½¯å¼•ç”¨ï¼šç§»é™¤åŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚</span><br><span class="line">WEAK â€“ å¼±å¼•ç”¨ï¼šæ›´ç§¯æåœ°ç§»é™¤åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚</span><br><span class="line">é»˜è®¤çš„æ˜¯ LRUã€‚</span><br><span class="line"></span><br><span class="line">flushIntervalå±æ€§ï¼šåˆ·æ–°é—´éš”ï¼Œå•ä½æ¯«ç§’</span><br><span class="line">é»˜è®¤æƒ…å†µæ˜¯ä¸è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆ·æ–°é—´éš”ï¼Œç¼“å­˜ä»…ä»…è°ƒç”¨è¯­å¥æ—¶åˆ·æ–°</span><br><span class="line"></span><br><span class="line">sizeå±æ€§ï¼šå¼•ç”¨æ•°ç›®ï¼Œæ­£æ•´æ•°</span><br><span class="line">ä»£è¡¨ç¼“å­˜æœ€å¤šå¯ä»¥å­˜å‚¨å¤šå°‘ä¸ªå¯¹è±¡ï¼Œå¤ªå¤§å®¹æ˜“å¯¼è‡´å†…å­˜æº¢å‡º</span><br><span class="line"></span><br><span class="line">readOnlyå±æ€§ï¼šåªè¯»ï¼Œtrue/false</span><br><span class="line">trueï¼šåªè¯»ç¼“å­˜ï¼›ä¼šç»™æ‰€æœ‰è°ƒç”¨è€…è¿”å›ç¼“å­˜å¯¹è±¡çš„ç›¸åŒå®ä¾‹ã€‚å› æ­¤è¿™äº›å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ã€‚è¿™æä¾›äº†å¾ˆé‡è¦çš„æ€§èƒ½ä¼˜åŠ¿ã€‚</span><br><span class="line">falseï¼šè¯»å†™ç¼“å­˜ï¼›ä¼šè¿”å›ç¼“å­˜å¯¹è±¡çš„æ‹·è´ï¼ˆé€šè¿‡åºåˆ—åŒ–ï¼‰ã€‚è¿™ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯å®‰å…¨ï¼Œå› æ­¤é»˜è®¤æ˜¯falseã€‚</span><br></pre></td></tr></table></figure><h3 id="1-7-3MyBatisç¼“å­˜æŸ¥è¯¢çš„é¡ºåº"><a href="#1-7-3MyBatisç¼“å­˜æŸ¥è¯¢çš„é¡ºåº" class="headerlink" title="1.7.3MyBatisç¼“å­˜æŸ¥è¯¢çš„é¡ºåº"></a>1.7.3MyBatisç¼“å­˜æŸ¥è¯¢çš„é¡ºåº</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">å…ˆæŸ¥è¯¢äºŒçº§ç¼“å­˜ï¼Œå› ä¸ºäºŒçº§ç¼“å­˜ä¸­å¯èƒ½ä¼šæœ‰å…¶ä»–ç¨‹åºå·²ç»æŸ¥å‡ºæ¥çš„æ•°æ®ï¼Œå¯ä»¥æ‹¿æ¥ç›´æ¥ä½¿ç”¨ã€‚</span><br><span class="line">å¦‚æœäºŒçº§ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œå†æŸ¥è¯¢ä¸€çº§ç¼“å­˜</span><br><span class="line">å¦‚æœä¸€çº§ç¼“å­˜ä¹Ÿæ²¡æœ‰å‘½ä¸­ï¼Œåˆ™æŸ¥è¯¢æ•°æ®åº“</span><br><span class="line">SqlSessionå…³é—­ä¹‹åï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®ä¼šå†™å…¥äºŒçº§ç¼“å­˜</span><br></pre></td></tr></table></figure><h3 id="1-8MyBatisçš„é€†å‘å·¥ç¨‹"><a href="#1-8MyBatisçš„é€†å‘å·¥ç¨‹" class="headerlink" title="1.8MyBatisçš„é€†å‘å·¥ç¨‹"></a>1.8MyBatisçš„é€†å‘å·¥ç¨‹</h3><figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">æ­£å‘å·¥ç¨‹ï¼šå…ˆåˆ›å»ºJavaå®ä½“ç±»ï¼Œç”±æ¡†æ¶è´Ÿè´£æ ¹æ®å®ä½“ç±»ç”Ÿæˆæ•°æ®åº“è¡¨ã€‚Hibernateæ˜¯æ”¯æŒæ­£å‘å·¥ç¨‹çš„ã€‚</span><br><span class="line">é€†å‘å·¥ç¨‹ï¼šå…ˆåˆ›å»ºæ•°æ®åº“è¡¨ï¼Œç”±æ¡†æ¶è´Ÿè´£æ ¹æ®æ•°æ®åº“è¡¨ï¼Œåå‘ç”Ÿæˆå¦‚ä¸‹èµ„æºï¼š</span><br><span class="line">    Javaå®ä½“ç±»</span><br><span class="line">    Mapperæ¥å£</span><br><span class="line">    Mapperæ˜ å°„æ–‡ä»¶</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -MyBatis -åç«¯ -æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java8çš„Streamæµå­¦ä¹ </title>
      <link href="/2023/01/06/Java8%E7%9A%84Stream%E6%B5%81%E5%AD%A6%E4%B9%A0/"/>
      <url>/2023/01/06/Java8%E7%9A%84Stream%E6%B5%81%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1-Streamæ¦‚è¿°"><a href="#1-Streamæ¦‚è¿°" class="headerlink" title="1.Streamæ¦‚è¿°"></a>1.Streamæ¦‚è¿°</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">Java 8 æ˜¯ä¸€ä¸ªéå¸¸æˆåŠŸçš„ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬æ–°å¢çš„Streamï¼Œé…åˆåŒç‰ˆæœ¬å‡ºç°çš„ Lambda ï¼Œç»™æˆ‘ä»¬æ“ä½œé›†åˆï¼ˆCollectionï¼‰æä¾›äº†æå¤§çš„ä¾¿åˆ©ã€‚</span><br><span class="line"></span><br><span class="line">é‚£ä¹ˆä»€ä¹ˆæ˜¯Streamï¼Ÿ</span><br><span class="line"></span><br><span class="line">Streamå°†è¦å¤„ç†çš„å…ƒç´ é›†åˆçœ‹ä½œä¸€ç§æµï¼Œåœ¨æµçš„è¿‡ç¨‹ä¸­ï¼Œå€ŸåŠ©Stream APIå¯¹æµä¸­çš„å…ƒç´ è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚ï¼šç­›é€‰ã€æ’åºã€èšåˆç­‰ã€‚</span><br><span class="line"></span><br><span class="line">Streamå¯ä»¥ç”±æ•°ç»„æˆ–é›†åˆåˆ›å»ºï¼Œå¯¹æµçš„æ“ä½œåˆ†ä¸ºä¸¤ç§ï¼š</span><br><span class="line">ä¸­é—´æ“ä½œï¼Œæ¯æ¬¡è¿”å›ä¸€ä¸ªæ–°çš„æµï¼Œå¯ä»¥æœ‰å¤šä¸ªã€‚</span><br><span class="line">ç»ˆç«¯æ“ä½œï¼Œæ¯ä¸ªæµåªèƒ½è¿›è¡Œä¸€æ¬¡ç»ˆç«¯æ“ä½œï¼Œç»ˆç«¯æ“ä½œç»“æŸåæµæ— æ³•å†æ¬¡ä½¿ç”¨ã€‚ç»ˆç«¯æ“ä½œä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„é›†åˆæˆ–å€¼ã€‚</span><br><span class="line"></span><br><span class="line">å¦å¤–ï¼ŒStreamæœ‰å‡ ä¸ªç‰¹æ€§ï¼š</span><br><span class="line">streamä¸å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™å¯¹æ•°æ®è¿›è¡Œè®¡ç®—ï¼Œä¸€èˆ¬ä¼šè¾“å‡ºç»“æœã€‚</span><br><span class="line">streamä¸ä¼šæ”¹å˜æ•°æ®æºï¼Œé€šå¸¸æƒ…å†µä¸‹ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„é›†åˆæˆ–ä¸€ä¸ªå€¼ã€‚</span><br><span class="line">streamå…·æœ‰å»¶è¿Ÿæ‰§è¡Œç‰¹æ€§ï¼Œåªæœ‰è°ƒç”¨ç»ˆç«¯æ“ä½œæ—¶ï¼Œä¸­é—´æ“ä½œæ‰ä¼šæ‰§è¡Œã€‚</span><br></pre></td></tr></table></figure><h2 id="2-Streamçš„åˆ›å»º"><a href="#2-Streamçš„åˆ›å»º" class="headerlink" title="2.Streamçš„åˆ›å»º"></a>2.Streamçš„åˆ›å»º</h2><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">Streamå¯ä»¥é€šè¿‡é›†åˆæ•°ç»„åˆ›å»º</span><br></pre></td></tr></table></figure><h3 id="1-é€šè¿‡java-util-Collection-stream-æ–¹æ³•ç”¨é›†åˆåˆ›å»ºæµ"><a href="#1-é€šè¿‡java-util-Collection-stream-æ–¹æ³•ç”¨é›†åˆåˆ›å»ºæµ" class="headerlink" title="1.é€šè¿‡java.util.Collection.stream()æ–¹æ³•ç”¨é›†åˆåˆ›å»ºæµ"></a>1.é€šè¿‡java.util.Collection.stream()æ–¹æ³•ç”¨é›†åˆåˆ›å»ºæµ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªé¡ºåºæµ</span></span><br><span class="line">Stream&lt;String&gt; stream = list.stream();</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¹¶è¡Œæµ</span></span><br><span class="line">Stream&lt;String&gt; parallelStream = list.parallelStream();</span><br></pre></td></tr></table></figure><h3 id="2-ä½¿ç”¨java-util-Arrays-stream-T-array-æ–¹æ³•ç”¨è¿‡æ•°ç»„åˆ›å»ºæµ"><a href="#2-ä½¿ç”¨java-util-Arrays-stream-T-array-æ–¹æ³•ç”¨è¿‡æ•°ç»„åˆ›å»ºæµ" class="headerlink" title="2.ä½¿ç”¨java.util.Arrays.stream(T [] array)æ–¹æ³•ç”¨è¿‡æ•°ç»„åˆ›å»ºæµ"></a>2.ä½¿ç”¨java.util.Arrays.stream(T [] array)æ–¹æ³•ç”¨è¿‡æ•°ç»„åˆ›å»ºæµ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] array=&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>&#125;;</span><br><span class="line"><span class="type">IntStream</span> <span class="variable">stream</span> <span class="operator">=</span> Arrays.stream(array);</span><br></pre></td></tr></table></figure><h3 id="3-ä½¿ç”¨Streamçš„é™æ€æ–¹æ³•-of-ã€iterate-ã€generate"><a href="#3-ä½¿ç”¨Streamçš„é™æ€æ–¹æ³•-of-ã€iterate-ã€generate" class="headerlink" title="3.ä½¿ç”¨Streamçš„é™æ€æ–¹æ³•:of()ã€iterate()ã€generate()"></a>3.ä½¿ç”¨Streamçš„é™æ€æ–¹æ³•:of()ã€iterate()ã€generate()</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Stream&lt;Integer&gt; stream = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">Stream&lt;Integer&gt; stream2 = Stream.iterate(<span class="number">0</span>, (x) -&gt; x + <span class="number">3</span>).limit(<span class="number">4</span>);</span><br><span class="line">stream2.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">Stream&lt;Double&gt; stream3 = Stream.generate(Math::random).limit(<span class="number">3</span>);</span><br><span class="line">stream3.forEach(System.out::println);</span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">streamå’ŒparallelStreamçš„ç®€å•åŒºåˆ†ï¼š streamæ˜¯é¡ºåºæµï¼Œç”±ä¸»çº¿ç¨‹æŒ‰é¡ºåºå¯¹æµæ‰§è¡Œæ“ä½œï¼Œè€ŒparallelStreamæ˜¯å¹¶è¡Œæµï¼Œå†…éƒ¨ä»¥å¤šçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œçš„æ–¹å¼å¯¹æµè¿›è¡Œæ“ä½œï¼Œä½†å‰ææ˜¯æµä¸­çš„æ•°æ®å¤„ç†æ²¡æœ‰é¡ºåºè¦æ±‚ã€‚</span><br><span class="line">é™¤äº†ç›´æ¥åˆ›å»ºå¹¶è¡Œæµï¼Œè¿˜å¯ä»¥é€šè¿‡parallel()æŠŠé¡ºåºæµè½¬æ¢æˆå¹¶è¡Œæµï¼š</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Optional&lt;Integer&gt; findFirst = list.stream().parallel().filter(x-&gt;x&gt;<span class="number">6</span>).findFirst();</span><br></pre></td></tr></table></figure><h2 id="3-Streamçš„ä½¿ç”¨"><a href="#3-Streamçš„ä½¿ç”¨" class="headerlink" title="3.Streamçš„ä½¿ç”¨"></a>3.Streamçš„ä½¿ç”¨</h2><h3 id="3-1ç†è§£optional"><a href="#3-1ç†è§£optional" class="headerlink" title="3.1ç†è§£optional"></a>3.1ç†è§£optional</h3><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">Optionalç±»æ˜¯ä¸€ä¸ªå¯ä»¥ä¸ºnullçš„å®¹å™¨å¯¹è±¡ã€‚å¦‚æœå€¼å­˜åœ¨åˆ™isPresent()æ–¹æ³•ä¼šè¿”å›trueï¼Œè°ƒç”¨get()æ–¹æ³•ä¼šè¿”å›è¯¥å¯¹è±¡ã€‚</span><br></pre></td></tr></table></figure><h3 id="3-2éå†-åŒ¹é…-foreach-find-match"><a href="#3-2éå†-åŒ¹é…-foreach-find-match" class="headerlink" title="3.2éå†&#x2F;åŒ¹é…(foreach&#x2F;find&#x2F;match)"></a>3.2éå†&#x2F;åŒ¹é…(foreach&#x2F;find&#x2F;match)</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// importå·²çœç•¥ï¼Œè¯·è‡ªè¡Œæ·»åŠ ï¼Œåé¢ä»£ç äº¦æ˜¯</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; list = Arrays.asList(<span class="number">7</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†è¾“å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´ </span></span><br><span class="line">        list.stream().filter(x -&gt; x &gt; <span class="number">6</span>).forEach(System.out::println);</span><br><span class="line">        <span class="comment">// åŒ¹é…ç¬¬ä¸€ä¸ª</span></span><br><span class="line">        Optional&lt;Integer&gt; findFirst = list.stream().filter(x -&gt; x &gt; <span class="number">6</span>).findFirst();</span><br><span class="line">        <span class="comment">// åŒ¹é…ä»»æ„ï¼ˆé€‚ç”¨äºå¹¶è¡Œæµï¼‰</span></span><br><span class="line">        Optional&lt;Integer&gt; findAny = list.parallelStream().filter(x -&gt; x &gt; <span class="number">6</span>).findAny();</span><br><span class="line">        <span class="comment">// æ˜¯å¦åŒ…å«ç¬¦åˆç‰¹å®šæ¡ä»¶çš„å…ƒç´ </span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">anyMatch</span> <span class="operator">=</span> list.stream().anyMatch(x -&gt; x &gt; <span class="number">6</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;åŒ¹é…ç¬¬ä¸€ä¸ªå€¼ï¼š&quot;</span> + findFirst.get());</span><br><span class="line">        System.out.println(<span class="string">&quot;åŒ¹é…ä»»æ„ä¸€ä¸ªå€¼ï¼š&quot;</span> + findAny.get());</span><br><span class="line">        System.out.println(<span class="string">&quot;æ˜¯å¦å­˜åœ¨å¤§äº6çš„å€¼ï¼š&quot;</span> + anyMatch);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3ç­›é€‰-filter"><a href="#3-3ç­›é€‰-filter" class="headerlink" title="3.3ç­›é€‰(filter)"></a>3.3ç­›é€‰(filter)</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">ç­›é€‰å‡ºIntegeré›†åˆä¸­å¤§äº7çš„å…ƒç´ ï¼Œå¹¶æ‰“å°å‡ºæ¥</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Integer&gt; list = Arrays.asList(<span class="number">6</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">9</span>);</span><br><span class="line">Stream&lt;Integer&gt; stream = list.stream();</span><br><span class="line">stream.filter(x -&gt; x &gt; <span class="number">7</span>).forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> ç­›é€‰å‘˜å·¥ä¸­å·¥èµ„é«˜äº8000çš„äººï¼Œå¹¶å½¢æˆæ–°çš„é›†åˆã€‚ å½¢æˆæ–°é›†åˆä¾èµ–collectï¼ˆæ”¶é›†ï¼‰</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Person&gt; personList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Person&gt;();</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">8900</span>, <span class="number">23</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Jack&quot;</span>, <span class="number">7000</span>, <span class="number">25</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lily&quot;</span>, <span class="number">7800</span>, <span class="number">21</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Anni&quot;</span>, <span class="number">8200</span>, <span class="number">24</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Owen&quot;</span>, <span class="number">9500</span>, <span class="number">25</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alisa&quot;</span>, <span class="number">7900</span>, <span class="number">26</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line"></span><br><span class="line">List&lt;String&gt; fiterList = personList.stream().filter(x -&gt; x.getSalary() &gt; <span class="number">8000</span>).map(Person::getName)</span><br><span class="line">.collect(Collectors.toList());</span><br><span class="line">System.out.print(<span class="string">&quot;è–ªèµ„é«˜äº8000ç¾å…ƒçš„å‘˜å·¥ï¼š&quot;</span> + fiterList);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-4èšåˆ-max-min-count"><a href="#3-4èšåˆ-max-min-count" class="headerlink" title="3.4èšåˆ(max&#x2F;min&#x2F;count)"></a>3.4èšåˆ(max&#x2F;min&#x2F;count)</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è·å–Stringé›†åˆä¸­æœ€é•¿çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;adnm&quot;</span>, <span class="string">&quot;admmt&quot;</span>, <span class="string">&quot;pot&quot;</span>, <span class="string">&quot;xbangd&quot;</span>, <span class="string">&quot;weoujgsd&quot;</span>);</span><br><span class="line"></span><br><span class="line">Optional&lt;String&gt; max = list.stream().max(Comparator.comparing(String::length));</span><br><span class="line">System.out.println(<span class="string">&quot;æœ€é•¿çš„å­—ç¬¦ä¸²ï¼š&quot;</span> + max.get());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è·å–Integeré›†åˆä¸­çš„æœ€å¤§å€¼</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Integer&gt; list = Arrays.asList(<span class="number">7</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">4</span>, <span class="number">11</span>, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªç„¶æ’åº</span></span><br><span class="line">Optional&lt;Integer&gt; max = list.stream().max(Integer::compareTo);</span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰æ’åºï¼ˆä»å¤§åˆ°å°æ’åºï¼‰</span></span><br><span class="line">Optional&lt;Integer&gt; max2 = list.stream().max((o1, o2) -&gt; o2 - o1);</span><br><span class="line">System.out.println(<span class="string">&quot;è‡ªç„¶æ’åºçš„æœ€å¤§å€¼ï¼š&quot;</span> + max.get());</span><br><span class="line">System.out.println(<span class="string">&quot;è‡ªå®šä¹‰æ’åºçš„æœ€å¤§å€¼ï¼š&quot;</span> + max2.get());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è·å–å‘˜å·¥è–ªèµ„æœ€é«˜çš„äºº</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Person&gt; personList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Person&gt;();</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">8900</span>, <span class="number">23</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Jack&quot;</span>, <span class="number">7000</span>, <span class="number">25</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lily&quot;</span>, <span class="number">7800</span>, <span class="number">21</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Anni&quot;</span>, <span class="number">8200</span>, <span class="number">24</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Owen&quot;</span>, <span class="number">9500</span>, <span class="number">25</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alisa&quot;</span>, <span class="number">7900</span>, <span class="number">26</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line"></span><br><span class="line">Optional&lt;Person&gt; max = personList.stream().max(Comparator.comparingInt(Person::getSalary));</span><br><span class="line">System.out.println(<span class="string">&quot;å‘˜å·¥è–ªèµ„æœ€å¤§å€¼ï¼š&quot;</span> + max.get().getSalary());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è®¡ç®—Integeré›†åˆä¸­å¤§äº6çš„å…ƒç´ çš„ä¸ªæ•°ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Integer&gt; list = Arrays.asList(<span class="number">7</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">11</span>, <span class="number">9</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> list.stream().filter(x -&gt; x &gt; <span class="number">6</span>).count();</span><br><span class="line">System.out.println(<span class="string">&quot;listä¸­å¤§äº6çš„å…ƒç´ ä¸ªæ•°ï¼š&quot;</span> + count);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-5æ˜ å°„-map-flatMap"><a href="#3-5æ˜ å°„-map-flatMap" class="headerlink" title="3.5æ˜ å°„(map&#x2F;flatMap)"></a>3.5æ˜ å°„(map&#x2F;flatMap)</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">è‹±æ–‡å­—ç¬¦ä¸²æ•°ç»„çš„å…ƒç´ å…¨éƒ¨æ”¹ä¸ºå¤§å†™ã€‚æ•´æ•°æ•°ç»„æ¯ä¸ªå…ƒç´ +3</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">String[] strArr = &#123; <span class="string">&quot;abcd&quot;</span>, <span class="string">&quot;bcdd&quot;</span>, <span class="string">&quot;defde&quot;</span>, <span class="string">&quot;fTr&quot;</span> &#125;;</span><br><span class="line">List&lt;String&gt; strList = Arrays.stream(strArr).map(String::toUpperCase).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; intList = Arrays.asList(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>);</span><br><span class="line">List&lt;Integer&gt; intListNew = intList.stream().map(x -&gt; x + <span class="number">3</span>).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;æ¯ä¸ªå…ƒç´ å¤§å†™ï¼š&quot;</span> + strList);</span><br><span class="line">System.out.println(<span class="string">&quot;æ¯ä¸ªå…ƒç´ +3ï¼š&quot;</span> + intListNew);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">å°†å‘˜å·¥çš„è–ªèµ„å…¨éƒ¨å¢åŠ 1000ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Person&gt; personList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Person&gt;();</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">8900</span>, <span class="number">23</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Jack&quot;</span>, <span class="number">7000</span>, <span class="number">25</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lily&quot;</span>, <span class="number">7800</span>, <span class="number">21</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Anni&quot;</span>, <span class="number">8200</span>, <span class="number">24</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Owen&quot;</span>, <span class="number">9500</span>, <span class="number">25</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alisa&quot;</span>, <span class="number">7900</span>, <span class="number">26</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸æ”¹å˜åŸæ¥å‘˜å·¥é›†åˆçš„æ–¹å¼</span></span><br><span class="line">List&lt;Person&gt; personListNew = personList.stream().map(person -&gt; &#123;</span><br><span class="line"><span class="type">Person</span> <span class="variable">personNew</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(person.getName(), <span class="number">0</span>, <span class="number">0</span>, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">personNew.setSalary(person.getSalary() + <span class="number">10000</span>);</span><br><span class="line"><span class="keyword">return</span> personNew;</span><br><span class="line">&#125;).collect(Collectors.toList());</span><br><span class="line">System.out.println(<span class="string">&quot;ä¸€æ¬¡æ”¹åŠ¨å‰ï¼š&quot;</span> + personList.get(<span class="number">0</span>).getName() + <span class="string">&quot;--&gt;&quot;</span> + personList.get(<span class="number">0</span>).getSalary());</span><br><span class="line">System.out.println(<span class="string">&quot;ä¸€æ¬¡æ”¹åŠ¨åï¼š&quot;</span> + personListNew.get(<span class="number">0</span>).getName() + <span class="string">&quot;--&gt;&quot;</span> + personListNew.get(<span class="number">0</span>).getSalary());</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¹å˜åŸæ¥å‘˜å·¥é›†åˆçš„æ–¹å¼</span></span><br><span class="line">List&lt;Person&gt; personListNew2 = personList.stream().map(person -&gt; &#123;</span><br><span class="line">person.setSalary(person.getSalary() + <span class="number">10000</span>);</span><br><span class="line"><span class="keyword">return</span> person;</span><br><span class="line">&#125;).collect(Collectors.toList());</span><br><span class="line">System.out.println(<span class="string">&quot;äºŒæ¬¡æ”¹åŠ¨å‰ï¼š&quot;</span> + personList.get(<span class="number">0</span>).getName() + <span class="string">&quot;--&gt;&quot;</span> + personListNew.get(<span class="number">0</span>).getSalary());</span><br><span class="line">System.out.println(<span class="string">&quot;äºŒæ¬¡æ”¹åŠ¨åï¼š&quot;</span> + personListNew2.get(<span class="number">0</span>).getName() + <span class="string">&quot;--&gt;&quot;</span> + personListNew.get(<span class="number">0</span>).getSalary());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">å°†ä¸¤ä¸ªå­—ç¬¦æ•°ç»„åˆå¹¶æˆä¸€ä¸ªæ–°çš„å­—ç¬¦æ•°ç»„ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;m,k,l,a&quot;</span>, <span class="string">&quot;1,3,5,7&quot;</span>);</span><br><span class="line">List&lt;String&gt; listNew = list.stream().flatMap(s -&gt; &#123;</span><br><span class="line"><span class="comment">// å°†æ¯ä¸ªå…ƒç´ è½¬æ¢æˆä¸€ä¸ªstream</span></span><br><span class="line">String[] split = s.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">Stream&lt;String&gt; s2 = Arrays.stream(split);</span><br><span class="line"><span class="keyword">return</span> s2;</span><br><span class="line">&#125;).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;å¤„ç†å‰çš„é›†åˆï¼š&quot;</span> + list);</span><br><span class="line">System.out.println(<span class="string">&quot;å¤„ç†åçš„é›†åˆï¼š&quot;</span> + listNew);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-6å½’çº¦-reduce"><a href="#3-6å½’çº¦-reduce" class="headerlink" title="3.6å½’çº¦(reduce)"></a>3.6å½’çº¦(reduce)</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">æ±‚Integeré›†åˆçš„å…ƒç´ ä¹‹å’Œã€ä¹˜ç§¯å’Œæœ€å¤§å€¼ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Integer&gt; list = Arrays.asList(<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">11</span>, <span class="number">4</span>);</span><br><span class="line"><span class="comment">// æ±‚å’Œæ–¹å¼1</span></span><br><span class="line">Optional&lt;Integer&gt; sum = list.stream().reduce((x, y) -&gt; x + y);</span><br><span class="line"><span class="comment">// æ±‚å’Œæ–¹å¼2</span></span><br><span class="line">Optional&lt;Integer&gt; sum2 = list.stream().reduce(Integer::sum);</span><br><span class="line"><span class="comment">// æ±‚å’Œæ–¹å¼3</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">sum3</span> <span class="operator">=</span> list.stream().reduce(<span class="number">0</span>, Integer::sum);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‚ä¹˜ç§¯</span></span><br><span class="line">Optional&lt;Integer&gt; product = list.stream().reduce((x, y) -&gt; x * y);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‚æœ€å¤§å€¼æ–¹å¼1</span></span><br><span class="line">Optional&lt;Integer&gt; max = list.stream().reduce((x, y) -&gt; x &gt; y ? x : y);</span><br><span class="line"><span class="comment">// æ±‚æœ€å¤§å€¼å†™æ³•2</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">max2</span> <span class="operator">=</span> list.stream().reduce(<span class="number">1</span>, Integer::max);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;listæ±‚å’Œï¼š&quot;</span> + sum.get() + <span class="string">&quot;,&quot;</span> + sum2.get() + <span class="string">&quot;,&quot;</span> + sum3);</span><br><span class="line">System.out.println(<span class="string">&quot;listæ±‚ç§¯ï¼š&quot;</span> + product.get());</span><br><span class="line">System.out.println(<span class="string">&quot;listæ±‚æœ€å¤§å€¼ï¼š&quot;</span> + max.get() + <span class="string">&quot;,&quot;</span> + max2);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">æ±‚æ‰€æœ‰å‘˜å·¥çš„å·¥èµ„ä¹‹å’Œå’Œæœ€é«˜å·¥èµ„ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Person&gt; personList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Person&gt;();</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">8900</span>, <span class="number">23</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Jack&quot;</span>, <span class="number">7000</span>, <span class="number">25</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lily&quot;</span>, <span class="number">7800</span>, <span class="number">21</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Anni&quot;</span>, <span class="number">8200</span>, <span class="number">24</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Owen&quot;</span>, <span class="number">9500</span>, <span class="number">25</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alisa&quot;</span>, <span class="number">7900</span>, <span class="number">26</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‚å·¥èµ„ä¹‹å’Œæ–¹å¼1ï¼š</span></span><br><span class="line">Optional&lt;Integer&gt; sumSalary = personList.stream().map(Person::getSalary).reduce(Integer::sum);</span><br><span class="line"><span class="comment">// æ±‚å·¥èµ„ä¹‹å’Œæ–¹å¼2ï¼š</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">sumSalary2</span> <span class="operator">=</span> personList.stream().reduce(<span class="number">0</span>, (sum, p) -&gt; sum += p.getSalary(),</span><br><span class="line">(sum1, sum2) -&gt; sum1 + sum2);</span><br><span class="line"><span class="comment">// æ±‚å·¥èµ„ä¹‹å’Œæ–¹å¼3ï¼š</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">sumSalary3</span> <span class="operator">=</span> personList.stream().reduce(<span class="number">0</span>, (sum, p) -&gt; sum += p.getSalary(), Integer::sum);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‚æœ€é«˜å·¥èµ„æ–¹å¼1ï¼š</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">maxSalary</span> <span class="operator">=</span> personList.stream().reduce(<span class="number">0</span>, (max, p) -&gt; max &gt; p.getSalary() ? max : p.getSalary(),</span><br><span class="line">Integer::max);</span><br><span class="line"><span class="comment">// æ±‚æœ€é«˜å·¥èµ„æ–¹å¼2ï¼š</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">maxSalary2</span> <span class="operator">=</span> personList.stream().reduce(<span class="number">0</span>, (max, p) -&gt; max &gt; p.getSalary() ? max : p.getSalary(),</span><br><span class="line">(max1, max2) -&gt; max1 &gt; max2 ? max1 : max2);</span><br><span class="line"><span class="comment">// æ±‚æœ€é«˜å·¥èµ„æ–¹å¼3ï¼š</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">maxSalary3</span> <span class="operator">=</span> personList.stream().map(Person::getSalary).reduce(Integer::max).get();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;å·¥èµ„ä¹‹å’Œï¼š&quot;</span> + sumSalary.get() + <span class="string">&quot;,&quot;</span> + sumSalary2 + <span class="string">&quot;,&quot;</span> + sumSalary3);</span><br><span class="line">System.out.println(<span class="string">&quot;æœ€é«˜å·¥èµ„ï¼š&quot;</span> + maxSalary + <span class="string">&quot;,&quot;</span> + maxSalary2 + <span class="string">&quot;,&quot;</span> + maxSalary3);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-7æ”¶é›†-collect"><a href="#3-7æ”¶é›†-collect" class="headerlink" title="3.7æ”¶é›†(collect)"></a>3.7æ”¶é›†(collect)</h3><h4 id="3-7-1-toList-toSet-toMap"><a href="#3-7-1-toList-toSet-toMap" class="headerlink" title="3.7.1(toList&#x2F;toSet&#x2F;toMap)"></a>3.7.1(toList&#x2F;toSet&#x2F;toMap)</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">å› ä¸ºæµä¸å­˜å‚¨æ•°æ®ï¼Œé‚£ä¹ˆåœ¨æµä¸­çš„æ•°æ®å®Œæˆå¤„ç†åï¼Œéœ€è¦å°†æµä¸­çš„æ•°æ®é‡æ–°å½’é›†åˆ°æ–°çš„é›†åˆé‡Œã€‚toListã€toSetå’ŒtoMapæ¯”è¾ƒå¸¸ç”¨ï¼Œå¦å¤–è¿˜æœ‰toCollectionã€toConcurrentMapç­‰å¤æ‚ä¸€äº›çš„ç”¨æ³•ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Integer&gt; list = Arrays.asList(<span class="number">1</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">6</span>, <span class="number">20</span>);</span><br><span class="line">List&lt;Integer&gt; listNew = list.stream().filter(x -&gt; x % <span class="number">2</span> == <span class="number">0</span>).collect(Collectors.toList());</span><br><span class="line">Set&lt;Integer&gt; set = list.stream().filter(x -&gt; x % <span class="number">2</span> == <span class="number">0</span>).collect(Collectors.toSet());</span><br><span class="line"></span><br><span class="line">List&lt;Person&gt; personList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Person&gt;();</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">8900</span>, <span class="number">23</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Jack&quot;</span>, <span class="number">7000</span>, <span class="number">25</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lily&quot;</span>, <span class="number">7800</span>, <span class="number">21</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Anni&quot;</span>, <span class="number">8200</span>, <span class="number">24</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line"></span><br><span class="line">Map&lt;?, Person&gt; map = personList.stream().filter(p -&gt; p.getSalary() &gt; <span class="number">8000</span>)</span><br><span class="line">.collect(Collectors.toMap(Person::getName, p -&gt; p));</span><br><span class="line">System.out.println(<span class="string">&quot;toList:&quot;</span> + listNew);</span><br><span class="line">System.out.println(<span class="string">&quot;toSet:&quot;</span> + set);</span><br><span class="line">System.out.println(<span class="string">&quot;toMap:&quot;</span> + map);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-7-2ç»Ÿè®¡-count-averageing"><a href="#3-7-2ç»Ÿè®¡-count-averageing" class="headerlink" title="3.7.2ç»Ÿè®¡(count&#x2F;averageing)"></a>3.7.2ç»Ÿè®¡(count&#x2F;averageing)</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">Collectorsæä¾›äº†ä¸€ç³»åˆ—ç”¨äºæ•°æ®ç»Ÿè®¡çš„é™æ€æ–¹æ³•ï¼š</span></span><br><span class="line"><span class="comment">è®¡æ•°ï¼šcount</span></span><br><span class="line"><span class="comment">å¹³å‡å€¼ï¼šaveragingIntã€averagingLongã€averagingDouble</span></span><br><span class="line"><span class="comment">æœ€å€¼ï¼šmaxByã€minBy</span></span><br><span class="line"><span class="comment">æ±‚å’Œï¼šsummingIntã€summingLongã€summingDouble</span></span><br><span class="line"><span class="comment">ç»Ÿè®¡ä»¥ä¸Šæ‰€æœ‰ï¼šsummarizingIntã€summarizingLongã€summarizingDouble</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Person&gt; personList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Person&gt;();</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">8900</span>, <span class="number">23</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Jack&quot;</span>, <span class="number">7000</span>, <span class="number">25</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lily&quot;</span>, <span class="number">7800</span>, <span class="number">21</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±‚æ€»æ•°</span></span><br><span class="line"><span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> personList.stream().collect(Collectors.counting());</span><br><span class="line"><span class="comment">// æ±‚å¹³å‡å·¥èµ„</span></span><br><span class="line"><span class="type">Double</span> <span class="variable">average</span> <span class="operator">=</span> personList.stream().collect(Collectors.averagingDouble(Person::getSalary));</span><br><span class="line"><span class="comment">// æ±‚æœ€é«˜å·¥èµ„</span></span><br><span class="line">Optional&lt;Integer&gt; max = personList.stream().map(Person::getSalary).collect(Collectors.maxBy(Integer::compare));</span><br><span class="line"><span class="comment">// æ±‚å·¥èµ„ä¹‹å’Œ</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">sum</span> <span class="operator">=</span> personList.stream().collect(Collectors.summingInt(Person::getSalary));</span><br><span class="line"><span class="comment">// ä¸€æ¬¡æ€§ç»Ÿè®¡æ‰€æœ‰ä¿¡æ¯</span></span><br><span class="line"><span class="type">DoubleSummaryStatistics</span> <span class="variable">collect</span> <span class="operator">=</span> personList.stream().collect(Collectors.summarizingDouble(Person::getSalary));</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;å‘˜å·¥æ€»æ•°ï¼š&quot;</span> + count);</span><br><span class="line">System.out.println(<span class="string">&quot;å‘˜å·¥å¹³å‡å·¥èµ„ï¼š&quot;</span> + average);</span><br><span class="line">System.out.println(<span class="string">&quot;å‘˜å·¥å·¥èµ„æ€»å’Œï¼š&quot;</span> + sum);</span><br><span class="line">System.out.println(<span class="string">&quot;å‘˜å·¥å·¥èµ„æ‰€æœ‰ç»Ÿè®¡ï¼š&quot;</span> + collect);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-7-3åˆ†ç»„-partitioningBy-groupingBy"><a href="#3-7-3åˆ†ç»„-partitioningBy-groupingBy" class="headerlink" title="3.7.3åˆ†ç»„(partitioningBy&#x2F;groupingBy)"></a>3.7.3åˆ†ç»„(partitioningBy&#x2F;groupingBy)</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">åˆ†åŒºï¼šå°†streamæŒ‰æ¡ä»¶åˆ†ä¸ºä¸¤ä¸ªMapï¼Œæ¯”å¦‚å‘˜å·¥æŒ‰è–ªèµ„æ˜¯å¦é«˜äº8000åˆ†ä¸ºä¸¤éƒ¨åˆ†ã€‚</span></span><br><span class="line"><span class="comment">åˆ†ç»„ï¼šå°†é›†åˆåˆ†ä¸ºå¤šä¸ªMapï¼Œæ¯”å¦‚å‘˜å·¥æŒ‰æ€§åˆ«åˆ†ç»„ã€‚æœ‰å•çº§åˆ†ç»„å’Œå¤šçº§åˆ†ç»„ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Person&gt; personList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Person&gt;();</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">8900</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Jack&quot;</span>, <span class="number">7000</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lily&quot;</span>, <span class="number">7800</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Anni&quot;</span>, <span class="number">8200</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Owen&quot;</span>, <span class="number">9500</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alisa&quot;</span>, <span class="number">7900</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†å‘˜å·¥æŒ‰è–ªèµ„æ˜¯å¦é«˜äº8000åˆ†ç»„</span></span><br><span class="line">        Map&lt;Boolean, List&lt;Person&gt;&gt; part = personList.stream().collect(Collectors.partitioningBy(x -&gt; x.getSalary() &gt; <span class="number">8000</span>));</span><br><span class="line">        <span class="comment">// å°†å‘˜å·¥æŒ‰æ€§åˆ«åˆ†ç»„</span></span><br><span class="line">        Map&lt;String, List&lt;Person&gt;&gt; group = personList.stream().collect(Collectors.groupingBy(Person::getSex));</span><br><span class="line">        <span class="comment">// å°†å‘˜å·¥å…ˆæŒ‰æ€§åˆ«åˆ†ç»„ï¼Œå†æŒ‰åœ°åŒºåˆ†ç»„</span></span><br><span class="line">        Map&lt;String, Map&lt;String, List&lt;Person&gt;&gt;&gt; group2 = personList.stream().collect(Collectors.groupingBy(Person::getSex, Collectors.groupingBy(Person::getArea)));</span><br><span class="line">        System.out.println(<span class="string">&quot;å‘˜å·¥æŒ‰è–ªèµ„æ˜¯å¦å¤§äº8000åˆ†ç»„æƒ…å†µï¼š&quot;</span> + part);</span><br><span class="line">        System.out.println(<span class="string">&quot;å‘˜å·¥æŒ‰æ€§åˆ«åˆ†ç»„æƒ…å†µï¼š&quot;</span> + group);</span><br><span class="line">        System.out.println(<span class="string">&quot;å‘˜å·¥æŒ‰æ€§åˆ«ã€åœ°åŒºï¼š&quot;</span> + group2);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-7-4æ¥åˆ-joining"><a href="#3-7-4æ¥åˆ-joining" class="headerlink" title="3.7.4æ¥åˆ(joining)"></a>3.7.4æ¥åˆ(joining)</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">joiningå¯ä»¥å°†streamä¸­çš„å…ƒç´ ç”¨ç‰¹å®šçš„è¿æ¥ç¬¦ï¼ˆæ²¡æœ‰çš„è¯ï¼Œåˆ™ç›´æ¥è¿æ¥ï¼‰è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Person&gt; personList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Person&gt;();</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">8900</span>, <span class="number">23</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Jack&quot;</span>, <span class="number">7000</span>, <span class="number">25</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lily&quot;</span>, <span class="number">7800</span>, <span class="number">21</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">names</span> <span class="operator">=</span> personList.stream().map(p -&gt; p.getName()).collect(Collectors.joining(<span class="string">&quot;,&quot;</span>));</span><br><span class="line">System.out.println(<span class="string">&quot;æ‰€æœ‰å‘˜å·¥çš„å§“åï¼š&quot;</span> + names);</span><br><span class="line">List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">string</span> <span class="operator">=</span> list.stream().collect(Collectors.joining(<span class="string">&quot;-&quot;</span>));</span><br><span class="line">System.out.println(<span class="string">&quot;æ‹¼æ¥åçš„å­—ç¬¦ä¸²ï¼š&quot;</span> + string);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-7-5å½’çº¦-reducing"><a href="#3-7-5å½’çº¦-reducing" class="headerlink" title="3.7.5å½’çº¦(reducing)"></a>3.7.5å½’çº¦(reducing)</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">Collectorsç±»æä¾›çš„reducingæ–¹æ³•ï¼Œç›¸æ¯”äºstreamæœ¬èº«çš„reduceæ–¹æ³•ï¼Œå¢åŠ äº†å¯¹è‡ªå®šä¹‰å½’çº¦çš„æ”¯æŒã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Person&gt; personList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Person&gt;();</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">8900</span>, <span class="number">23</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Jack&quot;</span>, <span class="number">7000</span>, <span class="number">25</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lily&quot;</span>, <span class="number">7800</span>, <span class="number">21</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯ä¸ªå‘˜å·¥å‡å»èµ·å¾ç‚¹åçš„è–ªèµ„ä¹‹å’Œï¼ˆè¿™ä¸ªä¾‹å­å¹¶ä¸ä¸¥è°¨ï¼Œä½†ä¸€æ—¶æ²¡æƒ³åˆ°å¥½çš„ä¾‹å­ï¼‰</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">sum</span> <span class="operator">=</span> personList.stream().collect(Collectors.reducing(<span class="number">0</span>, Person::getSalary, (i, j) -&gt; (i + j - <span class="number">5000</span>)));</span><br><span class="line">System.out.println(<span class="string">&quot;å‘˜å·¥æ‰£ç¨è–ªèµ„æ€»å’Œï¼š&quot;</span> + sum);</span><br><span class="line"></span><br><span class="line"><span class="comment">// streamçš„reduce</span></span><br><span class="line">Optional&lt;Integer&gt; sum2 = personList.stream().map(Person::getSalary).reduce(Integer::sum);</span><br><span class="line">System.out.println(<span class="string">&quot;å‘˜å·¥è–ªèµ„æ€»å’Œï¼š&quot;</span> + sum2.get());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-8æ’åº-sorted"><a href="#3-8æ’åº-sorted" class="headerlink" title="3.8æ’åº(sorted)"></a>3.8æ’åº(sorted)</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">sortedï¼Œä¸­é—´æ“ä½œã€‚æœ‰ä¸¤ç§æ’åºï¼š</span></span><br><span class="line"><span class="comment">    sorted()ï¼šè‡ªç„¶æ’åºï¼Œæµä¸­å…ƒç´ éœ€å®ç°Comparableæ¥å£</span></span><br><span class="line"><span class="comment">    sorted(Comparator com)ï¼šComparatoræ’åºå™¨è‡ªå®šä¹‰æ’åº</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">List&lt;Person&gt; personList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Person&gt;();</span><br><span class="line"></span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Sherry&quot;</span>, <span class="number">9000</span>, <span class="number">24</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Tom&quot;</span>, <span class="number">8900</span>, <span class="number">22</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Jack&quot;</span>, <span class="number">9000</span>, <span class="number">25</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Washington&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lily&quot;</span>, <span class="number">8800</span>, <span class="number">26</span>, <span class="string">&quot;male&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line">personList.add(<span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alisa&quot;</span>, <span class="number">9000</span>, <span class="number">26</span>, <span class="string">&quot;female&quot;</span>, <span class="string">&quot;New York&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‰å·¥èµ„å‡åºæ’åºï¼ˆè‡ªç„¶æ’åºï¼‰</span></span><br><span class="line">List&lt;String&gt; newList = personList.stream().sorted(Comparator.comparing(Person::getSalary)).map(Person::getName)</span><br><span class="line">.collect(Collectors.toList());</span><br><span class="line"><span class="comment">// æŒ‰å·¥èµ„å€’åºæ’åº</span></span><br><span class="line">List&lt;String&gt; newList2 = personList.stream().sorted(Comparator.comparing(Person::getSalary).reversed())</span><br><span class="line">.map(Person::getName).collect(Collectors.toList());</span><br><span class="line"><span class="comment">// å…ˆæŒ‰å·¥èµ„å†æŒ‰å¹´é¾„å‡åºæ’åº</span></span><br><span class="line">List&lt;String&gt; newList3 = personList.stream()</span><br><span class="line">.sorted(Comparator.comparing(Person::getSalary).thenComparing(Person::getAge)).map(Person::getName)</span><br><span class="line">.collect(Collectors.toList());</span><br><span class="line"><span class="comment">// å…ˆæŒ‰å·¥èµ„å†æŒ‰å¹´é¾„è‡ªå®šä¹‰æ’åºï¼ˆé™åºï¼‰</span></span><br><span class="line">List&lt;String&gt; newList4 = personList.stream().sorted((p1, p2) -&gt; &#123;</span><br><span class="line"><span class="keyword">if</span> (p1.getSalary() == p2.getSalary()) &#123;</span><br><span class="line"><span class="keyword">return</span> p2.getAge() - p1.getAge();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> p2.getSalary() - p1.getSalary();</span><br><span class="line">&#125;</span><br><span class="line">&#125;).map(Person::getName).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;æŒ‰å·¥èµ„å‡åºæ’åºï¼š&quot;</span> + newList);</span><br><span class="line">System.out.println(<span class="string">&quot;æŒ‰å·¥èµ„é™åºæ’åºï¼š&quot;</span> + newList2);</span><br><span class="line">System.out.println(<span class="string">&quot;å…ˆæŒ‰å·¥èµ„å†æŒ‰å¹´é¾„å‡åºæ’åºï¼š&quot;</span> + newList3);</span><br><span class="line">System.out.println(<span class="string">&quot;å…ˆæŒ‰å·¥èµ„å†æŒ‰å¹´é¾„è‡ªå®šä¹‰é™åºæ’åºï¼š&quot;</span> + newList4);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-9æå–-ç»„åˆ"><a href="#3-9æå–-ç»„åˆ" class="headerlink" title="3.9æå–&#x2F;ç»„åˆ"></a>3.9æå–&#x2F;ç»„åˆ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">æµä¹Ÿå¯ä»¥è¿›è¡Œåˆå¹¶ã€å»é‡ã€é™åˆ¶ã€è·³è¿‡ç­‰æ“ä½œã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">String[] arr1 = &#123; <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span> &#125;;</span><br><span class="line">String[] arr2 = &#123; <span class="string">&quot;d&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;f&quot;</span>, <span class="string">&quot;g&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">Stream&lt;String&gt; stream1 = Stream.of(arr1);</span><br><span class="line">Stream&lt;String&gt; stream2 = Stream.of(arr2);</span><br><span class="line"><span class="comment">// concat:åˆå¹¶ä¸¤ä¸ªæµ distinctï¼šå»é‡</span></span><br><span class="line">List&lt;String&gt; newList = Stream.concat(stream1, stream2).distinct().collect(Collectors.toList());</span><br><span class="line"><span class="comment">// limitï¼šé™åˆ¶ä»æµä¸­è·å¾—å‰nä¸ªæ•°æ®</span></span><br><span class="line">List&lt;Integer&gt; collect = Stream.iterate(<span class="number">1</span>, x -&gt; x + <span class="number">2</span>).limit(<span class="number">10</span>).collect(Collectors.toList());</span><br><span class="line"><span class="comment">// skipï¼šè·³è¿‡å‰nä¸ªæ•°æ®</span></span><br><span class="line">List&lt;Integer&gt; collect2 = Stream.iterate(<span class="number">1</span>, x -&gt; x + <span class="number">2</span>).skip(<span class="number">1</span>).limit(<span class="number">5</span>).collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;æµåˆå¹¶ï¼š&quot;</span> + newList);</span><br><span class="line">System.out.println(<span class="string">&quot;limitï¼š&quot;</span> + collect);</span><br><span class="line">System.out.println(<span class="string">&quot;skipï¼š&quot;</span> + collect2);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿™ç¯‡åšå®¢å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå¯ä»¥ç‚¹èµæ”¯æŒä¸€ä¸‹åšä¸»ï¼Œæ„Ÿè°¢</p>]]></content>
      
      
      <categories>
          
          <category> -åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -åç«¯ -Streamæµ -å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flexå¸ƒå±€çŸ¥è¯†ç‚¹</title>
      <link href="/2022/11/05/flex%E5%B8%83%E5%B1%80%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
      <url>/2022/11/05/flex%E5%B8%83%E5%B1%80%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="flex-dirctionå±æ€§"><a href="#flex-dirctionå±æ€§" class="headerlink" title="flex-dirctionå±æ€§"></a>flex-dirctionå±æ€§</h3><ul><li>flexå¸ƒå±€ä¸­é»˜è®¤xè½´ä¸ºä¸»è½´ï¼Œå¯ä»¥ç”¨flex-dirction:column æŒ‡å®šyè½´ä¸ºä¸»è½´</li></ul><h3 id="justify-contentå±æ€§"><a href="#justify-contentå±æ€§" class="headerlink" title="justify-contentå±æ€§"></a>justify-contentå±æ€§</h3><ul><li><h5 id="æŒ‡å®šä¸»è½´çš„æ’åˆ—æ–¹å¼"><a href="#æŒ‡å®šä¸»è½´çš„æ’åˆ—æ–¹å¼" class="headerlink" title="æŒ‡å®šä¸»è½´çš„æ’åˆ—æ–¹å¼"></a>æŒ‡å®šä¸»è½´çš„æ’åˆ—æ–¹å¼</h5></li><li><p>flex-startä¸ºé»˜è®¤</p></li><li><p>flex-end</p></li><li><p>center</p></li><li><p>space-around ä¸è´´è¾¹</p></li><li><p>space-between è´´è¾¹</p></li></ul><h3 id="flex-wrapå±æ€§"><a href="#flex-wrapå±æ€§" class="headerlink" title="flex-wrapå±æ€§"></a>flex-wrapå±æ€§</h3><ul><li>flexå¸ƒå±€ä¸­é»˜è®¤ä¸ºnowrapä¸æ¢è¡Œï¼Œå¦‚æœç›’å­è¶…å‡ºï¼Œé‚£ä¹ˆå°±ä¼šç¼©å°å­ç›’å­çš„å®½åº¦ï¼Œçˆ¶ç›’å­ä¸å˜</li></ul><h3 id="align-itemså±æ€§"><a href="#align-itemså±æ€§" class="headerlink" title="align-itemså±æ€§"></a>align-itemså±æ€§</h3><ul><li><h5 id="æŒ‡å®šä¾§è½´çš„æ’åˆ—æ–¹å¼-å•è¡Œ-ä¸æ¢è¡Œ"><a href="#æŒ‡å®šä¾§è½´çš„æ’åˆ—æ–¹å¼-å•è¡Œ-ä¸æ¢è¡Œ" class="headerlink" title="æŒ‡å®šä¾§è½´çš„æ’åˆ—æ–¹å¼(å•è¡Œ)(ä¸æ¢è¡Œ)"></a>æŒ‡å®šä¾§è½´çš„æ’åˆ—æ–¹å¼(å•è¡Œ)(ä¸æ¢è¡Œ)</h5></li><li><p>flex-start é»˜è®¤</p></li><li><p>flex-end</p></li><li><p>center</p></li><li><p>stretchæ‹‰ä¼¸,ä½†æ˜¯å­ç›’å­ä¸èƒ½ç»™é«˜åº¦</p></li></ul><h3 id="align-contentå±æ€§"><a href="#align-contentå±æ€§" class="headerlink" title="align-contentå±æ€§"></a>align-contentå±æ€§</h3><ul><li><h5 id="ä½¿ç”¨align-contentå‰ææ˜¯æœ‰æ¢è¡Œ-å¤šè¡Œ-ï¼Œéœ€è¦è®¾ç½®flex-wrap-wrap"><a href="#ä½¿ç”¨align-contentå‰ææ˜¯æœ‰æ¢è¡Œ-å¤šè¡Œ-ï¼Œéœ€è¦è®¾ç½®flex-wrap-wrap" class="headerlink" title="ä½¿ç”¨align-contentå‰ææ˜¯æœ‰æ¢è¡Œ(å¤šè¡Œ)ï¼Œéœ€è¦è®¾ç½®flex-wrap:wrap"></a>ä½¿ç”¨align-contentå‰ææ˜¯æœ‰æ¢è¡Œ(å¤šè¡Œ)ï¼Œéœ€è¦è®¾ç½®flex-wrap:wrap</h5></li><li><p>ä½¿ç”¨align-contentæœ‰ä»¥ä¸‹é¢å¤–çš„å±æ€§å€¼</p></li><li><p>space-around</p></li><li><p>space-between</p></li></ul><h3 id="flex-flowå±æ€§"><a href="#flex-flowå±æ€§" class="headerlink" title="flex-flowå±æ€§"></a>flex-flowå±æ€§</h3><ul><li>flex-flowå±æ€§å±äºå¤åˆå±æ€§ </li><li>flex-flow:column wrap å¯ä»¥åŒæ—¶æŒ‡å®šflex-directionå’Œflex-wrap</li></ul><h3 id="flexå±æ€§"><a href="#flexå±æ€§" class="headerlink" title="flexå±æ€§(*)"></a>flexå±æ€§(*)</h3><ul><li>ç”¨äºæŒ‡å®šçˆ¶ç›’å­åœ¨ä¸€è¡Œä¸­å‰©ä½™ç©ºé—´çš„åˆ†é…æƒ…å†µ</li><li>å­ç›’å­ç›¸å¯¹äºçˆ¶ç›’å­æ¥è¯´å¯ä»¥å†™ç™¾åˆ†å·%</li><li>flex:20% ä¸€è¡Œæ”¾äº”ä¸ªç›’å­</li><li>flex:1</li></ul><h3 id="align-selfå±æ€§"><a href="#align-selfå±æ€§" class="headerlink" title="align-selfå±æ€§"></a>align-selfå±æ€§</h3><ul><li>å½“ä¾§è½´ä¸Šçš„æŸä¸ªå­ç›’å­éœ€è¦ç‰¹æ®Šæ’åˆ—æ—¶ï¼Œå¯ä»¥æ­é…:nth-child(x)ä½¿ç”¨</li></ul><h3 id="orderå±æ€§"><a href="#orderå±æ€§" class="headerlink" title="orderå±æ€§"></a>orderå±æ€§</h3><ul><li>ç”¨äºæŒ‡å®šå­ç›’å­æ˜¾ç¤ºçš„ä¼˜å…ˆçº§å¯ä»¥è¿›è¡Œå·¦å³è°ƒæ¢</li></ul><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">Flex_å¸ƒå±€çŸ¥è¯†ç‚¹</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> -å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -Flex -å‰ç«¯ -çŸ¥è¯†ç‚¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cmdå‘½ä»¤å­¦ä¹ </title>
      <link href="/2022/10/28/cmd%E5%91%BD%E4%BB%A4%E5%AD%A6%E4%B9%A0/"/>
      <url>/2022/10/28/cmd%E5%91%BD%E4%BB%A4%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="NetStatç½‘ç»œå‘½ä»¤"><a href="#NetStatç½‘ç»œå‘½ä»¤" class="headerlink" title="NetStatç½‘ç»œå‘½ä»¤"></a>NetStatç½‘ç»œå‘½ä»¤</h3><p>1.æŸ¥è¯¢æŸ8082ç«¯å£å¯¹åº”çš„è¿›ç¨‹ID PID å¯ä»¥ç”¨</p><p>netstat -ano | findstr â€œ8082â€</p><p>2.ç»“æŸèµ·PIDå¯¹åº”çš„ç«¯å£è¿›ç¨‹</p><p>taskkill &#x2F;F &#x2F;pid 13304</p><p>3.æŸ¥çœ‹æŸç½‘ç«™æ˜¯å¦å¯è¿æ¥</p><p>ping baidu.com</p><p>4.æ‰¹å¤„ç†æ€æ­»å¯¹åº”çš„æœåŠ¡åç§°çš„è¿›ç¨‹</p><p>taskkill &#x2F;IM nginx.exe &#x2F;F</p><p>&#x2F;F è¡¨ç¤ºå¼ºåˆ¶ç»ˆæ­¢</p><p>&#x2F;IM è¡¨ç¤ºæŒ‡å®šè¿›ç¨‹çš„åç§°</p><p>å¦‚æœä¸é€‚ç”¨åç§°ï¼Œå¯ä»¥ä½¿ç”¨è¿›ç¨‹å·</p><p>taskkill &#x2F;F &#x2F;pid 13304</p><p>5.æŸ¥çœ‹æœ¬æœºipåœ°å€</p><p>ipconfig</p><p>6.æŸ¥çœ‹Linuxçš„ipåœ°å€</p><p>ifconfig</p><p>7.æŸ¥çœ‹å½“å‰è¿è¡Œçš„æŸä¸ªè¿›ç¨‹</p><p>tasklist | findstr â€œnginxâ€</p><h3 id="MySQLæ•°æ®åº“å‘½ä»¤"><a href="#MySQLæ•°æ®åº“å‘½ä»¤" class="headerlink" title="MySQLæ•°æ®åº“å‘½ä»¤"></a>MySQLæ•°æ®åº“å‘½ä»¤</h3><p>1.net start mysql å¯åŠ¨MySQLæœåŠ¡</p><p>2.net stop mysql åœæ­¢MySQLæœåŠ¡</p><h3 id="Linux-Centos7-ç½‘ç»œNATè¿æ¥æ¨¡å¼ä¸èƒ½ä¸Šç½‘é—®é¢˜"><a href="#Linux-Centos7-ç½‘ç»œNATè¿æ¥æ¨¡å¼ä¸èƒ½ä¸Šç½‘é—®é¢˜" class="headerlink" title="Linux-Centos7 ç½‘ç»œNATè¿æ¥æ¨¡å¼ä¸èƒ½ä¸Šç½‘é—®é¢˜"></a>Linux-Centos7 ç½‘ç»œNATè¿æ¥æ¨¡å¼ä¸èƒ½ä¸Šç½‘é—®é¢˜</h3><p>1.åœæ­¢NetworkManageræœåŠ¡</p><p>systemctl stop NetworkManager</p><p>2.é‡å¯networkæœåŠ¡</p><p>service network restart</p><h3 id="Linuxæ‰“å¼€Rediså‘½ä»¤è¡Œå®¢æˆ·ç«¯"><a href="#Linuxæ‰“å¼€Rediså‘½ä»¤è¡Œå®¢æˆ·ç«¯" class="headerlink" title="Linuxæ‰“å¼€Rediså‘½ä»¤è¡Œå®¢æˆ·ç«¯"></a>Linuxæ‰“å¼€Rediså‘½ä»¤è¡Œå®¢æˆ·ç«¯</h3><p>redis-cli -h 127.0.0.1)(ipåœ°å€) -p 6379(ç«¯å£å·) -a 663057(å¯†ç )</p>]]></content>
      
      
      <categories>
          
          <category> -cmdå‘½ä»¤ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> -å‘½ä»¤è¡Œ -çŸ¥è¯†ç‚¹ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
